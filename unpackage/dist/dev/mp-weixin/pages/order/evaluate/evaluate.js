(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/evaluate/evaluate"],{203:function(e,t,n){"use strict";(function(e,t){var i=n(4);n(26);i(n(25));var o=i(n(204));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},204:function(e,t,n){"use strict";n.r(t);var i=n(205),o=n(207);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n(214);var a,c=n(34),s=Object(c["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],a);s.options.__file="pages/order/evaluate/evaluate.vue",t["default"]=s.exports},205:function(e,t,n){"use strict";n.r(t);var i=n(206);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},206:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));var o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.loadding?null:e.__map(e.tableData,(function(t,n){var i=e.__get_orig(t),o=t.image_list.length;return{$orig:i,g0:o}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},r=!1,a=[];o._withStripped=!0},207:function(e,t,n){"use strict";n.r(t);var i=n(208),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},208:function(e,t,n){"use strict";(function(e){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(209)),r={components:{Upload:o.default},data:function(){return{loadding:!0,order_id:"",tableData:[],score:10,isUpload:!1,image_id:[],img:"/static/temp/photo.jpg",index:"",service:[],logistics:[],describe:[]}},onLoad:function(e){this.order_id=e.order_id},mounted:function(){e.showLoading({title:"加载中"}),this.getData()},methods:{getData:function(){var t=this,n=t.order_id;t._get("user.comment/order",{order_id:n},(function(n){t.tableData=n.data.productList;t.tableData.forEach((function(e,n){t.tableData[n].score=10,t.tableData[n].image_list=[],t.service.push([!1,!1,!1,!1,!1]),t.logistics.push([!1,!1,!1,!1,!1]),t.describe.push([!1,!1,!1,!1,!1])}));t.loadding=!1,e.hideLoading()}))},gradeFunc:function(e,t,n){e.score=t,this.$set(this.tableData,n,e),console.log(this.tableData)},chooseLog:function(e,t){var n=this,i=this;i.tableData[t].express_score=0,this.logistics[t].forEach((function(o,r){r<=e?(n.logistics[t].splice(r,1,!0),i.tableData[t].express_score++):n.logistics[t].splice(r,1,!1)}))},chooseServ:function(e,t){var n=this,i=this;i.tableData[t].server_score=0,this.service[t].forEach((function(o,r){r<=e?(n.service[t].splice(r,1,!0),i.tableData[t].server_score++):n.service[t].splice(r,1,!1)})),console.log(i.tableData)},choosees:function(e,t){var n=this,i=this;i.tableData[t].describe_score=0,this.describe[t].forEach((function(o,r){r<=e?(n.describe[t].splice(r,1,!0),i.tableData[t].describe_score++):n.describe[t].splice(r,1,!1)})),console.log(i.tableData)},formSubmit:function(e){var t=this,n=t.order_id,i=[];this.tableData.forEach((function(e,t){i[t]={order_product_id:e.order_product_id,product_id:e.product_id,score:e.score,image_list:e.image_list,express_score:e.express_score,server_score:e.server_score,describe_score:e.describe_score,content:""},e.content&&(i[t].content=e.content)})),console.log(i),t._post("user.comment/order",{order_id:n,formData:JSON.stringify(i)},(function(e){t.showSuccess("评价成功！",(function(){t.gotoPage("/pages/order/myorder","redirect")}))}))},openUpload:function(e){this.isUpload=!1,this.index=e,this.isUpload=!0},getImgsFunc:function(e){var t=this;if(e&&"undefined"!=typeof e){var n=t.index;t.tableData[n].image_list=t.tableData[n].image_list.concat(e)}t.isUpload=!1},deleteImg:function(e,t){var n=this.tableData[e];n.image_list.splice(t,1),this.$set(this.tableData,e,n)}}};t.default=r}).call(this,n(2)["default"])},209:function(e,t,n){"use strict";n.r(t);var i=n(210),o=n(212);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);var a,c=n(34),s=Object(c["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],a);s.options.__file="components/upload/upload.vue",t["default"]=s.exports},210:function(e,t,n){"use strict";n.r(t);var i=n(211);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},211:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));var o=function(){var e=this,t=e.$createElement;e._self._c},r=!1,a=[];o._withStripped=!0},212:function(e,t,n){"use strict";n.r(t);var i=n(213),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},213:function(e,t,n){"use strict";(function(e){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(13)),r={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var n=[];n.push(e.tempFilePath),console.log(n),t.uploadFile(n)}},fail:function(e){console.log(e),t.$emit("getImgs",null)}}):e.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){var n=this,i=0,r=t.length,a={token:e.getStorageSync("token"),app_id:n.getAppId(),file_type:n.isVideo?"video":"image"};e.showLoading({title:"上传中"}),t.forEach((function(t,c){e.uploadFile({url:n.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:a,success:function(e){var t="object"===(0,o.default)(e.data)?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void n.doLogin();1===t.code&&n.imageList.push(t.data)},complete:function(){i++,r===i&&(e.hideLoading(),n.$emit("getImgs",n.imageList))}})}))}}};t.default=r}).call(this,n(2)["default"])},214:function(e,t,n){"use strict";n.r(t);var i=n(215),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},215:function(e,t,n){}},[[203,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/order/evaluate/evaluate.js.map