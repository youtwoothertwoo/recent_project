(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/cashier"],{770:function(e,r,n){"use strict";(function(e,r){var t=n(4);n(26);t(n(25));var o=t(n(771));e.__webpack_require_UNI_MP_PLUGIN__=n,r(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},771:function(e,r,n){"use strict";n.r(r);var t=n(772),o=n(774);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(r,e,(function(){return o[e]}))}(a);n(776);var s,c=n(34),i=Object(c["default"])(o["default"],t["render"],t["staticRenderFns"],!1,null,null,null,!1,t["components"],s);i.options.__file="pages/order/cashier.vue",r["default"]=i.exports},772:function(e,r,n){"use strict";n.r(r);var t=n(773);n.d(r,"render",(function(){return t["render"]})),n.d(r,"staticRenderFns",(function(){return t["staticRenderFns"]})),n.d(r,"recyclableRender",(function(){return t["recyclableRender"]})),n.d(r,"components",(function(){return t["components"]}))},773:function(e,r,n){"use strict";var t;n.r(r),n.d(r,"render",(function(){return o})),n.d(r,"staticRenderFns",(function(){return s})),n.d(r,"recyclableRender",(function(){return a})),n.d(r,"components",(function(){return t}));try{t={passwordInput:function(){return n.e("components/password-input/password-input").then(n.bind(null,1161))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,r=e.$createElement,n=(e._self._c,e.theme()||""),t=e.theme(),o=e.hasBanlance?e.getTheme():null;e._isMounted||(e.e0=function(r){e.showPasswordModal=!1}),e.$mp.data=Object.assign({},{$root:{m0:n,m1:t,m2:o}})},a=!1,s=[];o._withStripped=!0},774:function(e,r,n){"use strict";n.r(r);var t=n(775),o=n.n(t);for(var a in t)["default"].indexOf(a)<0&&function(e){n.d(r,e,(function(){return t[e]}))}(a);r["default"]=o.a},775:function(e,r,n){"use strict";(function(e,t){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(122),a=function(){n.e("components/password-input/password-input").then(function(){return resolve(n(1161))}.bind(null,n)).catch(n.oe)},s={components:{PasswordInput:a},data:function(){return{balance:"",balanceType:!1,type:0,loading:!0,order_id:0,order_type:0,pay_type:20,checkedPay:[],payPrice:"",userInfo:{},showPasswordModal:!1}},computed:{hasBanlance:function(){if(40==this.order_type||this.balance<=0)return!1;var e=this.checkedPay.indexOf(10);return-1!=e}},onLoad:function(r){e.enableAlertBeforeUnload({message:"您的订单如在规定时间内未支付将被取消，请尽快完成支付",success:function(e){console.log("方法注册成功：",e)},fail:function(e){console.log("方法注册失败：",e)}}),this.order_id=decodeURIComponent(r.order_id),r.order_type&&(this.order_type=r.order_type),this.getData()},onShow:function(){var e=this;e._get("user.index/setting",{},(function(r){e.userInfo=r.data.userInfo,t.hideLoading()}))},onBackPress:function(e){if(20!=this.order_type&&30!=this.order_type&&40!=this.order_type)return"navigateBack"===e.from?(console.log(),!0):(this.back(),!0)},methods:{back:function(){var e=this;t.showModal({title:"提示",content:"您的订单如在规定时间内未支付将被取消，请尽快完成支付",cancelText:"继续支付",confirmText:"确认离开",success:function(r){r.confirm?t.reLaunch({ulr:"/pages/order/order-detail?order_id="+e.order_id}):r.cancel&&console.log("用户点击取消")}})},getTheme:function(){var e=this.theme(),r="#ff5704";switch(e){case"theme0":r="#ff5704";break;case"theme1":r="#19ad57";break;case"theme2":r="#ffcc00";break;case"theme3":r="#33a7ff";break;case"theme4":r="#e4e4e4";break;case"theme5":r="#c8ba97";break;case"theme6":r="#623ceb";break}return r},getData:function(){var e=this;e.loading=!0,t.showLoading({title:"加载中"});var r="user.order/pay";20==e.order_type&&(r="supplier.index/pay"),30==e.order_type&&(r="plus.live.plan/pay"),40==e.order_type&&(r="balance.plan/pay"),50==e.order_type&&(r="plus.advance.Order/pay");var n={order_id:e.order_id,pay_source:e.getPlatform()};e._get(r,n,(function(r){e.loading=!1;var n=[];r.data.payTypes.forEach((function(e){n.push(1*e)})),e.checkedPay=n,e.payPrice=r.data.payPrice,e.balance=r.data.balance||"",10!=e.checkedPay[0]?e.pay_type=e.checkedPay[0]||e.checkedPay[1]||20:e.pay_type=e.checkedPay[1]||e.checkedPay[0],t.hideLoading()}))},switch2Change:function(e){this.balanceType=e.detail.value},openSubmit:function(){0===this.userInfo.pay_password_status&&this.balanceType?t.showModal({title:"支付密码未设置",confirmText:"前往设置",success:function(e){e.confirm&&t.navigateTo({url:"/pages/user/set/set"})}}):this.balanceType?this.showPasswordModal=!0:this.submit()},submit:function(){var e=this;e.loading=!0,t.showLoading({title:"加载中"});var r="user.order/pay";20==e.order_type&&(r="supplier.index/pay"),40==e.order_type&&(r="balance.plan/pay"),30==e.order_type&&(r="plus.live.plan/pay"),50==e.order_type&&(r="plus.advance.Order/pay");var n=1==e.balanceType?1:0;0==e.payPrice&&(n=1);var a={order_id:e.order_id,pay_source:e.getPlatform(),payType:e.pay_type,use_balance:n};e._post(r,a,(function(r){e.loading=!1,t.hideLoading(),(0,o.pay)(r,e,e.paySuccess,e.payError)}))},onPasswordConfirm:function(e){var r=this;this.showPasswordModal=!1;var n={pay_password:e};r._post("user.user/checkPayPassword",n,(function(e){r.showSuccess("核对成功"),r.submit()}))},paySuccess:function(e){var r=this;return console.log(r.order_type),30==r.order_type||40==r.order_type?void r.showSuccess("支付成功",(function(){console.log("back"),t.navigateBack({delta:1})})):20==r.order_type?void r.showSuccess("支付成功",(function(){r.gotoPage("/pages/user/my_shop/my_shop","reLaunch")})):50==r.order_type?void r.showSuccess("支付成功",(function(){r.gotoPage("/pages/order/myorder","reLaunch")})):void r.gotoPage("/pages/order/pay-success/pay-success?order_id="+e.data.order_id,"reLaunch")},payError:function(e){var r=this;30==r.order_type||40==r.order_type?t.navigateBack({delta:parseInt(1)}):20==r.order_type?r.gotoPage("/pages/user/my_shop/my_shop","redirect"):(r.order_type,r.gotoPage("/pages/order/myorder","redirect"))},payTypeFunc:function(e){this.pay_type=e}}};r.default=s}).call(this,n(1)["default"],n(2)["default"])},776:function(e,r,n){"use strict";n.r(r);var t=n(777),o=n.n(t);for(var a in t)["default"].indexOf(a)<0&&function(e){n.d(r,e,(function(){return t[e]}))}(a);r["default"]=o.a},777:function(e,r,n){}},[[770,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/order/cashier.js.map