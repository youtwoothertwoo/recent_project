(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/refund/apply/apply"],{209:function(e,t,n){"use strict";n.r(t);var o=n(210),i=n(212);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a,u=n(34),d=Object(u["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);d.options.__file="components/upload/upload.vue",t["default"]=d.exports},210:function(e,t,n){"use strict";n.r(t);var o=n(211);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},211:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c},r=!1,a=[];i._withStripped=!0},212:function(e,t,n){"use strict";n.r(t);var o=n(213),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},213:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(13)),r={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var n=[];n.push(e.tempFilePath),console.log(n),t.uploadFile(n)}},fail:function(e){console.log(e),t.$emit("getImgs",null)}}):e.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){var n=this,o=0,r=t.length,a={token:e.getStorageSync("token"),app_id:n.getAppId(),file_type:n.isVideo?"video":"image"};e.showLoading({title:"上传中"}),t.forEach((function(t,u){e.uploadFile({url:n.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:a,success:function(e){var t="object"===(0,i.default)(e.data)?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void n.doLogin();1===t.code&&n.imageList.push(t.data)},complete:function(){o++,r===o&&(e.hideLoading(),n.$emit("getImgs",n.imageList))}})}))}}};t.default=r}).call(this,n(2)["default"])},232:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26);o(n(25));var i=o(n(233));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},233:function(e,t,n){"use strict";n.r(t);var o=n(234),i=n(236);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var a,u=n(34),d=Object(u["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);d.options.__file="pages/order/refund/apply/apply.vue",t["default"]=d.exports},234:function(e,t,n){"use strict";n.r(t);var o=n(235);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},235:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return o}));var i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.loadding?null:e.images.length);e.$mp.data=Object.assign({},{$root:{g0:n}})},r=!1,a=[];i._withStripped=!0},236:function(e,t,n){"use strict";n.r(t);var o=n(237),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},237:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(209)),r={components:{Upload:i.default},data:function(){return{loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,type:10,isUpload:!1,order_product_id:0,product:{image:{file_path:""}},images:[],temlIds:[]}},onLoad:function(e){this.order_product_id=e.order_product_id},mounted:function(){this.getData()},methods:{getData:function(){var t=this;e.showLoading({title:"加载中"}),t.loadding=!0;var n=t.order_product_id;t._get("user.refund/apply",{order_product_id:n,platform:t.getPlatform()},(function(n){t.loadding=!1,t.product=n.data.detail,t.temlIds=n.data.template_arr,30==t.product.orderM.delivery_type.value&&(t.type=30),e.hideLoading()}))},tabType:function(e){this.type=e},formSubmit:function(t){var n=this,o=t.detail.value;o.type=n.type,o.order_product_id=n.order_product_id,o.images=JSON.stringify(n.images);var i=function(){e.showLoading({title:"正在提交",mask:!0}),n._post("user.refund/apply",o,(function(t){e.hideLoading(),e.showToast({title:t.msg,duration:3e3,complete:function(){n.gotoPage("/pages/order/refund/index/index")}})}))};n.subMessage(n.temlIds,i)},openUpload:function(){this.isUpload=!0},getImgsFunc:function(e){var t=this;if(t.isUpload=!1,e&&"undefined"!=typeof e){var n=t.images.length,o=e.length;if(n+o<7)t.images=t.images.concat(e);else for(var i=6-n,r=0;r<i;r++)t.images.push(e[r])}},deleteFunc:function(e){this.images.splice(e,1)}}};t.default=r}).call(this,n(2)["default"])}},[[232,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/pages/order/refund/apply/apply.js.map