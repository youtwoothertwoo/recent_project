(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/confirm-order"],{109:function(t,o,e){"use strict";(function(t,o){var r=e(4);e(26);r(e(25));var n=r(e(110));t.__webpack_require_UNI_MP_PLUGIN__=e,o(n.default)}).call(this,e(1)["default"],e(2)["createPage"])},110:function(t,o,e){"use strict";e.r(o);var r=e(111),n=e(113);for(var i in n)["default"].indexOf(i)<0&&function(t){e.d(o,t,(function(){return n[t]}))}(i);e(123);var s,d=e(34),a=Object(d["default"])(n["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],s);a.options.__file="pages/order/confirm-order.vue",o["default"]=a.exports},111:function(t,o,e){"use strict";e.r(o);var r=e(112);e.d(o,"render",(function(){return r["render"]})),e.d(o,"staticRenderFns",(function(){return r["staticRenderFns"]})),e.d(o,"recyclableRender",(function(){return r["recyclableRender"]})),e.d(o,"components",(function(){return r["components"]}))},112:function(t,o,e){"use strict";var r;e.r(o),e.d(o,"render",(function(){return n})),e.d(o,"staticRenderFns",(function(){return s})),e.d(o,"recyclableRender",(function(){return i})),e.d(o,"components",(function(){return r}));var n=function(){var t=this,o=t.$createElement,e=(t._self._c,t.loading?null:t.theme()||""),r=t.loading?null:t.theme(),n=t.loading?null:t.__map(t.ProductData,(function(o,e){var r=t.__get_orig(o),n="deposit"==t.options.order_type||t.OrderData.force_points?null:t.objKeys(o.orderData.couponList,1),i="deposit"==t.options.order_type||t.OrderData.force_points||!(n>0)||o.orderData.coupon_money>0?null:t.objKeys(o.orderData.couponList,1),s="deposit"!=t.options.order_type&&1==t.is_use_points&&!t.OrderData.force_points&&o.orderData.points_money>0?t.points_name():null,d="deposit"!=t.options.order_type?o.productList.length:null,a="deposit"==t.options.order_type||t.OrderData.force_points?null:t.toDecimal2(o.orderData.order_pay_price);return{$orig:r,m2:n,m3:i,m4:s,g0:d,m5:a}})),i=!t.loading&&"deposit"!=t.options.order_type&&t.OrderData.is_allow_points&&0==t.OrderData.force_points&&0!=t.OrderData.points_money?t.points_name():null,s=!t.loading&&"deposit"!=t.options.order_type&&t.OrderData.is_allow_points&&0==t.OrderData.force_points&&0!=t.OrderData.points_money?t.toDecimal2(t.OrderData.points_money):null,d=!t.loading&&"deposit"!=t.options.order_type&&t.OrderData.force_points?t.points_name():null;t.$mp.data=Object.assign({},{$root:{m0:e,m1:r,l0:n,m6:i,m7:s,m8:d}})},i=!1,s=[];n._withStripped=!0},113:function(t,o,e){"use strict";e.r(o);var r=e(114),n=e.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){e.d(o,t,(function(){return r[t]}))}(i);o["default"]=n.a},114:function(t,o,e){"use strict";(function(t){var r=e(4);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=r(e(11));r(e(115)),e(122);function i(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,r)}return e}function s(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?i(Object(e),!0).forEach((function(o){(0,n.default)(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}var d=function(){e.e("pages/order/confirm-order/my-info").then(function(){return resolve(e(1014))}.bind(null,e)).catch(e.oe)},a=function(){e.e("pages/order/confirm-order/coupon").then(function(){return resolve(e(1021))}.bind(null,e)).catch(e.oe)},u=function(){e.e("pages/order/confirm-order/distr").then(function(){return resolve(e(1028))}.bind(null,e)).catch(e.oe)},c={components:{Myinfo:d,Coupon:a,Dist:u},data:function(){return{loading:!0,options:{},indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,product_id:"",product_num:"",ProductData:[],OrderData:[],exist_address:!1,Address:{region:[]},extract_store:[],last_extract:{},product_sku_id:0,delivery:10,store_id:0,coupon_id:-1,is_use_points:1,remark:"",pay_type:20,isCoupon:!1,coupon_list:{},couponList:[],coupon_num:0,isDist:!1,temlIds:[],product_couponid:0,chooseSotr:0,deliverySetting:[],choose_delivery:10,store_data:{},choose_store_id:0,store_list:{},room_id:"",showAlipay:!1,balance:"",store_open:1,userInfo:{}}},onLoad:function(t){var o=this;o.options=t,o.room_id=t.room_id?t.room_id:0,console.log(o.room_id),o.$fire.on("selectStoreId",(function(t){o.extract_store=t,o.choose_store_id=t.store_id})),o.$fire.on("checkedfir",(function(t){o.choose_delivery=t})),this.getData1()},onShow:function(){this.getData()},mounted:function(){},methods:{getData1:function(){var o=this;t.showLoading({title:"加载中"}),o._get("user.index/setting",{},(function(e){o.userInfo=e.data.userInfo,t.hideLoading()}))},init:function(){var t="",o="",e=this;e.ProductData.forEach((function(r,i){t=r.shop_supplier_id,o={coupon_id:r.orderData.coupon_id,delivery:r.orderData.delivery,store_id:0,remark:""},e.store_data=s(s({},e.store_data),{},(0,n.default)({},t,o))}))},hasType:function(t){return-1!=this.deliverySetting.indexOf(t)},payTypeFunc:function(t){this.pay_type=t},onShowPoints:function(t){var o=this;1==t.target.value?o.is_use_points=1:o.is_use_points=0,o.getData()},onTogglePopupCoupon:function(t,o){var e=this;e.chooseSotr=0!=o?o.shop_supplier_id:0,e.isCoupon=!0,e.couponList=t},closeCouponFunc:function(t){var o=this;if(t&&"number"!=typeof t)o.isCoupon=!1;else{if(0!=o.chooseSotr){var e=o.chooseSotr;o.store_data[e].coupon_id=t>0?t:0,o.chooseSotr=0}else o.coupon_id=t>0?t:0;o.isCoupon=!1,o.getData()}},getData:function(){var o=this;t.showLoading({title:"加载中"});var e=function(t){o.OrderData=t.data.orderInfo.orderData,o.temlIds=t.data.template_arr,o.ProductData=t.data.orderInfo.supplierList,o.exist_address=o.OrderData.exist_address,o.Address=o.OrderData.address,o.last_extract=o.OrderData.last_extract,"deposit"!=o.options.order_type&&(o.coupon_list=o.OrderData.coupon_list,o.coupon_id=o.OrderData.coupon_id_sys,o.coupon_num=Object.keys(o.coupon_list).length),o.balance=t.data.balance,o.store_open=t.data.store_open,0==o.OrderData.order_pay_price&&(o.pay_type=10),"{}"==JSON.stringify(o.store_data)&&o.init(),t.data.show_alipay&&(o.showAlipay=!0),o.loading=!1},r={delivery:o.delivery,store_id:o.store_id,coupon_id:o.coupon_id,is_use_points:o.is_use_points,pay_source:"android"};if(r="{}"==JSON.stringify(o.store_data)?r:s(s({},r),{},{supplier:o.store_data}),"buy"===o.options.order_type)o._get("order.order/buy",{params:JSON.stringify(Object.assign({},r,{product_id:o.options.product_id,product_num:o.options.product_num,product_sku_id:o.options.product_sku_id}))},(function(t){e(t)}),(function(o){t.navigateBack()}));else if("deposit"===o.options.order_type){var n=Object.assign({},r,{product_id:o.options.product_id,product_num:o.options.product_num,product_sku_id:o.options.product_sku_id,advance_product_sku_id:o.options.advance_product_sku_id,advance_product_id:o.options.advance_product_id});console.log(n),o._get("plus.advance.Order/frontBuy",{params:JSON.stringify(Object.assign({},r,{product_id:o.options.product_id,product_num:o.options.product_num,product_sku_id:o.options.product_sku_id,advance_product_sku_id:o.options.advance_product_sku_id,advance_product_id:o.options.advance_product_id}))},(function(t){e(t)}),(function(o){t.navigateBack()}))}else"retainage"===o.options.order_type?o._get("plus.advance.Order/buy",{params:JSON.stringify(Object.assign({},r,{order_id:o.options.order_id}))},(function(t){e(t)}),(function(o){t.navigateBack()})):"cart"===o.options.order_type?o._get("order.order/cart",{params:JSON.stringify(Object.assign({},r,{cart_ids:o.options.cart_ids||0}))},(function(t){e(t)}),(function(o){t.navigateBack()})):"points"==o.options.order_type?(console.log(o.options),o._get("plus.points.order/buy",{params:JSON.stringify(Object.assign({},r,{point_product_id:o.options.point_product_id,product_sku_id:o.options.product_sku_id,point_product_sku_id:o.options.point_product_sku_id,product_num:o.options.product_num}))},(function(t){e(t)}),(function(o){t.navigateBack()}))):"seckill"===o.options.order_type?(r.num=o.options.num,o._get("plus.seckill.order/buy",{params:JSON.stringify(Object.assign({},r,{seckill_product_id:o.options.seckill_product_id,product_sku_id:o.options.product_sku_id,seckill_product_sku_id:o.options.seckill_product_sku_id,product_num:o.options.product_num}))},(function(t){e(t)}),(function(o){t.navigateBack()}))):"bargain"===o.options.order_type?o._get("plus.bargain.order/buy",{params:JSON.stringify(Object.assign({},r,{bargain_product_id:o.options.bargain_product_id,product_sku_id:o.options.product_sku_id,bargain_product_sku_id:o.options.bargain_product_sku_id,bargain_task_id:o.options.bargain_task_id}))},(function(t){e(t)}),(function(o){t.navigateBack()})):"assemble"===o.options.order_type&&o._get("plus.assemble.order/buy",{params:JSON.stringify(Object.assign({},r,{assemble_product_id:o.options.assemble_product_id,product_sku_id:o.options.product_sku_id,assemble_product_sku_id:o.options.assemble_product_sku_id,product_num:o.options.product_num,assemble_bill_id:o.options.assemble_bill_id}))},(function(t){e(t)}),(function(o){t.navigateBack()}))},toDecimal2:function(t){var o=parseFloat(t);if(isNaN(o))return"0.00";o=Math.round(100*t);var e=Math.round(1e3*t),r=e.toString().split("");r=r[r.length-1],r>=5?o=(o-1)/100:o/=100;var n=o.toString(),i=n.indexOf(".");i<0&&(i=n.length,n+=".");while(n.length<=i+2)n+="0";return n},DistUp:function(t){if(30!=t.orderData.delivery){var o=this;o.store_id=t.shop_supplier_id,o.chooseSotr=t.shop_supplier_id,o.choose_delivery=t.orderData.delivery;o.chooseSotr;o.getData(),o.deliverySetting=t.orderData.deliverySetting,o.extract_store=t.orderData.extract_store,this.isDist=!0}},closeDistFunc:function(t){var o=this;o.choose_delivery=t,o.isDist=!1;var e="";o.extract_store.region&&(e=o.extract_store.region.province+o.extract_store.region.city+o.extract_store.region.region+o.extract_store.store_name);var r=o.chooseSotr,n=o.choose_store_id;o.delivery=o.choose_delivery,o.store_id=r,o.store_data[r].store_id=n,o.store_data[r].delivery=o.choose_delivery,o.store_list[r]=e,o.chooseSotr=0,o.getData()},objKeys:function(t,o){if(t)return 1==o?Object.keys(t).length:Object.keys(t)},SubmitOrder:function(){var o=this;if(o.exist_address){t.showLoading({title:"加载中",mask:!0});var e={pay_type:o.pay_type,room_id:o.room_id,coupon_id:o.coupon_id,is_use_points:o.is_use_points};e=Object.assign(e,{supplier:o.store_data});var r="";"buy"===o.options.order_type&&(r="order.order/buy",e=Object.assign(e,{product_id:o.options.product_id,product_num:o.options.product_num,product_sku_id:o.options.product_sku_id,room_id:o.options.room_id||0}),e=JSON.stringify(e)),"deposit"===o.options.order_type&&(r="plus.advance.Order/frontBuy",e=Object.assign(e,{product_id:o.options.product_id,product_num:o.options.product_num,product_sku_id:o.options.product_sku_id,advance_product_sku_id:o.options.advance_product_sku_id,advance_product_id:o.options.advance_product_id}),e=JSON.stringify(e)),"retainage"===o.options.order_type&&(r="plus.advance.Order/buy",e=Object.assign(e,{order_id:o.options.order_id}),e=JSON.stringify(e)),"cart"===o.options.order_type&&(r="order.order/cart",e=Object.assign(e,{cart_ids:o.options.cart_ids||0,room_id:o.options.room_id||0}),e=JSON.stringify(e)),"points"===o.options.order_type&&(r="plus.points.order/buy",e=Object.assign(e,{point_product_id:o.options.point_product_id,product_sku_id:o.options.product_sku_id,point_product_sku_id:o.options.point_product_sku_id,product_num:o.options.product_num}),e=JSON.stringify(e)),"seckill"===o.options.order_type&&(r="plus.seckill.order/buy",e.num=o.options.num,e=Object.assign(e,{seckill_product_id:o.options.seckill_product_id,product_sku_id:o.options.product_sku_id,seckill_product_sku_id:o.options.seckill_product_sku_id,product_num:o.options.product_num}),e=JSON.stringify(e)),"bargain"===o.options.order_type&&(r="plus.bargain.order/buy",e=Object.assign(e,{bargain_product_id:o.options.bargain_product_id,product_sku_id:o.options.product_sku_id,bargain_product_sku_id:o.options.bargain_product_sku_id,bargain_task_id:o.options.bargain_task_id}),e=JSON.stringify(e)),"assemble"===o.options.order_type&&(r="plus.assemble.order/buy",e=Object.assign(e,{assemble_product_id:o.options.assemble_product_id,product_sku_id:o.options.product_sku_id,assemble_product_sku_id:o.options.assemble_product_sku_id,assemble_bill_id:o.options.assemble_bill_id,product_num:o.options.product_num}),e=JSON.stringify(e));var n=function(){o._post(r,{params:e},(function(t){var e="",r="";"deposit"==o.options.order_type?r="/pages/order/cashier?order_type=50&order_id="+t.data.order_id:"retainage"==o.options.order_type?(e=t.data.order_id,r="/pages/order/cashier?order_type=10&order_id="+e):(e=encodeURIComponent(t.data.order_id.join(",")),r="/pages/order/cashier?order_type=10&order_id="+e),console.log(r),o.gotoPage(r,"reLaunch")}))};o.subMessage(o.temlIds,n)}else t.showToast({title:"请选择配送地址"})}}};o.default=c}).call(this,e(2)["default"])},115:function(t,o,e){"use strict";e.r(o);var r=e(116),n=e(118);for(var i in n)["default"].indexOf(i)<0&&function(t){e.d(o,t,(function(){return n[t]}))}(i);e(120);var s,d=e(34),a=Object(d["default"])(n["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],s);a.options.__file="components/uni-popup.vue",o["default"]=a.exports},116:function(t,o,e){"use strict";e.r(o);var r=e(117);e.d(o,"render",(function(){return r["render"]})),e.d(o,"staticRenderFns",(function(){return r["staticRenderFns"]})),e.d(o,"recyclableRender",(function(){return r["recyclableRender"]})),e.d(o,"components",(function(){return r["components"]}))},117:function(t,o,e){"use strict";var r;e.r(o),e.d(o,"render",(function(){return n})),e.d(o,"staticRenderFns",(function(){return s})),e.d(o,"recyclableRender",(function(){return i})),e.d(o,"components",(function(){return r}));var n=function(){var t=this,o=t.$createElement;t._self._c},i=!1,s=[];n._withStripped=!0},118:function(t,o,e){"use strict";e.r(o);var r=e(119),n=e.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){e.d(o,t,(function(){return r[t]}))}(i);o["default"]=n.a},119:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r={props:{show:{type:Boolean,default:!1},type:{type:String,default:"middle"},width:{type:Number,default:600},heigth:{type:Number,default:800},padding:{type:Number,default:30},backgroundColor:{type:String,default:"#ffffff"},boxShadow:{type:String,default:"0 0 30upx rgba(0, 0, 0, .1)"},msg:{type:String,default:""}},data:function(){var t=0;return{offsetTop:t}},methods:{hide:function(){this.$emit("hidePopup")}}};o.default=r},120:function(t,o,e){"use strict";e.r(o);var r=e(121),n=e.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){e.d(o,t,(function(){return r[t]}))}(i);o["default"]=n.a},121:function(t,o,e){},123:function(t,o,e){"use strict";e.r(o);var r=e(124),n=e.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){e.d(o,t,(function(){return r[t]}))}(i);o["default"]=n.a},124:function(t,o,e){}},[[109,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/order/confirm-order.js.map