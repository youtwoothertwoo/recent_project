(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/myorder"],{141:function(e,t,a){"use strict";(function(e,t){var n=a(4);a(26);n(a(25));var o=n(a(142));e.__webpack_require_UNI_MP_PLUGIN__=a,t(o.default)}).call(this,a(1)["default"],a(2)["createPage"])},142:function(e,t,a){"use strict";a.r(t);var n=a(143),o=a(145);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);a(147);var r,s=a(34),c=Object(s["default"])(o["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],r);c.options.__file="pages/order/myorder.vue",t["default"]=c.exports},143:function(e,t,a){"use strict";a.r(t);var n=a(144);a.d(t,"render",(function(){return n["render"]})),a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),a.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),a.d(t,"components",(function(){return n["components"]}))},144:function(e,t,a){"use strict";var n;a.r(t),a.d(t,"render",(function(){return o})),a.d(t,"staticRenderFns",(function(){return r})),a.d(t,"recyclableRender",(function(){return i})),a.d(t,"components",(function(){return n}));var o=function(){var e=this,t=e.$createElement,a=(e._self._c,e.theme()||""),n=e.theme(),o=e.__map(e.listData,(function(t,a){var n=e.__get_orig(t),o=t.product.length,i=o>1?t.product.length:null,r=o>1||70!=t.order_source?null:(1*t.pay_price+1*t.advance.pay_price).toFixed(2),s=70==t.order_source&&10==t.order_status.value&&t.advance&&20==t.advance.pay_status.value?e.nowOverTime(t.advance.end_time)&&t.pay_end_time_format:null,c=70==t.order_source&&10==t.advance.pay_status.value&&10==t.advance.order_status?!e.nowOverTime(t.advance.pay_end_time)&&!e.nowOverTime(t.advance.end_time):null,d=70==t.order_source&&10==t.advance.pay_status.value&&10==t.advance.order_status&&c?e.countDown(t.advance.pay_end_time):null,u=70==t.order_source&&21!=t.order_status.value&&20==t.advance.pay_status.value&&10==t.pay_status.value?e.nowOverTime(t.advance.end_time)&&20!=t.order_status.value:null,l=70==t.order_source&&21!=t.order_status.value?10==t.advance.pay_status.value&&20!=t.order_status.value&&!e.nowOverTime(t.advance.pay_end_time):null;return{$orig:n,g0:o,g1:i,g2:r,m2:s,m3:c,m4:d,m5:u,m6:l}})),i=0==e.listData.length&&!e.loading;e.$mp.data=Object.assign({},{$root:{m0:a,m1:n,l0:o,g3:i}})},i=!1,r=[];o._withStripped=!0},145:function(e,t,a){"use strict";a.r(t);var n=a(146),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},146:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(122),o=function(){a.e("components/uni-popup").then(function(){return resolve(a(115))}.bind(null,a)).catch(a.oe)},i=function(){a.e("components/uni-load-more").then(function(){return resolve(a(937))}.bind(null,a)).catch(a.oe)},r={components:{Popup:o,uniLoadMore:i},data:function(){return{phoneHeight:0,scrollviewHigh:0,state_active:0,topRefresh:!1,listData:[],dataType:"all",isPayPopup:!1,pay_type:20,order_id:0,last_page:0,page:1,list_rows:10,no_more:!1,loading:!0,isCodeImg:!1,codeImg:"",showAlipay:!1,isfirst:!1}},computed:{loadingType:function(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},onLoad:function(e){"undefined"!=typeof e.dataType&&(this.dataType=e.dataType),"payment"==this.dataType?this.state_active=1:"received"==this.dataType?this.state_active=3:"comment"==this.dataType?this.state_active=4:"delivery"==this.dataType&&(this.state_active=2)},mounted:function(){this.init(),this.initData(),this.getData()},onShow:function(){this.isfirst&&(this.initData(),this.getData())},methods:{initData:function(){var e=this;e.page=1,e.listData=[],e.no_more=!1},cancelAdvance:function(t){var a=this,n=t;e.showModal({title:"提示",content:"您确定要取消吗?",success:function(t){t.confirm&&(e.showLoading({title:"正在处理"}),a._get("plus.advance.Order/cancelFront",{order_id:n},(function(t){e.hideLoading(),e.showToast({title:"操作成功",duration:2e3,icon:"success"}),a.listData=[],a.getData()})))}})},depositPay:function(e){this.gotoPage("/pages/order/confirm-order?order_type=retainage&order_id="+e)},init:function(){var t=this;e.getSystemInfo({success:function(a){t.phoneHeight=a.windowHeight;var n=e.createSelectorQuery().in(t).select(".top-tabbar");n.boundingClientRect((function(e){var a=t.phoneHeight-e.height;t.scrollviewHigh=a})).exec()}})},stateFunc:function(e){console.log(11111,e);var t=this;if(t.state_active!=e){switch(t.page=1,t.loading=!0,t.state_active=e,e){case 0:t.listData=[],t.dataType="all";break;case 1:t.listData=[],t.dataType="payment";break;case 2:t.listData=[],t.dataType="delivery";break;case 3:t.listData=[],t.dataType="received";break;case 4:t.listData=[],t.dataType="comment";break}t.getData()}},scrolltolowerFunc:function(){var e=this;e.no_more||(e.page++,e.page<=e.last_page?e.getData():e.no_more=!0)},getData:function(){var e=this;e.loading=!0;var t=e.dataType;e._get("user.order/lists",{dataType:t,page:e.page,pay_source:e.getPlatform(),list_rows:e.list_rows},(function(t){e.loading=!1,e.listData=e.listData.concat(t.data.list.data),e.last_page=t.data.list.last_page,t.data.list.last_page<=1?e.no_more=!0:e.no_more=!1,t.data.show_alipay&&(e.showAlipay=!0),e.isfirst=!0}))},gotoOrder:function(e){this.gotoPage("/pages/order/order-detail?order_id="+e)},hidePopupFunc:function(){this.isPayPopup=!1},toShop:function(e){this.gotoPage("/pages/shop/shop?shop_supplier_id="+e)},payTypeFunc:function(t){var a=this;a.isPayPopup=!1,e.showLoading({title:"加载中"}),a._post("user.order/pay",{payType:t,order_id:a.order_id,pay_source:a.getPlatform()},(function(e){(0,n.pay)(e,a)}))},onPayOrder:function(e){var t=this;t.gotoPage("/pages/order/cashier?order_type=1&order_id="+e)},orderReceipt:function(t){var a=this;e.showModal({title:"提示",content:"您确定要收货吗?",success:function(n){n.confirm?(e.showLoading({title:"正在处理"}),a._post("user.order/receipt",{order_id:t},(function(t){e.hideLoading(),e.showToast({title:t.msg,duration:2e3,icon:"success"}),a.listData=[],a.getData()}))):e.showToast({title:"取消收货",duration:1e3,icon:"none"})}})},countDown:function(e){var t=e-Date.now()/1e3,a=Math.floor(t/86400),n=t%86400,o=Math.floor(n/3600);n%=3600;var i=Math.floor(n/60),r=n%60;a=this.convertTwo(a),o=this.convertTwo(o),i=this.convertTwo(i),r=this.convertTwo(r);var s=parseInt(a)>0?parseInt(a)+"天 ":parseInt(o)+"时"+parseInt(i)+"分"+parseInt(r)+"秒";return s},cancelOrder:function(t){var a=this,n=t;e.showModal({title:"提示",content:"您确定要取消吗?",success:function(t){t.confirm&&(e.showLoading({title:"正在处理"}),a._get("user.order/cancel",{order_id:n},(function(t){e.hideLoading(),e.showToast({title:"操作成功",duration:2e3,icon:"success"}),a.listData=[],a.getData()})))}})},gotoEvaluate:function(e){this.gotoPage("/pages/order/evaluate/evaluate?order_id="+e)},onQRCode:function(t){var a=this;e.showLoading({title:"加载中"});var n=t,o=a.getPlatform();a._get("user.order/qrcode",{order_id:n,source:o},(function(t){e.hideLoading(),a.isCodeImg=!0,a.codeImg=t.data.qrcode}))},nowOverTime:function(e){var t=(new Date).getTime(),a=new Date(1e3*e).getTime();return t>=a},hideCodePopupFunc:function(){this.isCodeImg=!1},gotoAssembleShare:function(e){this.gotoPage("/pages/plus/assemble/fight-group-detail/fight-group-detail?assemble_bill_id="+e)}}};t.default=r}).call(this,a(2)["default"])},147:function(e,t,a){"use strict";a.r(t);var n=a(148),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},148:function(e,t,a){}},[[141,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/order/myorder.js.map