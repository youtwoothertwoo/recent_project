(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/fenxiao/index"],{209:function(e,t,n){"use strict";n.r(t);var i=n(210),o=n(212);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);var c,a=n(34),s=Object(a["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],c);s.options.__file="components/upload/upload.vue",t["default"]=s.exports},210:function(e,t,n){"use strict";n.r(t);var i=n(211);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},211:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return c})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));var o=function(){var e=this,t=e.$createElement;e._self._c},r=!1,c=[];o._withStripped=!0},212:function(e,t,n){"use strict";n.r(t);var i=n(213),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},213:function(e,t,n){"use strict";(function(e){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(13)),r={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var n=[];n.push(e.tempFilePath),console.log(n),t.uploadFile(n)}},fail:function(e){console.log(e),t.$emit("getImgs",null)}}):e.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){var n=this,i=0,r=t.length,c={token:e.getStorageSync("token"),app_id:n.getAppId(),file_type:n.isVideo?"video":"image"};e.showLoading({title:"上传中"}),t.forEach((function(t,a){e.uploadFile({url:n.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:c,success:function(e){var t="object"===(0,o.default)(e.data)?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void n.doLogin();1===t.code&&n.imageList.push(t.data)},complete:function(){i++,r===i&&(e.hideLoading(),n.$emit("getImgs",n.imageList))}})}))}}};t.default=r}).call(this,n(2)["default"])},891:function(e,t,n){"use strict";(function(e,t){var i=n(4);n(26);i(n(25));var o=i(n(892));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},892:function(e,t,n){"use strict";n.r(t);var i=n(893),o=n(895);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n(897);var c,a=n(34),s=Object(a["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],c);s.options.__file="pages/fenxiao/index.vue",t["default"]=s.exports},893:function(e,t,n){"use strict";n.r(t);var i=n(894);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},894:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return c})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));var o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.store_photos_preview.length),i=e.contract_preview.length;e.$mp.data=Object.assign({},{$root:{g0:n,g1:i}})},r=!1,c=[];o._withStripped=!0},895:function(e,t,n){"use strict";n.r(t);var i=n(896),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},896:function(e,t,n){"use strict";(function(e){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(209)),r=function(){n.e("components/mpvue-citypicker/mpvueCityPicker").then(function(){return resolve(n(1035))}.bind(null,n)).catch(n.oe)},c={components:{Upload:o.default,mpvueCityPicker:r},data:function(){return{form:{business_license:"",store_photos:[],store_address:"",province_id:"",city_id:"",region_id:"",id_card_front:"",id_card_back:"",agent_region:"",name:"",mobile:"",store_name:"",shop_hours:"",contract:[]},is_load:!1,cityPickerValueDefault:[0,0,0],selectCity:"选择省,市,区",province:[],city:[],area:[],startTime:"",endTime:"",isupload:!1,uploadNum:1,type:"",business_license_preview:"",id_card_front_preview:"",id_card_back_preview:"",store_photos_preview:[],contract_preview:[],contract_template:""}},created:function(){this.getData(),this.getContract()},methods:{getData:function(){var e=this;e._post("settings/getRegion",{},(function(t){e.province=t.data.regionData[0],e.city=t.data.regionData[1],e.area=t.data.regionData[2],e.is_load=!0}))},getContract:function(){var e=this;e._get("user.index/detail",{url:e.url},(function(t){e.contract_template=t.data.setting.contract}))},showMulLinkageThreePicker:function(){this.$refs.mpvueCityPicker.show()},onConfirm:function(e){var t=this;t._post("plus.agentnew.apply/check",{province_id:e.cityCode[0],city_id:e.cityCode[1],region_id:e.cityCode[2]},(function(n){1==n.code&&(t.selectCity=e.label,t.form.province_id=e.cityCode[0],t.form.city_id=e.cityCode[1],t.form.region_id=e.cityCode[2])}))},onStartTimeChange:function(e){this.startTime=e.detail.value},onEndTimeChange:function(e){this.endTime=e.detail.value},downloadContract:function(){this.contract_template?e.downloadFile({url:this.contract_template,success:function(t){200===t.statusCode?e.openDocument({filePath:t.tempFilePath,showMenu:!0,fileType:"pdf",success:function(){return console.log("打开文档成功")},fail:function(e){return console.error("打开文档失败",e)}}):e.showToast({title:"下载失败",icon:"none"})},fail:function(t){console.error("下载失败",t),e.showToast({title:"下载失败",icon:"none"})}}):e.showToast({title:"暂无合同模板",icon:"none"})},formSubmit:function(t){var n=this;n.form.shop_hours="".concat(n.startTime,"-").concat(n.endTime);var i=Object.assign({},n.form);e.showLoading({title:"正在提交",mask:!0}),n._post("plus.agentnew.apply/submit",i,(function(t){n.showSuccess(t.msg,(function(){n.gotoPage("/pages/shop/application_status")}),null,(function(){e.hideLoading()}))}))},openUpload:function(e){this.type=e,this.uploadNum="store_photos"===e||"contract"===e?9:1,this.isupload=!0},getImgsFunc:function(e){null!=e&&e.length>0&&("store_photos"==this.type?(this.form.store_photos=e.map((function(e){return e.file_id})),this.store_photos_preview=e.map((function(e){return e.file_path}))):"id_card_front"==this.type?(this.form.id_card_front=e[0].file_id,this.id_card_front_preview=e[0].file_path):"id_card_back"==this.type?(this.form.id_card_back=e[0].file_id,this.id_card_back_preview=e[0].file_path):"contract"==this.type?(this.form.contract=e.map((function(e){return e.file_id})),this.contract_preview=e.map((function(e){return e.file_path}))):"business_license"==this.type&&(this.form.business_license=e[0].file_id,this.business_license_preview=e[0].file_path)),this.isupload=!1}}};t.default=c}).call(this,n(2)["default"])},897:function(e,t,n){"use strict";n.r(t);var i=n(898),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},898:function(e,t,n){}},[[891,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/fenxiao/index.js.map