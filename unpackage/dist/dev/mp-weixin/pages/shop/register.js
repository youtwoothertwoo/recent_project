(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/register"],{1168:function(t,e,n){"use strict";n.r(e);var i=n(1169),a=n(1171);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n(1173);var o,r=n(34),c=Object(r["default"])(a["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],o);c.options.__file="pages/shop/register.vue",e["default"]=c.exports},1169:function(t,e,n){"use strict";n.r(e);var i=n(1170);n.d(e,"render",(function(){return i["render"]})),n.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(e,"components",(function(){return i["components"]}))},1170:function(t,e,n){"use strict";var i;n.r(e),n.d(e,"render",(function(){return a})),n.d(e,"staticRenderFns",(function(){return o})),n.d(e,"recyclableRender",(function(){return s})),n.d(e,"components",(function(){return i}));var a=function(){var t=this,e=t.$createElement;t._self._c},s=!1,o=[];a._withStripped=!0},1171:function(t,e,n){"use strict";n.r(e);var i=n(1172),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},1172:function(t,e,n){"use strict";(function(t){var i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n(209)),s={components:{Upload:a.default},data:function(){return{form:{image_frontid:0,business_id:0,mobile:"",password:""},isupload:!1,type:"frontid",image_frontid_path:"",business_id_path:"",bg_image:"",classify_data_name:"",classify_data_id:"",classify_data_name_active:"",classify_data_id_active:"",second:60,send_btn_txt:"获取验证码",is_send:!1,sms_open:0}},created:function(){this.getData(),this.get_classify()},methods:{changeMsg:function(){this.second>0?(this.send_btn_txt=this.second+"秒",this.second--,setTimeout(this.changeMsg,1e3)):(this.send_btn_txt="获取验证码",this.second=60,this.is_send=!1)},getData:function(){var t=this;t._get("user.index/detail",{},(function(e){t.bg_image=e.data.setting.supplier_image}))},getCode:function(t){var e=this;e._post("supplier.apply/sendCode",{mobile:t},(function(t){e.is_send=!0,e.changeMsg()}))},get_classify:function(){var t=this;t._post("supplier.apply/category",{},(function(e){for(var n=[],i=[],a=0;a<e.data.list.length;a++)n.push(e.data.list[a].name);for(var s=0;s<e.data.list.length;s++)i.push(e.data.list[s].category_id);t.classify_data_name=n,t.classify_data_id=i,t.sms_open=e.data.sms_open}))},select:function(){var e=this;t.showActionSheet({itemList:e.classify_data_name,success:function(t){e.classify_data_name_active=e.classify_data_name[t.tapIndex],e.classify_data_id_active=e.classify_data_id[t.tapIndex]},fail:function(t){}})},formSubmit:function(e){var n=this,i=e.detail.value;if(i.business_id=n.form.business_id,console.log(i),console.log(n.form),i.category_id=n.classify_data_id_active,""==n.classify_data_name_active)return t.showToast({title:"请填主营类别",duration:1e3,icon:"none"}),!1;if(""==i.store_name)return t.showToast({title:"请输入店铺名称",duration:1e3,icon:"none"}),!1;if(0==i.business_id)return t.showToast({title:"请上传营业执照",duration:1e3,icon:"none"}),!1;if(""==i.user_name)return t.showToast({title:"请输入真实姓名",duration:1e3,icon:"none"}),!1;if(""==i.mobile)return t.showToast({title:"请输入手机号码",duration:1e3,icon:"none"}),!1;if(""==i.code&&1==n.sms_open)return t.showToast({title:"请填写验证码",duration:1e3,icon:"none"}),!1;if(""==i.password)return t.showToast({title:"请填写登录密码",duration:1e3,icon:"none"}),!1;var a=/^((0\d{2,3}-\d{7,8})|(1[3456789]\d{9}))$/;if(!a.test(i.mobile))return t.showToast({title:"手机号码格式不正确",duration:1e3,icon:"none"}),!1;t.showLoading({title:"正在提交",mask:!0}),n._post("supplier.apply/index",i,(function(e){n.showSuccess(e.msg,(function(){n.gotoPage("/pages/shop/application_status")}),null,(function(){t.hideLoading()}))}))},openUpload:function(t){this.type=t,this.isupload=!0},getImgsFunc:function(t){console.log(t),null!=t&&t.length>0&&("frontid"==this.type?(console.log(t[0].file_id),this.image_frontid_path=t[0].file_path,this.form.image_frontid=t[0].file_id):"license"==this.type&&(console.log(t[0].file_id),this.business_id_path=t[0].file_path,this.form.business_id=t[0].file_id)),this.isupload=!1},changeSelect:function(t){this.classify_data_id_active=this.classify_data_id[t.detail.value],this.classify_data_name_active=this.classify_data_name[t.detail.value]}}};e.default=s}).call(this,n(2)["default"])},1173:function(t,e,n){"use strict";n.r(e);var i=n(1174),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},1174:function(t,e,n){},209:function(t,e,n){"use strict";n.r(e);var i=n(210),a=n(212);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o,r=n(34),c=Object(r["default"])(a["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],o);c.options.__file="components/upload/upload.vue",e["default"]=c.exports},210:function(t,e,n){"use strict";n.r(e);var i=n(211);n.d(e,"render",(function(){return i["render"]})),n.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(e,"components",(function(){return i["components"]}))},211:function(t,e,n){"use strict";var i;n.r(e),n.d(e,"render",(function(){return a})),n.d(e,"staticRenderFns",(function(){return o})),n.d(e,"recyclableRender",(function(){return s})),n.d(e,"components",(function(){return i}));var a=function(){var t=this,e=t.$createElement;t._self._c},s=!1,o=[];a._withStripped=!0},212:function(t,e,n){"use strict";n.r(e);var i=n(213),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},213:function(t,e,n){"use strict";(function(t){var i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n(13)),s={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var e=this;this.isVideo?t.chooseVideo({maxDuration:60,camera:"back",success:function(t){if(console.log(t),t){var n=[];n.push(t.tempFilePath),console.log(n),e.uploadFile(n)}},fail:function(t){console.log(t),e.$emit("getImgs",null)}}):t.chooseImage({count:e.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.uploadFile(t.tempFilePaths)},fail:function(t){e.$emit("getImgs",null)},complete:function(t){}})},uploadFile:function(e){var n=this,i=0,s=e.length,o={token:t.getStorageSync("token"),app_id:n.getAppId(),file_type:n.isVideo?"video":"image"};t.showLoading({title:"上传中"}),e.forEach((function(e,r){t.uploadFile({url:n.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:e,name:"iFile",formData:o,success:function(t){var e="object"===(0,a.default)(t.data)?t.data:JSON.parse(t.data);if(-1===e.code)return console.log("登录态失效, 重新登录"),void n.doLogin();1===e.code&&n.imageList.push(e.data)},complete:function(){i++,s===i&&(t.hideLoading(),n.$emit("getImgs",n.imageList))}})}))}}};e.default=s}).call(this,n(2)["default"])}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/shop/register.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/shop/register-create-component',
    {
        'pages/shop/register-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(1168))
        })
    },
    [['pages/shop/register-create-component']]
]);
