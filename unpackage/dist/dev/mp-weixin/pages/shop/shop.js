(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/shop"],{547:function(t,e,i){"use strict";(function(t,e){var o=i(4);i(26);o(i(25));var n=o(i(548));t.__webpack_require_UNI_MP_PLUGIN__=i,e(n.default)}).call(this,i(1)["default"],i(2)["createPage"])},548:function(t,e,i){"use strict";i.r(e);var o=i(549),n=i(551);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i(553);var s,r=i(34),c=Object(r["default"])(n["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);c.options.__file="pages/shop/shop.vue",e["default"]=c.exports},549:function(t,e,i){"use strict";i.r(e);var o=i(550);i.d(e,"render",(function(){return o["render"]})),i.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),i.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),i.d(e,"components",(function(){return o["components"]}))},550:function(t,e,i){"use strict";var o;i.r(e),i.d(e,"render",(function(){return n})),i.d(e,"staticRenderFns",(function(){return s})),i.d(e,"recyclableRender",(function(){return a})),i.d(e,"components",(function(){return o}));var n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.topBarTop()),o=t.topBarHeight(),n=0!=o?t.topBarHeight():null,a=t.listData.length>=1&&2==t.nav_type,s=2!=t.nav_type&&""!=t.shop_info&&1==t.isLieBiao&&0==t.nav_type?t.__map(t.product_list,(function(e,i){var o=t.__get_orig(e),n=t.listData.length;return{$orig:o,g1:n}})):null,r=2!=t.nav_type&&""!=t.shop_info&&1==t.nav_type?t.liveList.length:null,c=2!=t.nav_type&&0==t.nav_type?0==t.product_list.length&&!t.loading:null,u=t.listData.length;t._isMounted||(t.e0=function(e){t.nav_type=0},t.e1=function(e){t.nav_type=1},t.e2=function(e){t.nav_type=2}),t.$mp.data=Object.assign({},{$root:{m0:i,m1:o,m2:n,g0:a,l0:s,g2:r,g3:c,g4:u}})},a=!1,s=[];n._withStripped=!0},551:function(t,e,i){"use strict";i.r(e);var o=i(552),n=i.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},552:function(t,e,i){"use strict";(function(t){var o=i(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i(18)),a=o(i(11)),s=function(){i.e("components/uni-load-more").then(function(){return resolve(i(937))}.bind(null,i)).catch(i.oe)},r={components:{uniLoadMore:s},data:function(){return{isLieBiao:!0,shop_info:"",product_list:"",adList:"",dataList:"",shop_supplier_id:"",isfollow:"",indicatorDots:!1,autoplay:!0,interval:5e3,duration:1e3,listData:[],topRefresh:!1,loading:!0,no_more:!1,type_active:"all",price_top:!1,shopData:[],page:1,search:"",last_page:0,scrollviewHigh:0,nav_type:0,is_open:0,is_record:0,liveList:[],dataModel:{qq:"",wechat:"",phone:""},service_type:0,service_open:0,statusBarHeight:0,titleBarHeight:0}},computed:{loadingType:function(){return this.loading?1:0!=this.product_list.length&&this.no_more?2:0}},onLoad:function(t){var e=this;e.GetStatusBarHeight(),e.shop_supplier_id=t.shop_supplier_id},onShow:function(){},mounted:function(){this.getData(),this.getProduct(this.type_active)},onPullDownRefresh:function(){this.restoreData(),this.getData(),this.getProduct(this.type_active)},methods:{GetStatusBarHeight:function(){var e=t.getSystemInfoSync();e.statusBarHeight;this.statusBarHeight=t.getMenuButtonBoundingClientRect().top,this.titleBarHeight=t.getMenuButtonBoundingClientRect().height},init:function(){var e=this;t.getSystemInfo({success:function(i){e.phoneHeight=i.windowHeight;var o=t.createSelectorQuery().in(e).select(".shop_head");o.boundingClientRect((function(i){var o=2*e.phoneHeight-2*i.height-100;e.scrollviewHigh=o,t.hideLoading()})).exec()}})},scrolltolowerFunc:function(){var t=this;if(t.bottomRefresh=!0,t.page++,t.loading=!0,t.page>t.last_page)return t.loading=!1,void(t.no_more=!0);t.getProduct(t.type_active)},getProduct:function(t){var e,i=this,o=i.page;i.loading=!0,i._get("product.product/lists",(e={page:o||1,sortType:"price",sortPrice:1},(0,a.default)(e,"sortType",t),(0,a.default)(e,"shop_supplier_id",i.shop_supplier_id),e),(function(t){i.loading=!1,i.product_list=[].concat((0,n.default)(i.product_list),(0,n.default)(t.data.list.data)),i.last_page=t.data.list.last_page,t.data.list.last_page<=1&&(i.no_more=!0)}))},restoreData:function(){this.shopData=[],this.product_list=[],this.page=1,this.category_id=0,this.search="",this.sortType="",this.sortPrice=0},getservice:function(){var t=this;t.isloding=!0,t._get("index/mpService",{shop_supplier_id:t.shop_supplier_id},(function(e){t.dataModel=e.data.mp_service,t.isloding=!1}))},tabTypeFunc:function(t){var e=this;t!=e.type_active&&(e.product_list=[],e.page=1,e.no_more=!1,e.loading=!0,e.type_active=t,e.getProduct(t))},getData:function(){var e=this;e.loading=!0,t.showLoading({title:"加载中...."}),e._post("supplier.index/index",{shop_supplier_id:e.shop_supplier_id,visitcode:e.getVisitcode()},(function(i){e.loading=!1,e.shop_info=i.data.detail,e.adList=i.data.adList,e.isfollow=i.data.detail.isfollow,e.listData=i.data.couponList,e.is_record=i.data.liv_status.is_record,e.is_open=i.data.liv_status.is_open,e.liveList=i.data.liveList.data,e.service_open=i.data.service_open,i.data.mp_service?e.service_type=i.data.mp_service.service_type:e.service_type=10,0==e.scrollviewHigh?setTimeout((function(){e.init()}),2001):t.hideLoading(),e.getservice()}))},select_type:function(){var t=this;t.isLieBiao=!t.isLieBiao},goto_product:function(t){this.gotoPage("/pages/product/detail/detail?product_id="+t)},guanzhu:function(){var t=this;t._post("user.Favorite/add",{pid:t.shop_supplier_id,type:10},(function(e){0==t.isfollow?t.isfollow=1:1==t.isfollow&&(t.isfollow=0)}))},receiveCoupon:function(e){var i=this,o=i.listData[e];if(0==o.state.value)return t.showToast({title:"已抢光",icon:"none"}),!1;i._post("user.coupon/receive",{coupon_id:o.coupon_id},(function(e){t.showToast({title:"领取成功",icon:"success",mask:!0,duration:2e3}),o.state.value=0,o.state.text="已领取"})),i.getData(i.type_active)},copyQQ:function(e){t.setClipboardData({data:e,success:function(e){t.showToast({title:"复制成功",icon:"success",mask:!0,duration:2e3})}})},callPhone:function(e){t.makePhoneCall({phoneNumber:e})},toRoom:function(t){if(""==t.record_url)return!1;this.gotoPage("/pagesLive/live/playback?room_id="+t.room_id)},toSevice:function(){10==this.service_type||this.shop_info.user_id==t.getStorageInfoSync("user_id")?this.nav_type=3:20==this.service_type&&this.gotoPage("/pages/plus/chat/chat?user_id="+this.shop_info.supplier_user_id+"&shop_supplier_id="+this.shop_info.shop_supplier_id+"&nickName="+this.shop_info.store_name)},goback:function(){t.navigateBack({})}}};e.default=r}).call(this,i(2)["default"])},553:function(t,e,i){"use strict";i.r(e);var o=i(554),n=i.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},554:function(t,e,i){}},[[547,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/shop/shop.js.map