(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/weblogin"],{499:function(e,t,o){"use strict";(function(e,t){var i=o(4);o(26);i(o(25));var n=i(o(500));e.__webpack_require_UNI_MP_PLUGIN__=o,t(n.default)}).call(this,o(1)["default"],o(2)["createPage"])},500:function(e,t,o){"use strict";o.r(t);var i=o(501),n=o(503);for(var s in n)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(s);o(505);var r,a=o(34),d=Object(a["default"])(n["default"],i["render"],i["staticRenderFns"],!1,null,"0bcfc898",null,!1,i["components"],r);d.options.__file="pages/login/weblogin.vue",t["default"]=d.exports},501:function(e,t,o){"use strict";o.r(t);var i=o(502);o.d(t,"render",(function(){return i["render"]})),o.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),o.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),o.d(t,"components",(function(){return i["components"]}))},502:function(e,t,o){"use strict";var i;o.r(t),o.d(t,"render",(function(){return n})),o.d(t,"staticRenderFns",(function(){return r})),o.d(t,"recyclableRender",(function(){return s})),o.d(t,"components",(function(){return i}));var n=function(){var e=this,t=e.$createElement,o=(e._self._c,e.theme()||""),i=e.theme();e._isMounted||(e.e0=function(t){e.is_login=1},e.e1=function(t){e.is_login=2},e.e2=function(t){e.is_login=1},e.e3=function(t){e.is_login=0},e.e4=function(t){e.isRead=!e.isRead}),e.$mp.data=Object.assign({},{$root:{m0:o,m1:i}})},s=!1,r=[];n._withStripped=!0},503:function(e,t,o){"use strict";o.r(t);var i=o(504),n=o.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},504:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{formData:{mobile:"",code:""},loging_password:"",register:{mobile:"",password:"",repassword:"",code:""},resetpassword:{mobile:"",password:"",repassword:"",code:""},is_send:!1,send_btn_txt:"获取验证码",second:60,ip:"",isShow:!0,is_login:1,is_code:!0,phoneHeight:0,isRead:!0}},onLoad:function(){this.getData()},onShow:function(){this.init()},methods:{init:function(){var t=this;e.getSystemInfo({success:function(e){t.phoneHeight=e.windowHeight}})},getData:function(){var t=this;t._get("user.userapple/policy",{platform:t.getPlatform(),referee_id:e.getStorageSync("referee_id")},(function(e){console.log(e),t.service=e.data.service,t.privacy=e.data.privacy}))},formSubmit:function(){var t=this,o={mobile:t.formData.mobile},i="";if(t.isRead){if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(t.formData.mobile))return console.log(t.formData.mobile),void e.showToast({title:"手机有误,请重填！",duration:2e3,icon:"none"});if(t.is_code){if(console.log(t.is_code),""==t.formData.code)return void e.showToast({title:"验证码不能为空！",duration:2e3,icon:"none"});o.code=t.formData.code,i="user.useropen/smslogin"}else{if(""==t.loging_password)return void e.showToast({title:"密码不能为空！",duration:2e3,icon:"none"});o.password=t.loging_password,i="user.useropen/phonelogin"}e.showLoading({title:"正在提交"}),t._post(i,o,(function(o){e.setStorageSync("token",o.data.token),e.setStorageSync("user_id",o.data.user_id);var i="/"+e.getStorageSync("currentPage"),n=e.getStorageSync("currentPageOptions");if(Object.keys(n).length>0){for(var s in i+="?",n)i+=s+"="+n[s]+"&";i=i.substring(0,i.length-1)}t.gotoPage(i)}),!1,(function(){e.hideLoading()}))}else e.showToast({title:"请同意并勾选协议内容",duration:2e3,icon:"none"})},registerSub:function(){var t=this;if(t.isRead)return/^1(3|4|5|6|7|8|9)\d{9}$/.test(t.register.mobile)?void(""!=t.register.code?t.register.password.length<6?e.showToast({title:"密码至少6位数！",duration:2e3,icon:"none"}):t.register.password===t.register.repassword?(t.register.invitation_id=e.getStorageSync("invitation_id")?e.getStorageSync("invitation_id"):0,t.register.reg_source="h5",t.register.referee_id=e.getStorageSync("referee_id"),e.showLoading({title:"正在提交"}),t._post("user.useropen/register",t.register,(function(o){e.showToast({title:"注册成功",duration:3e3}),t.formData.mobile=t.register.mobile,t.register={mobile:"",password:"",repassword:"",code:""},t.second=0,t.changeMsg(),t.is_login=1}),!1,(function(){e.hideLoading()}))):e.showToast({title:"两次密码输入不一致！",duration:2e3,icon:"none"}):e.showToast({title:"验证码不能为空！",duration:2e3,icon:"none"})):(console.log(t.register.mobile),void e.showToast({title:"手机有误,请重填！",duration:2e3,icon:"none"}));e.showToast({title:"请同意并勾选协议内容",duration:2e3,icon:"none"})},resetpasswordSub:function(){var t=this;/^1(3|4|5|6|7|8|9)\d{9}$/.test(t.resetpassword.mobile)?""!=t.resetpassword.code?t.resetpassword.password.length<6?e.showToast({title:"密码至少6位数！",duration:2e3,icon:"none"}):t.resetpassword.password===t.resetpassword.repassword?(e.showLoading({title:"正在提交"}),t._post("user.useropen/resetpassword",t.resetpassword,(function(o){e.showToast({title:"重置成功",duration:3e3}),t.formData.mobile=t.resetpassword.mobile,t.resetpassword={mobile:"",password:"",repassword:"",code:""},t.second=0,t.changeMsg(),t.is_login=1}),!1,(function(){e.hideLoading()}))):e.showToast({title:"两次密码输入不一致！",duration:2e3,icon:"none"}):e.showToast({title:"验证码不能为空！",duration:2e3,icon:"none"}):e.showToast({title:"手机有误,请重填！",duration:2e3,icon:"none"})},isCode:function(){this.is_code?this.$set(this,"is_code",!1):this.$set(this,"is_code",!0),console.log(this.is_code)},sendCode:function(){var t=this;if(1==t.is_login){if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(t.formData.mobile))return void e.showToast({title:"手机有误,请重填！",duration:2e3,icon:"none"})}else if(2==t.is_login){if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(t.register.mobile))return void e.showToast({title:"手机有误,请重填！",duration:2e3,icon:"none"})}else if(0==t.is_login&&!/^1(3|4|5|6|7|8|9)\d{9}$/.test(t.resetpassword.mobile))return void e.showToast({title:"手机有误,请重填！",duration:2e3,icon:"none"});var o="register",i=t.register.mobile;1==t.is_login?(o="login",i=t.formData.mobile):0==t.is_login&&(o="login",i=t.resetpassword.mobile),t._post("user.useropen/sendCode",{mobile:i,type:o},(function(o){1==o.code&&(e.showToast({title:"发送成功"}),t.is_send=!0,t.changeMsg())}))},changeMsg:function(){this.second>0?(this.send_btn_txt=this.second+"秒",this.second--,setTimeout(this.changeMsg,1e3)):(this.send_btn_txt="获取验证码",this.second=60,this.is_send=!1)},xieyi:function(t){var o="";o="service"==t?this.service:this.privacy,e.navigateTo({url:"/pages/webview/webview?url="+o})}}};t.default=o}).call(this,o(2)["default"])},505:function(e,t,o){"use strict";o.r(t);var i=o(506),n=o.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},506:function(e,t,o){}},[[499,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/weblogin.js.map