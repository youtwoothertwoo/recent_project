(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plus/table/table"],{209:function(e,t,a){"use strict";a.r(t);var n=a(210),i=a(212);for(var u in i)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(u);var o,l=a(34),r=Object(l["default"])(i["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],o);r.options.__file="components/upload/upload.vue",t["default"]=r.exports},210:function(e,t,a){"use strict";a.r(t);var n=a(211);a.d(t,"render",(function(){return n["render"]})),a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),a.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),a.d(t,"components",(function(){return n["components"]}))},211:function(e,t,a){"use strict";var n;a.r(t),a.d(t,"render",(function(){return i})),a.d(t,"staticRenderFns",(function(){return o})),a.d(t,"recyclableRender",(function(){return u})),a.d(t,"components",(function(){return n}));var i=function(){var e=this,t=e.$createElement;e._self._c},u=!1,o=[];i._withStripped=!0},212:function(e,t,a){"use strict";a.r(t);var n=a(213),i=a.n(n);for(var u in n)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(u);t["default"]=i.a},213:function(e,t,a){"use strict";(function(e){var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(13)),u={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var a=[];a.push(e.tempFilePath),console.log(a),t.uploadFile(a)}},fail:function(e){console.log(e),t.$emit("getImgs",null)}}):e.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){var a=this,n=0,u=t.length,o={token:e.getStorageSync("token"),app_id:a.getAppId(),file_type:a.isVideo?"video":"image"};e.showLoading({title:"上传中"}),t.forEach((function(t,l){e.uploadFile({url:a.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:o,success:function(e){var t="object"===(0,i.default)(e.data)?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void a.doLogin();1===t.code&&a.imageList.push(t.data)},complete:function(){n++,u===n&&(e.hideLoading(),a.$emit("getImgs",a.imageList))}})}))}}};t.default=u}).call(this,a(2)["default"])},748:function(e,t,a){"use strict";(function(e,t){var n=a(4);a(26);n(a(25));var i=n(a(749));e.__webpack_require_UNI_MP_PLUGIN__=a,t(i.default)}).call(this,a(1)["default"],a(2)["createPage"])},749:function(e,t,a){"use strict";a.r(t);var n=a(750),i=a(752);for(var u in i)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(u);a(754);var o,l=a(34),r=Object(l["default"])(i["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],o);r.options.__file="pages/plus/table/table.vue",t["default"]=r.exports},750:function(e,t,a){"use strict";a.r(t);var n=a(751);a.d(t,"render",(function(){return n["render"]})),a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),a.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),a.d(t,"components",(function(){return n["components"]}))},751:function(e,t,a){"use strict";var n;a.r(t),a.d(t,"render",(function(){return i})),a.d(t,"staticRenderFns",(function(){return o})),a.d(t,"recyclableRender",(function(){return u})),a.d(t,"components",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=(e._self._c,e.loading?null:e.theme()||""),n=e.loading?null:e.theme(),i=e.loading?null:e.__map(e.tableData,(function(t,a){var n=e.__get_orig(t),i="radio"==t.type?e.getName(t.select_value):null,u="radio-group"==t.type?e.__map(e.getName(t.select_value),(function(t,n){var i=e.__get_orig(t),u=e.getRadioGroup(a,t);return{$orig:i,m2:u}})):null,o="select"==t.type?e.getName(t.select_value):null;return{$orig:n,l0:i,l1:u,m3:o}}));e._isMounted||(e.e0=function(t,a,n){var i=arguments[arguments.length-1].currentTarget.dataset,u=i.eventParams||i["event-params"];a=u.ritem,n=u.index;return e.changeRadioGroup(a,n)}),e.$mp.data=Object.assign({},{$root:{m0:a,m1:n,l2:i}})},u=!1,o=[];i._withStripped=!0},752:function(e,t,a){"use strict";a.r(t);var n=a(753),i=a.n(n);for(var u in n)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(u);t["default"]=i.a},753:function(e,t,a){"use strict";(function(e){var n=a(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(18)),u=n(a(209)),o=n(a(30)),l=function(){a.e("components/mpvue-citypicker/mpvueCityPicker").then(function(){return resolve(a(1035))}.bind(null,a)).catch(a.oe)},r={components:{mpvueCityPicker:l,Upload:u.default},data:function(){return{loading:!0,table_id:0,name:"",tableData:[],province:[],city:[],area:[],is_load:!1,cityPickerValueDefault:[0,0,0],areaIndex:0,isupload:!1,uploadIndex:0}},onShow:function(){this.loading&&this.getData()},onLoad:function(e){this.table_id=e.table_id},methods:{getData:function(){var t=this;t.loading=!0,t._get("plus.table.table/add",{table_id:t.table_id},(function(a){t.loading=!1,t.tableData=a.data.model.tableData,t.tableData.forEach((function(e,a){t.$set(t.tableData[a],"value","")})),t.province=a.data.regionData[0],t.city=a.data.regionData[1],t.area=a.data.regionData[2],t.is_load=!0,t.name=a.data.model.name,e.setNavigationBarTitle({title:t.name})}))},getName:function(e){return e.split(",")},getRadioGroup:function(e,t){var a=this.tableData[e].value.split(",");return a.indexOf(t)},changeRadio:function(e,t){this.tableData[t].value=e.detail.value},changeRadioGroup:function(e,t){var a=[];""!=this.tableData[t].value&&(a=this.tableData[t].value.split(","));var n=a.indexOf(e);-1!=n?(a.splice(n,1),this.$set(this.tableData[t],"value",a.join(","))):(a.push(e),this.$set(this.tableData[t],"value",a.join(",")))},changeSelect:function(e,t){this.tableData[t].value=this.getName(this.tableData[t].select_value)[e.detail.value]},changeDate:function(e,t){this.tableData[t].value=e.detail.value},changeArea:function(e){this.areaIndex=e,this.$refs.mpvueCityPicker.show()},onConfirm:function(e){this.tableData[this.areaIndex].value=e.label,this.cityPickerValueDefault=[0,0,0],this.areaIndex=0},openUpload:function(e){this.uploadIndex=e,this.isupload=!0},getImgsFunc:function(e){null!=e&&e.length>0&&(this.tableData[this.uploadIndex].value=e[0].file_path),this.uploadIndex=0,this.isupload=!1},submit:function(){var t=this,a=!0,n="";if(this.tableData.forEach((function(e,t){if("false"!=e.is_required)switch(e.rule){case"mobile":o.default.isPoneAvailable(e.value)||(n="请输入正确的手机号",a=!1);break;case"idcard":o.default.isVail(e.value)||(n="请输入正确的身份证号码",a=!1);break;case"phone":o.default.isTelAvailable(e.value)||(n="请输入正确的座机或手机号",a=!1);break;case"email":o.default.isMail(e.value)||(n="请输入正确的电子邮箱",a=!1);break;case"number":o.default.isNum(e.value)||(n="请输入正确的数字",a=!1);break;case"no":""==e.value&&(n="必填项不能为空",a=!1);break}})),!a)return t.showError(n),!1;var u=(0,i.default)(t.tableData);u.forEach((function(e,t){"area"==e.type&&(e.value=e.value+e.address)})),u=JSON.stringify(u),t._post("plus.table.table/add",{tableData:u,table_id:t.table_id},(function(a){t.showSuccess("提交成功",(function(){e.navigateBack({delta:parseInt(1)})}))}))}}};t.default=r}).call(this,a(2)["default"])},754:function(e,t,a){"use strict";a.r(t);var n=a(755),i=a.n(n);for(var u in n)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(u);t["default"]=i.a},755:function(e,t,a){}},[[748,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/plus/table/table.js.map