(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plus/points/detail/popup/Spec"],{1056:function(t,o,s){"use strict";s.r(o);var i=s(1057),r=s(1059);for(var e in r)["default"].indexOf(e)<0&&function(t){s.d(o,t,(function(){return r[t]}))}(e);s(1062);var n,u=s(34),c=Object(u["default"])(r["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],n);c.options.__file="pages/plus/points/detail/popup/Spec.vue",o["default"]=c.exports},1057:function(t,o,s){"use strict";s.r(o);var i=s(1058);s.d(o,"render",(function(){return i["render"]})),s.d(o,"staticRenderFns",(function(){return i["staticRenderFns"]})),s.d(o,"recyclableRender",(function(){return i["recyclableRender"]})),s.d(o,"components",(function(){return i["components"]}))},1058:function(t,o,s){"use strict";var i;s.r(o),s.d(o,"render",(function(){return r})),s.d(o,"staticRenderFns",(function(){return n})),s.d(o,"recyclableRender",(function(){return e})),s.d(o,"components",(function(){return i}));var r=function(){var t=this,o=t.$createElement,s=(t._self._c,t.points_name());t.$mp.data=Object.assign({},{$root:{m0:s}})},e=!1,n=[];r._withStripped=!0},1059:function(t,o,s){"use strict";s.r(o);var i=s(1060),r=s.n(i);for(var e in i)["default"].indexOf(e)<0&&function(t){s.d(o,t,(function(){return i[t]}))}(e);o["default"]=r.a},1060:function(t,o,s){"use strict";(function(t){var i=s(4);Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r=i(s(13)),e=s(1061),n={data:function(){return{Visible:!1,form:{detail:{product_sku:{},show_sku:{},show_point_sku:{point_price:0}},show_sku:{sum:1}},stock:0,selectSpec:"",isAll:!1,is_change:!1}},props:["isPopup","productModel"],onLoad:function(){},mounted:function(){},computed:{isadd:function(){return this.form.show_sku.sum>=this.stock||this.form.show_sku.sum>=this.form.detail.limit_num},issub:function(){return this.form.show_sku.sum<=1}},watch:{isPopup:function(t,o){var s=this;t!=o&&(this.Visible=t,this.isOpenSpec||(this.form=this.productModel,this.isOpenSpec=!0,this.initShowSku(),this.form.specData.spec_attr.forEach((function(t,o){s.selectAttr(o,0)}))),this.form.type=this.productModel.type,console.log(this.productModel))},"form.specData":{handler:function(t,o){var s=this,i="",r="";if(this.isAll=!0,t){for(var e=function(o){null==s.form.productSpecArr[o]?(s.isAll=!1,i+=t.spec_attr[o].group_name+" "):t.spec_attr[o].spec_items.forEach((function(t){s.form.productSpecArr[o]==t.item_id&&(r+='"'+t.spec_value+'" ')}))},n=0;n<t.spec_attr.length;n++)e(n);this.isAll?r="已选: "+r:i="请选择: "+i}this.selectSpec=this.isAll?r:i},deep:!0,immediate:!0}},methods:{closePopup:function(){this.$emit("close",this.form.specData,null)},confirmFunc:function(){null==this.form.specData||this.isAll?this.createdOrder():t.showToast({title:"请选择规格",icon:"none",duration:2e3})},initShowSku:function(){this.form.show_sku.sku_image=this.form.detail.product.image[0].file_path,this.form.show_sku.point_price=this.form.detail.point_price,this.form.show_sku.product_sku_id=0,this.form.show_sku.line_price=this.form.detail.line_price,this.form.show_sku.point_stock=this.form.detail.stock,this.form.show_sku.point_product_sku_id=0,this.form.show_sku.point_num=this.form.detail.sku[0].point_num,this.form.show_sku.point_money=this.form.detail.sku[0].point_money,this.form.show_sku.product_sku_id=0,this.stock=this.form.detail.stock},selectAttr:function(t,o){var s=this,i=s.form.specData.spec_attr[t].spec_items,r=i[o];if(r.checked)r.checked=!1,s.form.productSpecArr[t]=null;else{for(var n=0;n<i.length;n++)i[n].checked=!1;r.checked=!0,s.form.productSpecArr[t]=r.item_id}(0,e.judgeSelect)(s.form.specData.spec_attr,t,s.form.productSpecArr,s.form.productSku);for(var u=!0,c=0;c<s.form.productSpecArr.length;c++){var p=s.form.productSpecArr[c];if(null==p)return u=!1,void s.initShowSku()}u?s.updateSpecProduct():s.initShowSku()},updateSpecProduct:function(){var t=this,o=t.form.productSpecArr.join("_"),s=t.form.specData.spec_list,i=s.find((function(t){return t.spec_sku_id==o}));if("object"===(0,r.default)(i)){var e=t.form.detail.sku,n=e.find((function(t){return t.product_sku_id==i.product_sku_id}));console.log(n),t.stock=n.point_stock,t.form.show_sku.sum>t.stock&&(t.form.show_sku.sum=t.stock>0?t.stock:1),t.form.show_sku.line_price=i.spec_form.product_price,t.form.show_sku.product_sku_id=i.spec_sku_id,t.form.show_sku.point_price=n.point_price,t.form.show_sku.point_product_sku_id=n.point_product_sku_id,t.form.show_sku.point_stock=n.point_stock,i.spec_form.image_id>0?t.form.show_sku.sku_image=i.spec_form.image_path:t.form.show_sku.sku_image=t.form.detail.product.image[0].file_path}},createdOrder:function(){var t=this,o=t.form.detail.point_product_id,s=t.form.show_sku.sum,i=t.form.show_sku.product_sku_id,r=t.form.show_sku.point_product_sku_id;t.gotoPage("/pages/order/confirm-order?product_num="+s+"&point_product_id="+o+"&product_sku_id="+i+"&point_product_sku_id="+r+"&order_type=points")},add:function(){if(!(this.stock<=0))return this.form.show_sku.sum>=this.stock?(t.showToast({title:"数量超过了库存",icon:"none",duration:2e3}),!1):this.form.show_sku.sum>=this.form.detail.limit_num?(t.showToast({title:"数量超过了限购数量",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum++},sub:function(){if(!(this.stock<=0))return this.form.show_sku.sum<2?(t.showToast({title:"商品数量至少为1",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum--}}};o.default=n}).call(this,s(2)["default"])},1062:function(t,o,s){"use strict";s.r(o);var i=s(1063),r=s.n(i);for(var e in i)["default"].indexOf(e)<0&&function(t){s.d(o,t,(function(){return i[t]}))}(e);o["default"]=r.a},1063:function(t,o,s){}}]);
//# sourceMappingURL=../../../../../../.sourcemap/mp-weixin/pages/plus/points/detail/popup/Spec.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/plus/points/detail/popup/Spec-create-component',
    {
        'pages/plus/points/detail/popup/Spec-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(1056))
        })
    },
    [['pages/plus/points/detail/popup/Spec-create-component']]
]);
