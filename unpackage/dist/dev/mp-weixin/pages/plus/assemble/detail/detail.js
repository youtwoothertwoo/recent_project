(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plus/assemble/detail/detail"],{437:function(e,t,i){"use strict";(function(e,t){var n=i(4);i(26);n(i(25));var s=n(i(438));e.__webpack_require_UNI_MP_PLUGIN__=i,t(s.default)}).call(this,i(1)["default"],i(2)["createPage"])},438:function(e,t,i){"use strict";i.r(t);var n=i(439),s=i(441);for(var a in s)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(a);i(443);var o,r=i(34),c=Object(r["default"])(s["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],o);c.options.__file="pages/plus/assemble/detail/detail.vue",t["default"]=c.exports},439:function(e,t,i){"use strict";i.r(t);var n=i(440);i.d(t,"render",(function(){return n["render"]})),i.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(t,"components",(function(){return n["components"]}))},440:function(e,t,i){"use strict";var n;i.r(t),i.d(t,"render",(function(){return s})),i.d(t,"staticRenderFns",(function(){return o})),i.d(t,"recyclableRender",(function(){return a})),i.d(t,"components",(function(){return n}));var s=function(){var e=this,t=e.$createElement;e._self._c},a=!1,o=[];s._withStripped=!0},441:function(e,t,i){"use strict";i.r(t);var n=i(442),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=s.a},442:function(e,t,i){"use strict";(function(e){var n=i(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(i(30)),a=function(){i.e("components/countdown/countdown").then(function(){return resolve(i(1064))}.bind(null,i)).catch(i.oe)},o=function(){i.e("components/mpservice/Mpservice").then(function(){return resolve(i(986))}.bind(null,i)).catch(i.oe)},r=function(){i.e("pages/plus/assemble/detail/popup/MoreBill").then(function(){return resolve(i(1078))}.bind(null,i)).catch(i.oe)},c=function(){Promise.all([i.e("common/vendor"),i.e("pages/plus/assemble/detail/popup/Spec")]).then(function(){return resolve(i(1085))}.bind(null,i)).catch(i.oe)},l=function(){i.e("pages/plus/assemble/detail/part/Bill").then(function(){return resolve(i(1092))}.bind(null,i)).catch(i.oe)},u=function(){i.e("components/guarantee").then(function(){return resolve(i(965))}.bind(null,i)).catch(i.oe)},d={components:{Spec:c,Countdown:a,Mpservice:o,Bill:l,MoreBill:r,guarantee:u},data:function(){return{from_type:10,phoneHeight:0,scrollviewHigh:0,loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,product_id:null,imagList:[],activeDetail:{},alreadyChioce:"",detail:{product_sku:{},show_sku:{assemble_price:"",product_sku_id:0,line_price:"",stock_num:0,sku_image:"",assemble_product_sku_id:0},show_point_sku:{}},bill:[],isPopup:!1,specData:null,productModel:{},assemble_product_id:0,countdownConfig:{startstamp:0,endstamp:0},isMpservice:!1,ismore:!1,assemble_bill_id:null,user_id:null,productSku:[],serverList:"",isguarantee:!1,shop_info:{},store_open:1}},onLoad:function(t){e.showLoading({title:"加载中"}),this.user_id=this.getUserId(),this.assemble_product_id=t.assemble_product_id,this.assemble_bill_id=t.assemble_bill_id},mounted:function(){this.init(),this.getData()},onHide:function(){},methods:{init:function(){var t=this;e.getSystemInfo({success:function(i){t.phoneHeight=i.windowHeight;var n=e.createSelectorQuery().select(".btns-wrap");n.boundingClientRect((function(e){var i=t.phoneHeight-e.height;i=t.phoneHeight,t.scrollviewHigh=i})).exec()}})},getData:function(){var t=this;t.loadding=!0,t._get("plus.assemble.product/detail",{assemble_product_id:t.assemble_product_id},(function(i){t.countdownConfig.startstamp=i.data.active.start_time,t.countdownConfig.endstamp=i.data.active.end_time,t.activeDetail=i.data.active,i.data.detail.product.content=s.default.format_content(i.data.detail.product.content),20==i.data.detail.product.spec_type&&t.initSpecData(i.data.detail.assembleSku,i.data.specData),t.store_open=i.data.store_open,t.detail=i.data.detail,t.shop_info=i.data.detail.supplier,t.bill=i.data.bill,t.getServer(),t.loadding=!1,e.hideLoading()}))},getServer:function(){var e=this,t=[];e.detail.server&&(e.detail.server.forEach((function(e,i){t.push(e.name)})),e.serverList=t.join("·"))},initSpecData:function(e,t){for(var i=this,n=0;n<e.length;n++){var s=e[n];if(s.productSku){var a=s.productSku.spec_sku_id.split("_").map(Number);this.productSku.push(a)}}for(var o in t.spec_attr)for(var r=0;r<t.spec_attr[o].spec_items.length;r++){var c=t.spec_attr[o].spec_items[r];this.hasSpec(c.item_id,o)?(c.checked=!1,c.disabled=!1):(t.spec_attr[o].spec_items.splice(r,1),r--)}this.specData=t,this.specData.spec_attr&&(this.specData.spec_attr.forEach((function(e){i.alreadyChioce+=e.group_name,i.alreadyChioce+=" / "})),this.alreadyChioce=this.alreadyChioce.replace(/(\s\/\s)$/gi,""))},hasSpec:function(e,t){for(var i=!1,n=0;n<this.productSku.length;n++){var s=this.productSku[n];if(s[t]==e){i=!0;break}}return i},openPopup:function(e){if(1==this.activeDetail.is_single&&"order"==e&&0==this.bill.length||0==this.activeDetail.is_single&&"order"==e||"order"!=e){"order"==e&&null==this.assemble_bill_id&&(this.assemble_bill_id=0);var t={specData:this.specData,detail:this.detail,productSpecArr:null!=this.specData?new Array(this.specData.spec_attr.length):[],show_sku:{sku_image:"",seckill_price:0,product_sku_id:0,line_price:0,seckill_stock:0,seckill_product_sku_id:0,assemble_bill_id:this.assemble_bill_id,sum:1},productSku:this.productSku,type:e};this.productModel=t,this.isPopup=!0}else this.ismore=!0},confirm:function(){this.$refs.countdown.clear()},closePopup:function(e,t){if(this.isPopup=!1,e&&e.spec_attr){this.alreadyChioce="";var i="已选：",n="";e.spec_attr.forEach((function(e){if(e.spec_items){for(var t="",s=0;s<e.spec_items.length;s++){var a=e.spec_items[s];if(a.checked){t=a.spec_value+" / ";break}}""!=t?i+=t:n+=e.group_name}})),""!=n?this.alreadyChioce=n:(i=i.replace(/(\s\/\s)$/gi,""),this.alreadyChioce=i)}t&&(this.cart_total_num=t)},openMaservice:function(){this.isMpservice=!0},closeMpservice:function(){this.isMpservice=!1},gotoProducntDetail:function(){this.$refs.countdown.clear(),this.gotoPage("/pages/product/detail/detail?product_id="+this.detail.product_id)},openMoreFunc:function(e){this.ismore=e},closeGuarantee:function(){this.isguarantee=!1},showGuarantee:function(){this.isguarantee=!0},gobillFunc:function(e){this.$refs.countdown.clear(),this.ismore=!1;for(var t=0;t<e.billUser.length;t++){var i=e.billUser[t];if(this.user_id===i.user_id)return void this.gotoPage("/pages/plus/assemble/fight-group-detail/fight-group-detail?assemble_bill_id="+e.assemble_bill_id)}this.assemble_bill_id=e.assemble_bill_id,this.openPopup()},returnValFunc:function(e){},goto_shop:function(){var e=this;e.gotoPage("/pages/shop/shop?shop_supplier_id="+e.detail.supplier.shop_supplier_id)}},destroyed:function(){}};t.default=d}).call(this,i(2)["default"])},443:function(e,t,i){"use strict";i.r(t);var n=i(444),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=s.a},444:function(e,t,i){}},[[437,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/pages/plus/assemble/detail/detail.js.map