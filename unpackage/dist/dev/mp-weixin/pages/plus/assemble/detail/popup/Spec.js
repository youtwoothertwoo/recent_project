(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plus/assemble/detail/popup/Spec"],{1085:function(t,s,e){"use strict";e.r(s);var o=e(1086),r=e(1088);for(var i in r)["default"].indexOf(i)<0&&function(t){e.d(s,t,(function(){return r[t]}))}(i);e(1090);var u,c=e(34),n=Object(c["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],u);n.options.__file="pages/plus/assemble/detail/popup/Spec.vue",s["default"]=n.exports},1086:function(t,s,e){"use strict";e.r(s);var o=e(1087);e.d(s,"render",(function(){return o["render"]})),e.d(s,"staticRenderFns",(function(){return o["staticRenderFns"]})),e.d(s,"recyclableRender",(function(){return o["recyclableRender"]})),e.d(s,"components",(function(){return o["components"]}))},1087:function(t,s,e){"use strict";var o;e.r(s),e.d(s,"render",(function(){return r})),e.d(s,"staticRenderFns",(function(){return u})),e.d(s,"recyclableRender",(function(){return i})),e.d(s,"components",(function(){return o}));var r=function(){var t=this,s=t.$createElement;t._self._c},i=!1,u=[];r._withStripped=!0},1088:function(t,s,e){"use strict";e.r(s);var o=e(1089),r=e.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){e.d(s,t,(function(){return o[t]}))}(i);s["default"]=r.a},1089:function(t,s,e){"use strict";(function(t){var o=e(4);Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=o(e(13)),i=e(1061),u={data:function(){return{Visible:!1,form:{detail:{product_sku:{},show_sku:{},show_point_sku:{assemble_price:0}},show_sku:{sum:1}},stock:0,selectSpec:"",isAll:!1}},props:["isPopup","productModel"],onLoad:function(){},mounted:function(){},computed:{isadd:function(){return this.form.show_sku.sum>=this.stock||this.form.show_sku.sum>=this.form.detail.limit_num},issub:function(){return this.form.show_sku.sum<=1}},watch:{isPopup:function(t,s){var e=this;t!=s&&(this.Visible=t,this.isOpenSpec||(this.form=this.productModel,this.isOpenSpec=!0,this.initShowSku(),this.form.specData.spec_attr.forEach((function(t,s){e.selectAttr(s,0)}))),this.form.type=this.productModel.type)},"form.specData":{handler:function(t,s){var e=this,o="",r="";if(this.isAll=!0,t){for(var i=function(s){null==e.form.productSpecArr[s]?(e.isAll=!1,o+=t.spec_attr[s].group_name+" "):t.spec_attr[s].spec_items.forEach((function(t){e.form.productSpecArr[s]==t.item_id&&(r+='"'+t.spec_value+'" ')}))},u=0;u<t.spec_attr.length;u++)i(u);this.isAll?r="已选: "+r:o="请选择: "+o}this.selectSpec=this.isAll?r:o},deep:!0,immediate:!0}},methods:{closePopup:function(){this.$emit("close",this.form.specData,null)},confirmFunc:function(){null==this.form.specData||this.isAll?(this.$emit("confirm"),this.createdOrder()):t.showToast({title:"请选择规格",icon:"none",duration:2e3})},initShowSku:function(){this.form.show_sku.sku_image=this.form.detail.product.image[0].file_path,this.form.show_sku.assemble_price=this.form.detail.assemble_price,this.form.show_sku.product_sku_id=0,this.form.show_sku.line_price=this.form.detail.line_price,this.form.show_sku.assemble_stock=this.form.detail.stock,this.form.show_sku.assemble_product_sku_id=0,this.form.show_sku.sum=1,this.stock=this.form.detail.stock,console.log(this.form.specData.spec_attr)},selectAttr:function(t,s){var e=this,o=e.form.specData.spec_attr[t].spec_items,r=o[s];if(r.checked)r.checked=!1,e.form.productSpecArr[t]=null;else{for(var u=0;u<o.length;u++)o[u].checked=!1;r.checked=!0,e.form.productSpecArr[t]=r.item_id}(0,i.judgeSelect)(e.form.specData.spec_attr,t,e.form.productSpecArr,e.form.productSku);for(var c=!0,n=0;n<e.form.productSpecArr.length;n++){var a=e.form.productSpecArr[n];if(null==a)return c=!1,void e.initShowSku()}c?e.updateSpecProduct():e.initShowSku()},updateSpecProduct:function(){var t=this,s=t.form.productSpecArr.join("_"),e=t.form.specData.spec_list,o=e.find((function(t){return t.spec_sku_id==s}));if("object"===(0,r.default)(o)){var i=t.form.detail.assembleSku,u=i.find((function(t){return t.product_sku_id==o.product_sku_id}));t.stock=u.assemble_stock,t.form.show_sku.sum>t.stock&&(t.form.show_sku.sum=t.stock>0?t.stock:1),t.form.show_sku.product_sku_id=o.spec_sku_id,t.form.show_sku.assemble_price=u.assemble_price,t.form.show_sku.line_price=o.spec_form.product_price,t.form.show_sku.assemble_stock=u.assemble_stock,t.form.show_sku.assemble_product_sku_id=u.assemble_product_sku_id,o.spec_form.image_id>0?t.form.show_sku.sku_image=o.spec_form.image_path:t.form.show_sku.sku_image=t.form.detail.product.image[0].file_path}},createdOrder:function(){var t=this,s=t.form.detail.assemble_product_id,e=t.form.show_sku.sum,o=t.form.show_sku.product_sku_id,r=t.form.show_sku.assemble_product_sku_id;t.gotoPage("/pages/order/confirm-order?product_num="+e+"&assemble_product_id="+s+"&product_sku_id="+o+"&assemble_product_sku_id="+r+"&assemble_bill_id="+t.form.show_sku.assemble_bill_id+"&order_type=assemble")},add:function(){if(!(this.stock<=0))return this.form.show_sku.sum>=this.stock?(t.showToast({title:"数量超过了库存",icon:"none",duration:2e3}),!1):this.form.show_sku.sum>=this.form.detail.limit_num?(t.showToast({title:"数量超过了限购数量",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum++},sub:function(){if(!(this.stock<=0))return this.form.show_sku.sum<2?(t.showToast({title:"商品数量至少为1",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum--}}};s.default=u}).call(this,e(2)["default"])},1090:function(t,s,e){"use strict";e.r(s);var o=e(1091),r=e.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){e.d(s,t,(function(){return o[t]}))}(i);s["default"]=r.a},1091:function(t,s,e){}}]);
//# sourceMappingURL=../../../../../../.sourcemap/mp-weixin/pages/plus/assemble/detail/popup/Spec.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/plus/assemble/detail/popup/Spec-create-component',
    {
        'pages/plus/assemble/detail/popup/Spec-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(1085))
        })
    },
    [['pages/plus/assemble/detail/popup/Spec-create-component']]
]);
