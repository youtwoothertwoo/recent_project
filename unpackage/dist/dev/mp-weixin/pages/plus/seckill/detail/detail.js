(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plus/seckill/detail/detail"],{421:function(e,t,n){"use strict";(function(e,t){var i=n(4);n(26);i(n(25));var c=i(n(422));e.__webpack_require_UNI_MP_PLUGIN__=n,t(c.default)}).call(this,n(1)["default"],n(2)["createPage"])},422:function(e,t,n){"use strict";n.r(t);var i=n(423),c=n(425);for(var r in c)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return c[e]}))}(r);n(427);var o,a=n(34),s=Object(a["default"])(c["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],o);s.options.__file="pages/plus/seckill/detail/detail.vue",t["default"]=s.exports},423:function(e,t,n){"use strict";n.r(t);var i=n(424);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},424:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return c})),n.d(t,"staticRenderFns",(function(){return o})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));var c=function(){var e=this,t=e.$createElement;e._self._c},r=!1,o=[];c._withStripped=!0},425:function(e,t,n){"use strict";n.r(t);var i=n(426),c=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=c.a},426:function(e,t,n){"use strict";(function(e){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=i(n(30)),r=function(){Promise.all([n.e("common/vendor"),n.e("pages/plus/seckill/detail/popup/Spec")]).then(function(){return resolve(n(1071))}.bind(null,n)).catch(n.oe)},o=function(){n.e("components/countdown/countdown").then(function(){return resolve(n(1064))}.bind(null,n)).catch(n.oe)},a=function(){n.e("components/mpservice/Mpservice").then(function(){return resolve(n(986))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/guarantee").then(function(){return resolve(n(965))}.bind(null,n)).catch(n.oe)},u={components:{Spec:r,Countdown:o,Mpservice:a,guarantee:s},data:function(){return{phoneHeight:0,scrollviewHigh:0,loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,seckill_product_id:null,detail:{product_sku:{},show_sku:{seckill_price:"",product_sku_id:0,line_price:"",stock_num:0,sku_image:"",seckill_product_sku_id:0},show_point_sku:{}},alreadyChioce:"",isPopup:!1,countdownConfig:{startstamp:0,endstamp:0},specData:null,productModel:{},productSku:[],isMpservice:!1,cart_total_num:0,serverList:"",isguarantee:!1,shop_info:{},store_open:1}},onLoad:function(e){this.seckill_product_id=e.seckill_product_id},mounted:function(){this.init(),this.getData()},methods:{init:function(){var t=this;e.getSystemInfo({success:function(n){t.phoneHeight=n.windowHeight;var i=e.createSelectorQuery().select(".btns-wrap");i.boundingClientRect((function(e){var n=t.phoneHeight-e.height;t.scrollviewHigh=n})).exec()}})},getData:function(){var t=this;e.showLoading({title:"加载中"}),t._get("plus.seckill.product/detail",{seckill_product_id:t.seckill_product_id},(function(n){t.countdownConfig.endstamp=n.data.active.end_time,t.countdownConfig.startstamp=n.data.active.start_time,n.data.detail.product.content=c.default.format_content(n.data.detail.product.content),20==n.data.detail.product.spec_type&&t.initSpecData(n.data.detail.seckillSku,n.data.specData),t.store_open=n.data.store_open,t.detail=n.data.detail,t.shop_info=n.data.detail.supplier,t.getServer(),t.loadding=!1,e.hideLoading()}))},getServer:function(){var e=this,t=[];e.detail.server&&(e.detail.server.forEach((function(e,n){t.push(e.name)})),e.serverList=t.join("·"))},closeGuarantee:function(){this.isguarantee=!1},showGuarantee:function(){this.isguarantee=!0},initSpecData:function(e,t){for(var n=this,i=0;i<e.length;i++){var c=e[i];if(c.productSku){var r=c.productSku.spec_sku_id.split("_").map(Number);this.productSku.push(r)}}for(var o in t.spec_attr)for(var a=0;a<t.spec_attr[o].spec_items.length;a++){var s=t.spec_attr[o].spec_items[a];this.hasSpec(s.item_id,o)?(s.checked=!1,s.disabled=!1):(t.spec_attr[o].spec_items.splice(a,1),a--)}this.specData=t,this.specData.spec_attr&&(this.specData.spec_attr.forEach((function(e){n.alreadyChioce+=e.group_name,n.alreadyChioce+=" / "})),this.alreadyChioce=this.alreadyChioce.replace(/(\s\/\s)$/gi,""))},hasSpec:function(e,t){for(var n=!1,i=0;i<this.productSku.length;i++){var c=this.productSku[i];if(c[t]==e){n=!0;break}}return n},openPopup:function(e){var t={specData:this.specData,detail:this.detail,productSpecArr:null!=this.specData?new Array(this.specData.spec_attr.length):[],show_sku:{sku_image:"",seckill_price:0,product_sku_id:0,line_price:0,seckill_stock:0,seckill_product_sku_id:0,sum:1},productSku:this.productSku,type:e};this.productModel=t,this.isPopup=!0},closePopup:function(e,t){if(this.isPopup=!1,e&&e.spec_attr){this.alreadyChioce="";var n="已选：",i="";e.spec_attr.forEach((function(e){if(e.spec_items){for(var t="",c=0;c<e.spec_items.length;c++){var r=e.spec_items[c];if(r.checked){t=r.spec_value+" / ";break}}""!=t?n+=t:i+=e.group_name}})),""!=i?this.alreadyChioce=i:(n=n.replace(/(\s\/\s)$/gi,""),this.alreadyChioce=n)}t&&(this.cart_total_num=t)},confirm:function(){this.$refs.countdown.clear()},openMaservice:function(){this.isMpservice=!0},closeMpservice:function(){this.isMpservice=!1},goto_shop:function(){var e=this;e.gotoPage("/pages/shop/shop?shop_supplier_id="+e.detail.supplier.shop_supplier_id)},returnValFunc:function(e){}}};t.default=u}).call(this,n(2)["default"])},427:function(e,t,n){"use strict";n.r(t);var i=n(428),c=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=c.a},428:function(e,t,n){}},[[421,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/pages/plus/seckill/detail/detail.js.map