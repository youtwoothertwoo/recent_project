(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plus/bargain/detail/detail"],{461:function(e,t,n){"use strict";(function(e,t){var i=n(4);n(26);i(n(25));var o=i(n(462));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},462:function(e,t,n){"use strict";n.r(t);var i=n(463),o=n(465);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n(467);var r,c=n(34),s=Object(c["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],r);s.options.__file="pages/plus/bargain/detail/detail.vue",t["default"]=s.exports},463:function(e,t,n){"use strict";n.r(t);var i=n(464);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},464:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return r})),n.d(t,"recyclableRender",(function(){return a})),n.d(t,"components",(function(){return i}));try{i={countdown:function(){return n.e("components/countdown/countdown").then(n.bind(null,1064))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,t=e.$createElement;e._self._c},a=!1,r=[];o._withStripped=!0},465:function(e,t,n){"use strict";n.r(t);var i=n(466),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},466:function(e,t,n){"use strict";(function(e){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(30)),a=function(){n.e("components/countdown/countdown").then(function(){return resolve(n(1064))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/mpservice/Mpservice").then(function(){return resolve(n(986))}.bind(null,n)).catch(n.oe)},c=function(){Promise.all([n.e("common/vendor"),n.e("pages/plus/bargain/detail/popup/Spec")]).then(function(){return resolve(n(1099))}.bind(null,n)).catch(n.oe)},s=function(){n.e("pages/plus/bargain/detail/popup/Rule").then(function(){return resolve(n(1106))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/guarantee").then(function(){return resolve(n(965))}.bind(null,n)).catch(n.oe)},d={components:{Spec:c,Rule:s,countdown:a,Mpservice:r,guarantee:u},data:function(){return{phoneHeight:0,scrollviewHigh:0,loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,countdownConfig:{title:"",startstamp:0,endstamp:0},detail:{product_sku:{},show_sku:{product_price:"",product_sku_id:0,line_price:"",stock_num:0,sku_image:""},show_point_sku:{}},alreadyChioce:"",setting:{},isPopup:!1,specData:null,productModel:{},productSpecArr:[],isRule:!1,productSku:[],isMpservice:!1,serverList:"",isguarantee:!1,shop_info:{},store_open:1}},onLoad:function(t){e.showLoading({title:"加载中"}),this.type_active=0,this.bargain_product_id=t.bargain_product_id},mounted:function(){this.init(),this.getData()},methods:{init:function(){var t=this;e.getSystemInfo({success:function(n){t.phoneHeight=n.windowHeight;var i=e.createSelectorQuery().select(".btns-wrap");i.boundingClientRect((function(e){var n=t.phoneHeight-e.height;t.scrollviewHigh=n})).exec()}})},getData:function(){var t=this,n=t.bargain_product_id;t._get("plus.bargain.product/detail",{bargain_product_id:n,url:""},(function(n){t.countdownConfig.startstamp=n.data.active.start_time,t.countdownConfig.endstamp=n.data.active.end_time,n.data.detail.product.content=o.default.format_content(n.data.detail.product.content),20==n.data.detail.product.spec_type&&t.initSpecData(n.data.detail.bargainSku,n.data.specData),t.store_open=n.data.store_open,t.setting=n.data.setting,t.detail=n.data.detail,t.shop_info=n.data.detail.supplier,t.getServer(),t.loadding=!1,e.hideLoading()}))},confirm:function(){this.$refs.countdown.clear()},getServer:function(){var e=this,t=[];e.detail.server&&(e.detail.server.forEach((function(e,n){t.push(e.name)})),e.serverList=t.join("·"))},closeGuarantee:function(){this.isguarantee=!1},showGuarantee:function(){this.isguarantee=!0},initSpecData:function(e,t){for(var n=this,i=0;i<e.length;i++){var o=e[i];if(o.productSku){var a=o.productSku.spec_sku_id.split("_").map(Number);this.productSku.push(a)}}for(var r in t.spec_attr)for(var c=0;c<t.spec_attr[r].spec_items.length;c++){var s=t.spec_attr[r].spec_items[c];this.hasSpec(s.item_id,r)?(s.checked=!1,s.disabled=!1):(t.spec_attr[r].spec_items.splice(c,1),c--)}this.specData=t,this.specData.spec_attr&&(this.specData.spec_attr.forEach((function(e){n.alreadyChioce+=e.group_name,n.alreadyChioce+=" / "})),this.alreadyChioce=this.alreadyChioce.replace(/(\s\/\s)$/gi,""))},hasSpec:function(e,t){for(var n=!1,i=0;i<this.productSku.length;i++){var o=this.productSku[i];if(o[t]==e){n=!0;break}}return n},openPopup:function(e){var t={specData:this.specData,detail:this.detail,productSpecArr:null!=this.specData?new Array(this.specData.spec_attr.length):[],show_sku:{sku_image:"",bargain_price:0,product_sku_id:0,line_price:0,bargain_stock:0,bargain_product_sku_id:0,sum:1},productSku:this.productSku,type:e};this.productModel=t,this.isPopup=!0},closePopup:function(e,t){if(this.isPopup=!1,e&&e.spec_attr){this.alreadyChioce="";var n="已选：",i="";e.spec_attr.forEach((function(e){if(e.spec_items){for(var t="",o=0;o<e.spec_items.length;o++){var a=e.spec_items[o];if(a.checked){t=a.spec_value+" / ";break}}""!=t?n+=t:i+=e.group_name}})),""!=i?this.alreadyChioce=i:(n=n.replace(/(\s\/\s)$/gi,""),this.alreadyChioce=n)}t&&(this.cart_total_num=t)},openMaservice:function(){this.isMpservice=!0},closeMpservice:function(){this.isMpservice=!1},gotoProducntDetail:function(){this.gotoPage("/pages/product/detail/detail?product_id="+this.detail.product_id)},openRule:function(){this.isRule=!0},closeRule:function(){this.isRule=!1},returnValFunc:function(){},goto_shop:function(){var e=this;e.gotoPage("/pages/shop/shop?shop_supplier_id="+e.detail.supplier.shop_supplier_id)}}};t.default=d}).call(this,n(2)["default"])},467:function(e,t,n){"use strict";n.r(t);var i=n(468),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},468:function(e,t,n){}},[[461,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/pages/plus/bargain/detail/detail.js.map