(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plus/bargain/detail/popup/Spec"],{1099:function(t,i,r){"use strict";r.r(i);var o=r(1100),s=r(1102);for(var e in s)["default"].indexOf(e)<0&&function(t){r.d(i,t,(function(){return s[t]}))}(e);r(1104);var n,u=r(34),c=Object(u["default"])(s["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],n);c.options.__file="pages/plus/bargain/detail/popup/Spec.vue",i["default"]=c.exports},1100:function(t,i,r){"use strict";r.r(i);var o=r(1101);r.d(i,"render",(function(){return o["render"]})),r.d(i,"staticRenderFns",(function(){return o["staticRenderFns"]})),r.d(i,"recyclableRender",(function(){return o["recyclableRender"]})),r.d(i,"components",(function(){return o["components"]}))},1101:function(t,i,r){"use strict";var o;r.r(i),r.d(i,"render",(function(){return s})),r.d(i,"staticRenderFns",(function(){return n})),r.d(i,"recyclableRender",(function(){return e})),r.d(i,"components",(function(){return o}));var s=function(){var t=this,i=t.$createElement;t._self._c},e=!1,n=[];s._withStripped=!0},1102:function(t,i,r){"use strict";r.r(i);var o=r(1103),s=r.n(o);for(var e in o)["default"].indexOf(e)<0&&function(t){r.d(i,t,(function(){return o[t]}))}(e);i["default"]=s.a},1103:function(t,i,r){"use strict";(function(t){var o=r(4);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=o(r(13)),e=r(1061),n={data:function(){return{Visible:!1,form:{detail:{product_sku:{},show_sku:{},show_point_sku:{bargain_price:0}},show_sku:{sum:1}},stock:0,selectSpec:"",isAll:!1}},props:["isPopup","productModel"],onLoad:function(){},mounted:function(){},computed:{isadd:function(){return this.form.show_sku.sum>=this.stock||this.form.show_sku.sum>=this.form.detail.limit_num},issub:function(){return this.form.show_sku.sum<=1}},watch:{isPopup:function(t,i){var r=this;t!=i&&(this.Visible=t,this.isOpenSpec||(this.form=this.productModel,this.isOpenSpec=!0,this.initShowSku(),this.form.specData.spec_attr.forEach((function(t,i){r.selectAttr(i,0)}))),this.form.type=this.productModel.type)},"form.specData":{handler:function(t,i){var r=this,o="",s="";if(this.isAll=!0,t){for(var e=function(i){null==r.form.productSpecArr[i]?(r.isAll=!1,o+=t.spec_attr[i].group_name+" "):t.spec_attr[i].spec_items.forEach((function(t){r.form.productSpecArr[i]==t.item_id&&(s+='"'+t.spec_value+'" ')}))},n=0;n<t.spec_attr.length;n++)e(n);this.isAll?s="已选: "+s:o="请选择: "+o}this.selectSpec=this.isAll?s:o},deep:!0,immediate:!0}},methods:{closePopup:function(){this.$emit("close",this.form.specData,null)},confirmFunc:function(){null==this.form.specData||this.isAll?this.createdOrder():t.showToast({title:"请选择规格",icon:"none",duration:2e3})},initShowSku:function(){this.form.show_sku.sku_image=this.form.detail.product.image[0].file_path,this.form.show_sku.bargain_price=this.form.detail.bargain_price,this.form.show_sku.product_sku_id=0,this.form.show_sku.line_price=this.form.detail.line_price,this.form.show_sku.bargain_stock=this.form.detail.stock,this.form.show_sku.bargain_product_sku_id=this.form.detail.bargainSku[0].bargain_product_sku_id,this.form.show_sku.sum=1,this.stock=this.form.detail.stock},selectAttr:function(t,i){var r=this,o=r.form.specData.spec_attr[t].spec_items,s=o[i];if(s.checked)s.checked=!1,r.form.productSpecArr[t]=null;else{for(var n=0;n<o.length;n++)o[n].checked=!1;s.checked=!0,r.form.productSpecArr[t]=s.item_id}(0,e.judgeSelect)(r.form.specData.spec_attr,t,r.form.productSpecArr,r.form.productSku);for(var u=!0,c=0;c<r.form.productSpecArr.length;c++){var a=r.form.productSpecArr[c];if(null==a)return u=!1,void r.initShowSku()}u?r.updateSpecProduct():r.initShowSku()},updateSpecProduct:function(){var t=this,i=t.form.productSpecArr.join("_"),r=t.form.specData.spec_list,o=r.find((function(t){return t.spec_sku_id==i}));if("object"===(0,s.default)(o)){var e=t.form.detail.bargainSku,n=e.find((function(t){return t.product_sku_id==o.product_sku_id}));t.stock=n.bargain_stock,t.form.show_sku.sum>t.stock&&(t.form.show_sku.sum=t.stock>0?t.stock:1),t.form.show_sku.product_sku_id=o.spec_sku_id,t.form.show_sku.bargain_price=n.bargain_price,t.form.show_sku.line_price=o.spec_form.product_price,t.form.show_sku.bargain_stock=n.bargain_stock,t.form.show_sku.bargain_product_sku_id=n.bargain_product_sku_id,o.spec_form.image_id>0?t.form.show_sku.sku_image=o.spec_form.image_path:t.form.show_sku.sku_image=t.form.detail.product.image[0].file_path}},createdOrder:function(){var t=this,i=t.form.detail.bargain_activity_id,r=t.form.detail.bargain_product_id,o=t.form.show_sku.bargain_product_sku_id,s=t.form.show_sku.product_sku_id;t.form.detail.product_id;t._get("plus.bargain.task/add",{bargain_activity_id:i,bargain_product_id:r,bargain_product_sku_id:o,product_sku_id:s},(function(i){t.$emit("confirm");var r=i.data.bargain_task_id;t.gotoPage("/pages/plus/bargain/haggle/haggle?bargain_task_id="+r+"&order_type=bargain")}))},add:function(){if(!(this.stock<=0))return this.form.show_sku.sum>=this.stock?(t.showToast({title:"数量超过了库存",icon:"none",duration:2e3}),!1):this.form.show_sku.sum>=this.form.detail.limit_num?(t.showToast({title:"数量超过了限购数量",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum++},sub:function(){if(!(this.stock<=0))return this.form.show_sku.sum<2?(t.showToast({title:"商品数量至少为1",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum--}}};i.default=n}).call(this,r(2)["default"])},1104:function(t,i,r){"use strict";r.r(i);var o=r(1105),s=r.n(o);for(var e in o)["default"].indexOf(e)<0&&function(t){r.d(i,t,(function(){return o[t]}))}(e);i["default"]=s.a},1105:function(t,i,r){}}]);
//# sourceMappingURL=../../../../../../.sourcemap/mp-weixin/pages/plus/bargain/detail/popup/Spec.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/plus/bargain/detail/popup/Spec-create-component',
    {
        'pages/plus/bargain/detail/popup/Spec-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(1099))
        })
    },
    [['pages/plus/bargain/detail/popup/Spec-create-component']]
]);
