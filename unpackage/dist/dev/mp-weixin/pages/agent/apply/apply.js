(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/agent/apply/apply"],{287:function(e,t,i){"use strict";(function(e,t){var n=i(4);i(26);n(i(25));var o=n(i(288));e.__webpack_require_UNI_MP_PLUGIN__=i,t(o.default)}).call(this,i(1)["default"],i(2)["createPage"])},288:function(e,t,i){"use strict";i.r(t);var n=i(289),o=i(291);for(var a in o)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return o[e]}))}(a);i(293);var r,s=i(34),c=Object(s["default"])(o["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],r);c.options.__file="pages/agent/apply/apply.vue",t["default"]=c.exports},289:function(e,t,i){"use strict";i.r(t);var n=i(290);i.d(t,"render",(function(){return n["render"]})),i.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(t,"components",(function(){return n["components"]}))},290:function(e,t,i){"use strict";var n;i.r(t),i.d(t,"render",(function(){return o})),i.d(t,"staticRenderFns",(function(){return r})),i.d(t,"recyclableRender",(function(){return a})),i.d(t,"components",(function(){return n}));var o=function(){var e=this,t=e.$createElement,i=(e._self._c,e.is_applying||"1"!=e.current&&"2"!=e.current?null:e.id_card_front.length),n=e.is_applying||"1"!=e.current&&"2"!=e.current?null:e.id_card_back.length,o=e.is_applying||"1"!=e.current&&"2"!=e.current?null:e.file_id.length;e._isMounted||(e.e0=function(t){e.isPopup=!0},e.e1=function(t){e.isPopup=!1}),e.$mp.data=Object.assign({},{$root:{g0:i,g1:n,g2:o}})},a=!1,r=[];o._withStripped=!0},291:function(e,t,i){"use strict";i.r(t);var n=i(292),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},292:function(e,t,i){"use strict";(function(e){var n=i(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(i(18)),a=function(){i.e("components/uni-popup").then(function(){return resolve(i(115))}.bind(null,i)).catch(i.oe)},r=function(){i.e("components/mpvue-citypicker/mpvueCityPicker").then(function(){return resolve(i(1035))}.bind(null,i)).catch(i.oe)},s={components:{Popup:a,mpvueCityPicker:r},data:function(){return{cityPickerValueDefault:[0,0,0],selectCity:"选择省,市,区",selectStore:"选择门店位置",isPopup:!1,is_read:!1,agreement:"",is_applying:!1,is_load:!1,referee_name:"",address_id:2,province_id:0,city_id:0,region_id:0,words:{},is_agent:"",top_background:"",temlIds:[],imageList:[],id_card_front:[],id_card_back:[],file_id:[],province:[],city:[],area:[],items:[{value:1,name:"区县"},{value:2,name:"店中店"},{value:3,name:"星级会员"},{value:4,name:"会员"}],current:"1",longitude:0,latitude:0}},mounted:function(){this.getData(),this.getData1()},methods:{getData:function(){var t=this;e.showLoading({title:"加载中"}),t._get("user.agent/apply",{platform:t.getPlatform(),referee_id:e.getStorageSync("referee_id")},(function(i){e.hideLoading(),t.top_background=i.data.background,t.is_applying=i.data.is_applying,t.referee_name=null!=i.data.referee_name?i.data.referee_name:"平台",t.is_agent=i.data.is_agent,t.words=i.data.words,t.temlIds=i.data.template_arr,t.agreement=i.data.license,e.setNavigationBarTitle({title:t.words.apply.title.value}),t.is_agent&&e.navigateBack({})}))},getData1:function(){var e=this,t=e.address_id;e._get("user.address/detail",{address_id:t},(function(t){e.address=t.data.detail,e.address_id=t.data.detail.address_id,e.region=t.data.region;e.region.forEach((function(e){e}));e.province=t.data.regionData[0],e.city=t.data.regionData[1],e.area=t.data.regionData[2],e.is_load=!0}))},radioChange:function(e){this.current=e.target.value},showMulLinkageThreePicker:function(){this.$refs.mpvueCityPicker.show()},chooseImage:function(t){var i=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){i.uploadFile(e.tempFilePaths[0],t)},fail:function(t){console.log("选择失败：",t),e.showToast({title:"选择图片失败",icon:"none"})}})},uploadFile:function(t,i){e.showLoading({title:"上传中"});var n={token:e.getStorageSync("token"),app_id:this.getAppId()},a=this;e.uploadFile({url:a.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:n,success:function(e){var t=JSON.parse(e.data);"id_card_front"===i?a.id_card_front.push(t.data.file_path):"id_card_back"===i?a.id_card_back.push(t.data.file_path):"file_id"===i?a.file_id.push(t.data.file_path):a.imageList=[].concat((0,o.default)(a.imageList),[t.data.file_path])},complete:function(){e.hideLoading()}})},previewImage:function(t){"id_card_front"===t?e.previewImage({urls:this.id_card_front,current:0}):"id_card_back"===t?e.previewImage({urls:this.id_card_back,current:0}):"file_id"===t?e.previewImage({urls:this.file_id,current:0}):e.previewImage({urls:this.imageList,current:t})},deleteImage:function(e){"id_card_front"===e?this.id_card_front.splice(0,1):"id_card_back"===e?this.id_card_back.splice(0,1):"file_id"===e?this.file_id.splice(0,1):this.imageList.splice(e,1)},handleLocation:function(){var t=this;e.chooseLocation({success:function(e){console.log("位置选择成功：",e),t.selectStore=e.address,t.longitude=e.longitude,t.latitude=e.latitude},fail:function(t){console.log("位置选择失败：",t),e.showToast({title:"位置选择失败",icon:"none"})}})},formSubmit:function(t){var i=t.detail.value;i.referee_id=e.getStorageSync("referee_id"),i.store_photos=this.imageList,i.province_id=this.province_id,i.city_id=this.city_id,i.region_id=this.region_id,i.id_card_front=this.id_card_front[0],i.id_card_back=this.id_card_back[0],i.agent_level=this.current,i.file_id=this.file_id[0],i.longitude=this.longitude,i.latitude=this.latitude,console.log(i);var n=this;if(""!=i.name)if(""!=i.mobile.length)if(/^1(3|4|5|6|7|8|9)\d{9}$/.test(i.mobile)){if("1"==this.current||"2"==this.current){if(""==i.longitude)return void e.showToast({title:"请选择门店位置！",icon:"none"});if(""==i.longitude)return void e.showToast({title:"请选择门店位置！",icon:"none"});if(""==i.longitude)return void e.showToast({title:"请选择门店位置！",icon:"none"});if(0==i.province_id)return void e.showToast({title:"请选择所在地区！",icon:"none"});if(0==i.store_address)return void e.showToast({title:"请输入详细地址！",icon:"none"});if(0==i.business_license)return void e.showToast({title:"请输入执照编号！",icon:"none"});if(0==i.store_photos.length)return void e.showToast({title:"请上传店铺照片！",icon:"none"});if(!i.id_card_front)return void e.showToast({title:"请上传身份证正面照！",icon:"none"});if(!i.id_card_back)return void e.showToast({title:"请上传身份证反面照！",icon:"none"});if(!i.file_id)return void e.showToast({title:"请上传门店logo！",icon:"none"});if(0==i.contract_content)return void e.showToast({title:"请输入合同内容！",icon:"none"});if(0==i.user_signature)return void e.showToast({title:"请输入签名！",icon:"none"});if(0==i.agent_region)return void e.showToast({title:"请输入代理区域！",icon:"none"});if(0==i.store_name)return void e.showToast({title:"请输入店名！",icon:"none"});if(0==i.shop_hours)return void e.showToast({title:"请输入营业时间！",icon:"none"})}if(n.is_read){var o=function(){e.showLoading({title:"正在提交",mask:!0}),n._post("plus.agent.apply/submit",i,(function(t){e.hideLoading(),e.showToast({title:"申请成功"}),n.getData()}))};n.subMessage(n.temlIds,o)}else e.showToast({title:"请同意协议！",icon:"none"})}else e.showToast({title:"手机有误,请重填！",icon:"none"});else e.showToast({title:"请输入手机号！",icon:"none"});else e.showToast({title:"请输入姓名！",icon:"none"})},gotoShop:function(){e.switchTab({url:"/pages/index/index"})},changeFunc:function(e){e.target.value.length>0?this.is_read=!0:this.is_read=!1},onConfirm:function(e){console.log(e);var t={province_id:e.cityCode[0],city_id:e.cityCode[1],region_id:e.cityCode[2]};this._post("plus.agent.apply/check",t,(function(e){})),this.region=e.label.split(","),this.selectCity=e.label,this.province_id=e.cityCode[0],this.city_id=e.cityCode[1],this.region_id=e.cityCode[2]}}};t.default=s}).call(this,i(2)["default"])},293:function(e,t,i){"use strict";i.r(t);var n=i(294),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},294:function(e,t,i){}},[[287,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/agent/apply/apply.js.map