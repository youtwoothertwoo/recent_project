(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/my_shop/my_live/live/live"],{209:function(e,t,n){"use strict";n.r(t);var i=n(210),o=n(212);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);var a,u=n(34),c=Object(u["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],a);c.options.__file="components/upload/upload.vue",t["default"]=c.exports},210:function(e,t,n){"use strict";n.r(t);var i=n(211);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},211:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));var o=function(){var e=this,t=e.$createElement;e._self._c},r=!1,a=[];o._withStripped=!0},212:function(e,t,n){"use strict";n.r(t);var i=n(213),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},213:function(e,t,n){"use strict";(function(e){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(13)),r={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var n=[];n.push(e.tempFilePath),console.log(n),t.uploadFile(n)}},fail:function(e){console.log(e),t.$emit("getImgs",null)}}):e.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){var n=this,i=0,r=t.length,a={token:e.getStorageSync("token"),app_id:n.getAppId(),file_type:n.isVideo?"video":"image"};e.showLoading({title:"上传中"}),t.forEach((function(t,u){e.uploadFile({url:n.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:a,success:function(e){var t="object"===(0,o.default)(e.data)?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void n.doLogin();1===t.code&&n.imageList.push(t.data)},complete:function(){i++,r===i&&(e.hideLoading(),n.$emit("getImgs",n.imageList))}})}))}}};t.default=r}).call(this,n(2)["default"])},649:function(e,t,n){"use strict";(function(e,t){var i=n(4);n(26);i(n(25));var o=i(n(650));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},650:function(e,t,n){"use strict";n.r(t);var i=n(651),o=n(653);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n(655);var a,u=n(34),c=Object(u["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,"9feed464",null,!1,i["components"],a);c.options.__file="pages/user/my_shop/my_live/live/live.vue",t["default"]=c.exports},651:function(e,t,n){"use strict";n.r(t);var i=n(652);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},652:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));var o=function(){var e=this,t=e.$createElement;e._self._c},r=!1,a=[];o._withStripped=!0},653:function(e,t,n){"use strict";n.r(t);var i=n(654),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},654:function(e,t,n){"use strict";(function(e,i){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(209)),a={components:{Upload:r.default},data:function(){return{form:{name:"",share_img_id:null,share_img_path:""},isUpload:!1,file_type:null,cur_image:null,categorylist:[],category:"",categorytype:[],index:0}},mounted:function(){},methods:{getCategory:function(){var e=this;e._post("plus.live.RoomApply/category",{},(function(t){t.data.list.forEach((function(t,n){e.categorylist.push(t.name)})),e.categorytype=t.data.list}))},bindTextAreaBlur:function(e){this.form.name=e},formSubmit:function(t){var n=this;""!=n.form.name?/[<>*{}()^%$#@!~&= ]/.test(n.form.name)?e.showModal({title:"提示",content:"名称不能为空或包含特殊字符",showCancel:!1}):null!=n.form.share_img_id?n._post("plus.live.RoomApply/addlive",n.form,(function(e){i.showToast({title:"创建成功"});var t="/pagesLive/live/live?type=create&room_id="+e.data.room_id;n.gotoPage(t)})):e.showModal({title:"提示",content:"请上传直播间分享图",showCancel:!1}):e.showModal({title:"提示",content:"请输入直播间名称",showCancel:!1})},openUpload:function(e){this.cur_imagetype=e,this.file_type="image",this.isUpload=!0},getImgsFunc:function(e){e&&"undefined"!=typeof e&&null!=this.cur_imagetype&&(this.form[this.cur_imagetype+"id"]=e[0]["file_id"],this.form[this.cur_imagetype+"path"]=e[0]["file_path"],this.cur_imagetype=null),this.isUpload=!1},bindPickerChange:function(e){this.index=e.target.value,this.category=this.categorylist[this.index],this.form.category_id=this.categorytype[this.index].category_id}}};t.default=a}).call(this,n(1)["default"],n(2)["default"])},655:function(e,t,n){"use strict";n.r(t);var i=n(656),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},656:function(e,t,n){}},[[649,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../../.sourcemap/mp-weixin/pages/user/my_shop/my_live/live/live.js.map