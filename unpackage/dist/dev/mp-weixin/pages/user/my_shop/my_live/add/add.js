(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/my_shop/my_live/add/add"],{209:function(e,t,n){"use strict";n.r(t);var i=n(210),o=n(212);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);var a,c=n(34),u=Object(c["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],a);u.options.__file="components/upload/upload.vue",t["default"]=u.exports},210:function(e,t,n){"use strict";n.r(t);var i=n(211);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},211:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));var o=function(){var e=this,t=e.$createElement;e._self._c},r=!1,a=[];o._withStripped=!0},212:function(e,t,n){"use strict";n.r(t);var i=n(213),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},213:function(e,t,n){"use strict";(function(e){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(13)),r={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var n=[];n.push(e.tempFilePath),console.log(n),t.uploadFile(n)}},fail:function(e){console.log(e),t.$emit("getImgs",null)}}):e.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){var n=this,i=0,r=t.length,a={token:e.getStorageSync("token"),app_id:n.getAppId(),file_type:n.isVideo?"video":"image"};e.showLoading({title:"上传中"}),t.forEach((function(t,c){e.uploadFile({url:n.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:a,success:function(e){var t="object"===(0,o.default)(e.data)?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void n.doLogin();1===t.code&&n.imageList.push(t.data)},complete:function(){i++,r===i&&(e.hideLoading(),n.$emit("getImgs",n.imageList))}})}))}}};t.default=r}).call(this,n(2)["default"])},633:function(e,t,n){"use strict";(function(e,t){var i=n(4);n(26);i(n(25));var o=i(n(634));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},634:function(e,t,n){"use strict";n.r(t);var i=n(635),o=n(637);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n(639);var a,c=n(34),u=Object(c["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,"d09608dc",null,!1,i["components"],a);u.options.__file="pages/user/my_shop/my_live/add/add.vue",t["default"]=u.exports},635:function(e,t,n){"use strict";n.r(t);var i=n(636);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},636:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));var o=function(){var e=this,t=e.$createElement;e._self._c},r=!1,a=[];o._withStripped=!0},637:function(e,t,n){"use strict";n.r(t);var i=n(638),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},638:function(e,t,n){"use strict";(function(e,i){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(209)),a=function(){n.e("components/picker-view-datetime/pickerViewDatetime").then(function(){return resolve(n(1132))}.bind(null,n)).catch(n.oe)},c=function(){n.e("pages/user/my_shop/my_live/add/dialog/Products").then(function(){return resolve(n(1139))}.bind(null,n)).catch(n.oe)},u={components:{Upload:r.default,pickerViewDatetime:a,Products:c},data:function(){return{phoneHeight:0,scrollviewHigh:0,loading:!0,form:{name:"",share_img_id:null,share_img_path:"",start_time:"",end_time:"",productIds:[],category_id:0},isUpload:!1,file_type:null,cur_image:null,open_products:!1,relationList:[],categorylist:[],category:"",categorytype:[],index:0}},computed:{},onLoad:function(){},mounted:function(){this.init()},methods:{init:function(){var t=this;e.getSystemInfo({success:function(n){t.phoneHeight=n.windowHeight;var i=e.createSelectorQuery().select(".foot-btns");i.boundingClientRect((function(e){var n=t.phoneHeight-e.height;t.scrollviewHigh=n})).exec()}})},getCategory:function(){var e=this;e._post("plus.live.RoomApply/category",{},(function(t){t.data.list.forEach((function(t,n){e.categorylist.push(t.name)})),e.categorytype=t.data.list}))},showProducts:function(){this.open_products=!0},closeProducts:function(e){this.open_products=!1,this.relationList=e},formSubmit:function(t){var n=this;""!=n.form.name?/[<>*{}()^%$#@!~&= ]/.test(n.form.name)?i.showModal({title:"提示",content:"标题不能为空或包含特殊字符",showCancel:!1}):new Date(n.form.start_time).getTime()>=new Date(n.form.end_time).getTime()?i.showModal({title:"提示",content:"开始时间不能大于结束时间",showCancel:!1}):null!=n.form.share_img_id?(console.log(this.relationList),n.form.productIds=this.relationList,n._post("plus.live.RoomApply/addnotice",n.form,(function(t){e.showToast({title:"创建成功"}),e.navigateBack({delta:1})}))):i.showModal({title:"提示",content:"请上传封面图",showCancel:!1}):i.showModal({title:"提示",content:"请输入标题",showCancel:!1})},getStartTime:function(e){this.form.start_time=e+":00"},getStartEnd:function(e){this.form.end_time=e+":59"},openUpload:function(e){this.cur_imagetype=e,this.file_type="image",this.isUpload=!0},getImgsFunc:function(e){e&&"undefined"!=typeof e&&null!=this.cur_imagetype&&(this.form[this.cur_imagetype+"id"]=e[0]["file_id"],this.form[this.cur_imagetype+"path"]=e[0]["file_path"],this.cur_imagetype=null),this.isUpload=!1},bindPickerChange:function(e){this.index=e.target.value,this.category=this.categorylist[this.index],this.form.category_id=this.categorytype[this.index].category_id}}};t.default=u}).call(this,n(2)["default"],n(1)["default"])},639:function(e,t,n){"use strict";n.r(t);var i=n(640),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},640:function(e,t,n){}},[[633,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../../.sourcemap/mp-weixin/pages/user/my_shop/my_live/add/add.js.map