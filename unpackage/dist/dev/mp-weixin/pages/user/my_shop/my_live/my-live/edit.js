(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/my_shop/my_live/my-live/edit"],{209:function(e,t,n){"use strict";n.r(t);var o=n(210),i=n(212);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);var u,c=n(34),a=Object(c["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],u);a.options.__file="components/upload/upload.vue",t["default"]=a.exports},210:function(e,t,n){"use strict";n.r(t);var o=n(211);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},211:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return u})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c},r=!1,u=[];i._withStripped=!0},212:function(e,t,n){"use strict";n.r(t);var o=n(213),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},213:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(13)),r={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var n=[];n.push(e.tempFilePath),console.log(n),t.uploadFile(n)}},fail:function(e){console.log(e),t.$emit("getImgs",null)}}):e.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){var n=this,o=0,r=t.length,u={token:e.getStorageSync("token"),app_id:n.getAppId(),file_type:n.isVideo?"video":"image"};e.showLoading({title:"上传中"}),t.forEach((function(t,c){e.uploadFile({url:n.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:u,success:function(e){var t="object"===(0,i.default)(e.data)?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void n.doLogin();1===t.code&&n.imageList.push(t.data)},complete:function(){o++,r===o&&(e.hideLoading(),n.$emit("getImgs",n.imageList))}})}))}}};t.default=r}).call(this,n(2)["default"])},641:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26);o(n(25));var i=o(n(642));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},642:function(e,t,n){"use strict";n.r(t);var o=n(643),i=n(645);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n(647);var u,c=n(34),a=Object(c["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,"f60b91c6",null,!1,o["components"],u);a.options.__file="pages/user/my_shop/my_live/my-live/edit.vue",t["default"]=a.exports},643:function(e,t,n){"use strict";n.r(t);var o=n(644);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},644:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return u})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c},r=!1,u=[];i._withStripped=!0},645:function(e,t,n){"use strict";n.r(t);var o=n(646),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},646:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(209)),r=function(){n.e("components/countdown/countdown").then(function(){return resolve(n(1064))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/picker-view-datetime/pickerViewDatetime").then(function(){return resolve(n(1132))}.bind(null,n)).catch(n.oe)},c=function(){n.e("pages/user/my_shop/my_live/my-live/dialog/Products").then(function(){return resolve(n(1146))}.bind(null,n)).catch(n.oe)},a={components:{Upload:i.default,pickerViewDatetime:u,Products:c,Countdown:r},data:function(){return{phoneHeight:0,scrollviewHigh:0,loading:!0,form:{name:"",share_img_id:null,share_img_path:"",start_time:"",end_time:"",productIds:[],data:[]},isUpload:!1,file_type:null,cur_image:null,open_products:!1,relationList:[],countdownConfig:{startstamp:0,endstamp:0,title:"距开播还剩",type:"text"},tapTime:"",is_user:!1,shop_supplier_id:""}},onLoad:function(e){this.form.room_id=e.room_id,this.shop_supplier_id=e.shop_supplier_id,this.getDetail()},mounted:function(){this.init()},methods:{getDetail:function(){var t=this;e.showLoading({title:"加载中"});t.data_type;t._get("live.RoomApply/liveproduct",{shop_supplier_id:t.shop_supplier_id},(function(n){e.hideLoading(),t.form=n.data.list,t.form.data.forEach((function(e){t.relationList.push(e.product_id)}))}))},getProduct:function(){var t=this;e.showLoading({title:"加载中"}),t._get("live.RoomApply/liveproduct",{},(function(t){e.hideLoading()}))},init:function(){var t=this;e.getSystemInfo({success:function(e){t.scrollviewHigh=e.windowHeight}})},showProducts:function(){this.open_products=!0},closeProducts:function(t){var n=this;n.open_products=!1;if(null!=t){for(var o=0;o<t.length;o++)-1!=n.relationList.indexOf(t[o])&&(t.splice(o,1),o--);t.length>0&&n._post("live.RoomApply/addProduct",{productIds:t},(function(t){e.showToast({title:"绑定商品成功了",duration:2e3,icon:"success"}),n.getDetail()}))}},gotoProduct:function(e){var t="pages/product/detail/detail?product_id="+e.product_id;this.gotoPage(t)},deleteFunc:function(t){var n=this;e.showModal({title:"提示",content:"您确定要移除吗?",success:function(o){o.confirm?(e.showLoading({title:"正在处理"}),n._post("live.RoomApply/delProduct",{room_id:t.room_id,product_id:t.product.product_id},(function(t){e.hideLoading(),e.showToast({title:t.msg,duration:2e3,icon:"success"}),n.getDetail()}))):e.showToast({title:"取消移除",duration:1e3,icon:"none"})}})},nowLive:function(){var t=this,n=new Date;if(!(n-this.tapTime<1e3))if(t.form.name||(t.form.name="新建直播间"),/[<>*{}()^%$#@!~&= ]/.test(t.form.name))e.showModal({title:"提示",content:"名称不能为空或包含特殊字符",showCancel:!1});else{var o="/pages/pagesLive/live/live?roomName="+t.form.name+"&room_id="+t.form.room_id;t.is_user&&(o="/pages/pagesLive/live/live?type=create&roomName="+t.form.name+"&room_id="+t.form.room_id),t.gotoPage(o),t.tapTime=n}}}};t.default=a}).call(this,n(2)["default"])},647:function(e,t,n){"use strict";n.r(t);var o=n(648),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},648:function(e,t,n){}},[[641,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../../.sourcemap/mp-weixin/pages/user/my_shop/my_live/my-live/edit.js.map