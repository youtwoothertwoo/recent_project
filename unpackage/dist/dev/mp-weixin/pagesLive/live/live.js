require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesLive/live/live"],{863:function(e,n,o){"use strict";(function(e,n){var t=o(4);o(26);t(o(25));var i=t(o(864));e.__webpack_require_UNI_MP_PLUGIN__=o,n(i.default)}).call(this,o(1)["default"],o(2)["createPage"])},864:function(e,n,o){"use strict";o.r(n);var t=o(865),i=o(867);for(var a in i)["default"].indexOf(a)<0&&function(e){o.d(n,e,(function(){return i[e]}))}(a);o(871),o(873);var s,r=o(34),l=Object(r["default"])(i["default"],t["render"],t["staticRenderFns"],!1,null,"4215c3cc",null,!1,t["components"],s);l.options.__file="pagesLive/live/live.nvue",n["default"]=l.exports},865:function(e,n,o){"use strict";o.r(n);var t=o(866);o.d(n,"render",(function(){return t["render"]})),o.d(n,"staticRenderFns",(function(){return t["staticRenderFns"]})),o.d(n,"recyclableRender",(function(){return t["recyclableRender"]})),o.d(n,"components",(function(){return t["components"]}))},866:function(e,n,o){"use strict";var t;o.r(n),o.d(n,"render",(function(){return i})),o.d(n,"staticRenderFns",(function(){return s})),o.d(n,"recyclableRender",(function(){return a})),o.d(n,"components",(function(){return t}));var i=function(){var e=this,n=e.$createElement;e._self._c},a=!1,s=[];i._withStripped=!0},867:function(e,n,o){"use strict";o.r(n);var t=o(868),i=o.n(t);for(var a in t)["default"].indexOf(a)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(a);n["default"]=i.a},868:function(e,n,o){"use strict";(function(e){var t=o(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=t(o(11)),a=t(o(30)),s=t(o(869)),r=t(o(870)),l="io.agora.rtc.",u="io.agora.rtm.",c=function(){o.e("pagesLive/live/live-part/liveCart").then(function(){return resolve(o(1175))}.bind(null,o)).catch(o.oe)},d=function(){o.e("pagesLive/live/live-part/liveGift").then(function(){return resolve(o(1182))}.bind(null,o)).catch(o.oe)},g=function(){o.e("pagesLive/live/live-part/liveMsg").then(function(){return resolve(o(1189))}.bind(null,o)).catch(o.oe)},f=function(){Promise.all([o.e("common/vendor"),o.e("pagesLive/live/live-part/livePlan")]).then(function(){return resolve(o(1196))}.bind(null,o)).catch(o.oe)},h=function(){o.e("pagesLive/live/live-part/liveOrder").then(function(){return resolve(o(1203))}.bind(null,o)).catch(o.oe)},v=function(){o.e("pagesLive/live/live-part/liveAnchor").then(function(){return resolve(o(1210))}.bind(null,o)).catch(o.oe)},p=function(){o.e("pagesLive/live/live-part/liveMore").then(function(){return resolve(o(1217))}.bind(null,o)).catch(o.oe)},m=function(){o.e("pagesLive/live/live-part/liveShare").then(function(){return resolve(o(1224))}.bind(null,o)).catch(o.oe)},_=function(){o.e("pagesLive/live/live-part/liveRank").then(function(){return resolve(o(1231))}.bind(null,o)).catch(o.oe)},w=function(){o.e("pagesLive/live/live-part/likes/index").then(function(){return resolve(o(1238))}.bind(null,o)).catch(o.oe)},y=function(){o.e("pagesLive/live/live-part/dialog/share").then(function(){return resolve(o(1245))}.bind(null,o)).catch(o.oe)},L=function(){o.e("pagesLive/live/live-part/countdown_nvue").then(function(){return resolve(o(1252))}.bind(null,o)).catch(o.oe)},C=function(){Promise.all([o.e("common/vendor"),o.e("pagesLive/live/live-part/app-nvue-share")]).then(function(){return resolve(o(1259))}.bind(null,o)).catch(o.oe)},S=function(){o.e("pagesLive/live/preview").then(function(){return resolve(o(1266))}.bind(null,o)).catch(o.oe)},R={components:{liveCart:c,liveGift:d,liveMsg:g,livePlan:f,liveOrder:h,liveAnchor:v,liveMore:p,liveShare:m,liveRank:_,Likes:w,share:y,Countdown:L,AppShare:C,preview:S},data:function(){var e;return e={statusBarH:"",headerBarH:"",winHeight:"",winWidth:"",videoIndex:0,clickNum:0,giftipShowist:[],sence:"",room_id:0,shop_supplier_id:0,role:"",loading:!0,commentsList:[],maxCommentSize:100,roomDetail:{supplier:{shop_supplier_id:0}},giftName:"",gift_num:0,hasFollow:!1,giftList:[],isCaster:!1,user:{},giftInfo:{nickName:"",avatarUrl:"",giftName:"",giftImage:""},explain_product_id:"",explain_product:null,num:0,digg_num:0,digg_times:5,digg_timer:null,is_replay:!1,replay_url:"",is_start:!1,qrcode:null,toMsg:"",emojiData:[],countdownConfig:{startstamp:0,endstamp:0,title:""},isAppShare:!1,appParams:{title:"",summary:"",path:""},zOrderMediaOverlay:!1,zOrderOnTop:!1,renderMode:1,mirrorMode:0,engine_load:!1},(0,i.default)(e,"isCaster",!1),(0,i.default)(e,"whiteness",5),(0,i.default)(e,"beauty",5),(0,i.default)(e,"userInfo",{}),(0,i.default)(e,"channel",""),(0,i.default)(e,"view_uid",0),(0,i.default)(e,"agoraView",null),(0,i.default)(e,"agoraRtm",null),(0,i.default)(e,"platform",""),(0,i.default)(e,"agoraAppId",""),(0,i.default)(e,"appId",""),(0,i.default)(e,"uid",""),(0,i.default)(e,"liveChannelId",""),(0,i.default)(e,"token",""),(0,i.default)(e,"nickName",""),(0,i.default)(e,"beautyOptions",{enabled:!0,contrastLevel:1,lightening:.6,smoothness:.5,redness:.1,sharpness:.3}),(0,i.default)(e,"is_preview",!1),(0,i.default)(e,"isExplain",!1),(0,i.default)(e,"explain",{}),(0,i.default)(e,"online_count",0),(0,i.default)(e,"intervalTime",null),e},beforeCreate:function(){},created:function(){console.log("------live created"),this.platform=e.getSystemInfoSync().platform;var n=e.getSystemInfoSync().statusBarHeight,o=n+50,t=e.getSystemInfoSync().windowHeight,i=e.getSystemInfoSync().windowWidth;this.statusBarH="".concat(n,"px"),this.headerBarH="".concat(o,"px"),this.winHeight="".concat(t,"px"),this.winWidth="".concat(i,"px")},onLoad:function(n){e.setKeepScreenOn({keepScreenOn:!0});var o=a.default.getSceneData(n);this.room_id=n.room_id?n.room_id:o.rid,this.role="create"==n.sence?"broadcaster":"audience"},onReady:function(){},onUnload:function(){},onShow:function(){},mounted:function(){var n=this;console.log("-------agora-sdk---------------"+e.getSystemInfoSync().platform),"android"===n.platform?(r.default.requestAndroidPermission("android.permission.RECORD_AUDIO"),r.default.requestAndroidPermission("android.permission.CAMERA"),n.agoraView=n.$refs.agoraView,n.agoraRtm=n.$refs.agoraRtm):"ios"===n.platform&&(n.agoraView=agoraRtc,n.agoraRtm=agoraRtm),n.uid=n.getRequest().getUserId(),this.getRoomInfo()},methods:{getRequest:function(){var e=this;return e},getRoomInfo:function(){var n=this;e.showLoading({title:"正在进入"}),n.getRequest()._post("plus.live.room/detail",{room_id:n.room_id},(function(o){console.log("获取房间"),console.log(o.data),e.hideLoading(),n.loading=!1,n.roomDetail=o.data.model,n.giftName=o.data.gift_name,n.hasFollow=o.data.hasFollow,n.digg_num=o.data.model.digg_num,n.countdownConfig.endstamp=n.roomDetail.start_time,n.user=o.data.user,n.isCaster=o.data.isCaster,n.isCaster?n.view_uid=0:n.view_uid=o.data.model.user_id,n.liveRoomStart(n.roomDetail,n.user),n.$nextTick((function(){n.initProduct()}))}))},liveRoomStart:function(n,o){var t=this;if(t.roomDetail=n,t.userInfo=o,t.channel="channel_"+n.supplier.shop_supplier_id,t.liveChannelId="channel_"+n.supplier.shop_supplier_id,t.isCaster){var i=e.getStorageSync("whiteness");i&&(t.whiteness=i);var a=e.getStorageSync("beauty");a&&(t.beauty=a)}else console.log("观众进入");t.loginRoom()},loginRoom:function(){var n=this;e.showLoading({title:"正在进入"}),n.getRequest()._get("plus.live.agora.api/login",{room_id:n.roomDetail.room_id,channel:n.channel},(function(o){if(console.log("进入房间"),console.log(o.data),n.appId=o.data.appId,n.agoraAppId=o.data.appId,n.token=o.data.userSign,n.nickName=o.data.user.nickName,0!=n.roomDetail.live_status){if(n.isCaster){if(n.uid!=n.roomDetail.user_id)return void n.getRequest().showError("你不是此房间主播",(function(){e.navigateBack()}))}else if(102==n.roomDetail.live_status)return void n.getRequest().showError("直播未开始",(function(){e.navigateBack()}));103!=n.roomDetail.live_status&&107!=n.roomDetail.live_status?(n.initRoom(),n.agoraView.create({appid:n.agoraAppId},(function(e){n.engine_load=!0,n.showLike=!0,console.log("create---------"),n.isCaster?(n.is_preview=!0,console.log(n.roomDetail.live_status),102==n.roomDetail.live_status?n.startPreview():n.openLive()):n.enterRoom(),n.addRtcListeners()}))):n.getRequest().showError("直播已结束",(function(){e.navigateBack()}))}else n.getRequest().showError("直播审核中",(function(){e.navigateBack()}))}))},closePreview:function(){e.navigateBack()},switchCamera:function(){var e=this;e.agoraView.switchCamera((function(e){console.log("--------------------switchCamera-------------------")}))},setBeautyOptions:function(n){if(console.log("setBeautyOptions"+n),"set"==n){var o=e.getStorageSync("lightening");o?this.beautyOptions.lightening=o:e.setStorageSync("smoothness",this.beautyOptions.lightening);var t=e.getStorageSync("smoothness");t?this.beautyOptions.smoothness=t:e.setStorageSync("smoothness",this.beautyOptions.smoothness);var i=e.getStorageSync("redness");i?this.beautyOptions.redness=i:e.setStorageSync("redness",this.beautyOptions.redness);var a=e.getStorageSync("sharpness");a?this.beautyOptions.sharpness=a:e.setStorageSync("sharpness",this.beautyOptions.sharpness)}else this.beautyOptions.lightening=.6,e.setStorageSync("lightening",this.beautyOptions.lightening),this.beautyOptions.smoothness=.5,e.setStorageSync("smoothness",this.beautyOptions.smoothness),this.beautyOptions.redness=.1,e.setStorageSync("redness",this.beautyOptions.redness),this.beautyOptions.sharpness=.3,e.setStorageSync("sharpness",this.beautyOptions.sharpness);this.agoraView.setBeautyEffectOptions(this.beautyOptions)},setDefinition:function(n){console.log("setDefinition="+n);var o=this;e.setStorageSync("vd",n),o.agoraView.setVideoEncoderConfiguration({vd:n},(function(e){console.log("setVideoEncoderConfiguration")}))},startPreview:function(){var n=this;n.agoraView.enableVideo((function(e){})),"android"==n.platform&&n.agoraView.setupLocalVideo({channelName:n.liveChannelId,uid:n.uid},(function(e){console.log("setupLocalVideo")})),n.setBeautyOptions();var o=e.getStorageSync("vd");o||(o=0),n.setDefinition(o),n.agoraView.startPreview((function(e){console.log("--------------------startPreview-------------------")}))},rtmLogin:function(){var e=this,n=e.agoraRtm;n.createInstance({appid:e.agoraAppId},(function(e){console.log("-------------rtmLogin createInstance--------")})),e.addRtmListeners(),e.getRequest()._get("plus.live.agora.api/rtmToken",{room_id:e.roomDetail.room_id},(function(o){console.log("-------------rtmToken--------"),console.log(o),n.login({token:o.data.userSign,uid:""+e.uid},(function(e){console.log("-------------agoraRtm login--------")}))}),(function(e){console.log(e)}))},addRtmListeners:function(){var e=this;globalEvent.addEventListener(u+"ConnectionStateChanged",(function(n){3==n.data[0]&&2==n.data[1]&&e.onLoginSuccess()})),globalEvent.addEventListener(u+"MessageReceived",(function(n){e.showMsg(n.data[0])}))},addRtcListeners:function(){var e=this;globalEvent.addEventListener(l+"JoinChannelSuccess",(function(n){e.onJoinChannelSuccess(n)})),globalEvent.addEventListener(l+"LeaveChannel",(function(n){e.onLeaveChannel(n)})),globalEvent.addEventListener(l+"RemoteVideoStateChanged",(function(n){e.onRemoteVideoStateChanged(n)})),globalEvent.addEventListener(l+"UserJoined",(function(n){e.onUserJoined(n)})),globalEvent.addEventListener(l+"UserOffline",(function(n){e.onUserOffline(n)}))},enterRoom:function(){var e=this;e.agoraView.setChannelProfile(1,(function(e){})),e.agoraView.setClientRole(2,(function(e){})),e.agoraView.enableAudio((function(e){})),e.agoraView.enableVideo((function(e){})),"android"==e.platform&&e.agoraView.setupRemoteVideo({channelName:e.liveChannelId,uid:e.view_uid},(function(e){})),e.agoraView.joinChannel({token:e.token,channelName:e.liveChannelId,uid:e.uid},(function(e){console.log("--------------------joinChannel enterRoom-------------------")}),(function(e){console.log("--------------------joinChannel enterRoom-------------------")}))},openLive:function(){var e=this,n=e.agoraView;e.is_preview&&(e.is_preview=!1,n.stopPreview((function(e){console.log("--------------------stopPreview-------------------")}))),n.setChannelProfile(1,(function(e){})),n.setClientRole(1,(function(e){})),n.enableAudio((function(e){})),n.enableVideo((function(e){})),"android"==e.platform&&n.setupLocalVideo({channelName:e.liveChannelId,uid:e.uid},(function(e){console.log("setupLocalVideo")})),n.joinChannel({token:e.token,channelName:e.liveChannelId,uid:e.uid},(function(e){console.log("--------------------joinChannel-------------------"),console.log()}))},initRoom:function(){this.getGift(),this.initemoji()},showProduct:function(e){var n=this;n.explain_product_id=e,n.getRequest()._post("plus.live.room/product_detail",{product_id:n.explain_product_id},(function(e){n.explain_product=e.data.model,console.log(n.explain_product)}))},synRoomInfo:function(e){var n=this;n.getRequest()._post("plus.live.room/syn_room",{room_id:n.roomDetail.room_id},(function(e){var o={type:"views",views:e.data.model.views,digg_num:e.data.model.digg_num};n.sendMsg(JSON.stringify(o))}))},initProduct:function(){this.roomDetail.currentProduct&&(this.explain_product={product_image:this.roomDetail.currentProduct.image[0].file_path,product_price:this.roomDetail.currentProduct.product_price,product_id:this.roomDetail.currentProduct.product_id}),console.log("--------explain_product-------------"),console.log(this.explain_product)},gotoProduct:function(n){var o="/pages/product/detail/detail?product_id="+this.explain_product.product_id+"&room_id="+this.room_id;e.navigateTo({url:o})},handleSlider:function(e){var n=e.detail.current;this.videoIndex>=0&&(this.videoContextList[this.videoIndex].pause(),this.videoContextList[this.videoIndex].seek(0)),n===this.videoIndex+1?this.videoContextList[this.videoIndex+1].play():n===this.videoIndex-1&&this.videoContextList[this.videoIndex-1].play(),this.videoIndex=n},play:function(e){this.videoContextList[e].play()},pause:function(e){this.videoContextList[e].pause()},handleAttention:function(e){var n=this.vlist;n[e].attention=!n[e].attention,this.vlist=n},handleLiveCart:function(){this.$refs.liveCart.show()},handleLiveGift:function(){this.$refs.liveGift.show()},handleRollMsg:function(){this.$refs.liveMsg.show()},sendChannelMsg:function(e){var n={type:"text",msg:e,registerLevel:this.registerLevel,nickName:this.nickName};this.sendMsg(n)},closeMsg:function(e){var n=this,o={type:"text",msg:e,nickName:n.user.nickName};n.sendMsg(JSON.stringify(o))},removeComment:function(){var e=this,n=e.commentsList.length-e.maxCommentSize;if(n>0)for(var o=0;o<n;o++)e.commentsList.shift();e.$nextTick((function(){e.toMsg="comment"+(e.commentsList.length-1)}))},getGift:function(){var e=this;e.getRequest()._get("plus.live.room/gift",{},(function(n){console.log("====gift======="),console.log(n);for(var o=[],t=[],i=0,a=0;a<n.data.list.length;a++)i++,t.push(n.data.list[a]),i>=8&&(o.push(t),t=[],i=0);t.length>0&&o.push(t),e.giftList=o,console.log(e.giftList)}))},openPlan:function(){this.$refs.livePlan.show()},closePlan:function(){this.$refs.liveGift.show()},openOrder:function(){this.$refs.liveOrder.show()},closeOrder:function(){this.$refs.liveCart.show()},setProduct:function(e){console.log("explainProduct"),console.log(e),null==e?(this.isExplain=!1,this.explain={}):(this.isExplain=!0,this.explain=e);var n={type:"explain",explain:this.explain,isExplain:this.isExplain};this.sendMsg(n)},sendMsg:function(e){var n=this,o=n.agoraRtm,t=JSON.stringify(e);o.sendMessage({message:t},(function(e){console.log(t),n.showMsg(t)}),(function(e){console.log(e)}))},digg:function(){if(console.log("点击屏幕"),!this.isCaster){var e=this;e.$refs.likes.handleClick(),console.log("----------digg---------------"),e.getRequest()._post("plus.live.room/digg",{room_id:e.room_id,num:1},(function(n){console.log("----------digg---------------");var o=n.data,t={type:"digg",digg_num:o};e.sendMsg(t)}))}},showMsg:function(n){var o=this,t=JSON.parse(n);if(console.log(t),"text"==t.type||"buy"==t.type||"join"==t.type||"enter"==t.type)o.commentsList.push(t),o.removeComment();else if("digg"==t.type)console.log("digg"),o.digg_num=t.digg_num.digg_num,console.log(o.digg_num);else{if("banSay"==t.type&&o.uid==t.user_id)return o.isbanSay=!0,void e.showToast({title:"您已被禁言",icon:"none"});if("gift_num"==t.type)o.roomDetail.gift_num=t.msg;else if("gift"==t.type)o.giftInfo={nickName:t.nickName,avatarUrl:t.avatarUrl,giftName:o.getGiftName(t.msg),giftImage:o.getGiftImage(t.msg)},setTimeout((function(){o.giftInfo={nickName:""}}),5e3);else if("kickPerson"==t.type&&o.uid==t.user_id)e.showToast({title:"您已被踢出直播间",icon:"none"}),o.closeLive();else{if("openSay"==t.type&&o.uid==t.user_id)return e.showToast({title:"您已被取消禁言",icon:"none"}),void(o.isbanSay=!1);"openPerson"==t.type&&o.uid==t.user_id?e.showToast({title:"您已被取消踢出直播间",icon:"none"}):"explain"==t.type&&(this.explain=t.explain,this.isExplain=t.isExplain,this.showProduct(t.explain),this.showLike=!1,this.showLike=!0)}}},followFunc:function(){var e=this;e.getRequest()._post("user.favorite/add",{shop_supplier_id:e.roomDetail.supplier.shop_supplier_id,pid:e.roomDetail.supplier.shop_supplier_id,type:10},(function(n){console.log(n),e.hasFollow=!e.hasFollow}))},openAnchor:function(){this.$refs.liveAnchor.show()},changeFollow:function(e){this.hasFollow=e},openMore:function(){this.$refs.liveMore.show()},openShare:function(e){var n=this;n.$refs.liveShare.show()},liveSet:function(e){this.$refs.liveRoom.liveSet(e)},openRank:function(){this.$refs.liveRank.show()},sendGift:function(e){var n=this,o=e.split(","),t={type:"gift",msg:o[0],nickName:n.user.nickName,avatarUrl:n.user.avatarUrl};n.sendMsg(t);var i={type:"gift_num",msg:o[1]};n.sendMsg(i)},getGiftName:function(e){var n="";for(var o in this.giftList)for(var t=0;t<this.giftList[o].length;t++){var i=this.giftList[o][t];if(parseInt(e)===i.gift_id){n=i.gift_name,console.log(n);break}}return n},getGiftImage:function(e){var n="";for(var o in this.giftList)for(var t=0;t<this.giftList[o].length;t++){var i=this.giftList[o][t];if(parseInt(e)===i.gift_id){n=i.file_path;break}}return n},livePoster:function(){var n=this;e.showLoading({title:"加载中"});var o="wx";n.getRequest()._get("plus.live.Room/poster",{room_id:n.room_id,source:o},(function(e){n.qrcode=e.data.qrcode}),null,(function(){e.hideLoading()}))},closeShare:function(){this.qrcode=null},onShareAppMessage:function(){var e=this,n=e.getRequest().getShareUrlParams({room_id:e.room_id,sence:"audience"});return{title:e.roomDetail.name,path:"/pagesLive/live/live?"+n,imageUrl:e.roomDetail.shareFilePath}},initemoji:function(){for(var e=Math.ceil(s.default.length/21),n=0;n<e;n++){this.emojiData[n]=[];for(var o=0;o<21;o++)s.default[21*n+o]&&this.emojiData[n].push(s.default[21*n+o])}console.log("initemoji:success")},goBack:function(){e.redirectTo({url:"/pagesLive/live/index"})},closeLive:function(){var n=this;n.isCaster?e.showModal({title:"提示",content:"确定要结束当前直播吗?",success:function(e){e.confirm&&(n.getRequest()._get("plus.live.agora.api/record_stop",{room_id:n.room_id},(function(e){console.log("record_stop")})),n.getRequest()._post("plus.live.room/set_status",{room_id:n.room_id,status:103},(function(e){console.log("set_status"),n.leaveChannel("auto")})))}}):n.leaveChannel("auto")},onJoinChannelSuccess:function(e){var n=this;console.log("------------onJoinChannelSuccess---------------"),n.rtmLogin(),n.isCaster&&(n.getRequest()._post("plus.live.room/set_status",{room_id:n.room_id,status:101},(function(e){}),(function(e){console.log(e)})),n.getRequest()._post("plus.live.agora.api/record_acquire",{room_id:n.roomDetail.room_id},(function(e){console.log("--------record_acquire-----------"),console.log(e),n.getRequest()._post("plus.live.agora.api/record_start",{room_id:n.roomDetail.room_id},(function(e){setTimeout((function(){n.getRequest()._post("plus.live.agora.api/record_query",{room_id:n.roomDetail.room_id},(function(e){console.log("--------record_query-----------"),console.log(e)}))}),3e4)}))})))},onLeaveChannel:function(e){console.log("-------------onLeaveChannel---------------")},onRemoteVideoStateChanged:function(e){console.log("-------------onRemoteVideoStateChanged---------------")},onUserJoined:function(e){console.log("-------------onUserJoined---------------")},onUserOffline:function(e){console.log("-------------onUserOffline---------------"),this.leaveChannel("over")},leaveChannel:function(n){var o=this;console.log("leaveChannel"),clearInterval(o.intervalTime),"android"==o.platform&&(o.agoraRtm.leave(),o.agoraRtm.release({channelId:o.liveChannelId})),o.agoraView.leaveChannel((function(e){console.log("leaveChannel success"),o.agoraView.destroy()}));var t=o.isCaster?"1":"0",i="/pagesLive/live/live-over?room_id="+o.room_id+"&isCaster="+t;console.log("url:"+i),o.isCaster?e.redirectTo({url:i}):"auto"==n?e.navigateBack():e.redirectTo({url:i})},onLoginSuccess:function(e){this.joinChannel()},joinChannel:function(){var e=this,n=e.agoraRtm;n.createChannel({channelId:e.liveChannelId},(function(o){n.join((function(n){e.onJoinSuccess()}))}))},onLoginFailure:function(e){console.log("onLoginFailure"),console.log(e)},onLogoutSuccess:function(e){console.log("onLogoutSuccess"),console.log(e)},onLogoutFailure:function(e){console.log("onLogoutFailure"),console.log(e)},onJoinSuccess:function(e){var n=this,o={type:"join",msg:"",registerLevel:n.registerLevel,nickName:n.nickName};n.sendMsg(o),n.synRoomData(),n.intervalTime=setInterval((function(){n.synRoomData()}),1e4)},onJoinFailure:function(e){console.log("onJoinFailure"),console.log(e)},onChannelMessageReceived:function(e){console.log("onChannelMessageReceived"),this.showMsg(e.detail.messageData)},changeVirtualBackground:function(n){var o=this;console.log("changeVirtualBackground e="+n),""!=n?e.downloadFile({url:n,success:function(e){200===e.statusCode&&(console.log("下载成功"),o.agoraView.enableVirtualBackground({enabled:!0,source:plus.io.convertLocalFileSystemURL(e.tempFilePath),backgroundSourceType:2,color:16777215,blur_degree:1},(function(e){console.log("changeVirtualBackground success"),console.log(e)})))}}):o.agoraView.enableVirtualBackground({enabled:!1},(function(e){console.log("changeVirtualBackground cancel"),console.log(e)}))},synRoomData:function(){var e=this,n=e.agoraRtm;n.getChannelMemberCount({channelIds:e.liveChannelId},(function(n){e.online_count="ios"==e.platform?n[0]["memberCount"]:n.memberCount[0].memberCount}))}}};n.default=R}).call(this,o(2)["default"])},871:function(e,n,o){"use strict";o.r(n);var t=o(872),i=o.n(t);for(var a in t)["default"].indexOf(a)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(a);n["default"]=i.a},872:function(e,n,o){},873:function(e,n,o){"use strict";o.r(n);var t=o(874),i=o.n(t);for(var a in t)["default"].indexOf(a)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(a);n["default"]=i.a},874:function(e,n,o){}},[[863,"common/runtime","common/vendor","pagesLive/common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagesLive/live/live.js.map