{"version":3,"sources":["uni-app:///main.js","webpack:///D:/working/舒服康/App.vue?c1e4","webpack:///D:/working/舒服康/App.vue?9018","uni-app:///App.vue","webpack:///D:/working/舒服康/App.vue?d96e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","Vue","prototype","$store","store","component","headerBar","requestLoading","tabBar","footTabberData","active","$fire","onfire","config","productionTip","App","mpType","app","$mount","websiteUrl","app_url","app_id","h5_addr","gotoPage","gotopage","font_url","points_name","e","re","RegExp","replace","state","ios","u","navigator","userAgent","toLowerCase","indexOf","match","_get","path","data","success","fail","complete","token","uni","getStorageSync","this","getAppId","request","url","dataType","method","res","statusCode","code","showError","msg","removeStorageSync","console","log","doLogin","hideLoading","_post","header","pages","getCurrentPages","length","currentPage","route","setStorageSync","options","callback","showModal","title","content","showCancel","showSuccess","compareVersion","v1","v2","split","len","Math","max","push","i","num1","parseInt","num2","getShareUrlParams","params","self","utils","urlEncode","Object","assign","referee_id","getUserId","getPlatform","platform","subMessage","temlIds","version","getSystemInfoSync","SDKVersion","requestSubscribeMessage","tmplIds","isWeixin","ua","getVisitcode","visitcode","c","r","random","v","toString","topBarTop","getMenuButtonBoundingClientRect","top","topBarHeight","height","yulan","image_path_arr","Array","isArray","file_path","forEach","item","index","picnum","previewImage","urls","current","indicator","theme","footTab","subPrice","str","val","strs","String","substring","indof","slice","convertTwo","n","getTabBarLinks","vars","setTabBarLinks","result","commit","is_auto","showTabBar","list","color","setTabBarStyle","selectedColor","setTabBarItem","text","iconPath","selectedIconPath","hideTabBar","getThemeColor","render","staticRenderFns","components","renderjs","__file","onLaunch","onShow","onHide","methods","isFirstEnter","updateManager","onStartupScene","getNav","updateWgt","confirmText","mask","duration","plus","d","force","dtask","showLoading","prg"],"mappings":"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ACA,KACA,KACA,MACA,EACAC,EACAC,GAGFnK,EAAUmE,QAAQiG,OAAS,UACZ,aAAApK,E,yCCvBf,wHAAklB,eAAG,G,0HCCrlB,eACA,YACA,CACAqK,qBACA9G,0BAOA,qBAsCA,6BACA,eAEA+G,oBAMAC,oBAGAC,SACAC,wBACA,qCAEAhI,iBACAJ,oBACAkB,6BAEA,uBACAA,+BACAd,cACAK,oCAMA4H,yBACA,2BACAA,gCAEA,aACAA,6BACAjI,aACA6B,aACAC,0BACAC,cACAnC,oBACA,WAEAqI,yBAQAA,8BAEAjI,aACA6B,aACAC,gCACAC,oBAOAmG,2BAEA,gCAEA,eACA,MACA,gCACAlI,kCAIA,YACA,MACA,gCACAA,mCAcAmI,kBAAA,WAEAnI,WACAK,mDACAV,MACApB,2BAEAqB,oBACA,4BACA,0BACA,wDACA,iCACAI,6BACAA,gCAIAoI,sBACApI,aACA6B,aACAC,wBACAuG,iBACAtG,cACAnC,oBACA,cACA,yDACAI,aACA6B,aACAyG,QACAC,eAGA,OACAC,qBACAC,WACA,CACAC,WAEA,WACA5H,kCACA0H,oBACA,qBACA,WACAA,yBAEA,OACA,SAGA,YACA1H,eACAA,wBACAd,aACA6B,gBACAyG,QACAC,mBAKAvI,aACA6B,gBACAyG,QACAC,mBAIA,IACAI,UACA,QACA,oCACAA,iDAEA,gBACA,OACAC,mBACA,MACA,OACAA,sBACA,MACA,OACAC,qEACAD,6BACA,MACA,OACAJ,6BAEA,UAGA,SACAA,6BACAxI,aACA6B,gBACAyG,QACAC,yBAUA,c,4DCrPA,wHAAqmC,eAAG,G","file":"common/main.js","sourcesContent":["import 'uni-pages';\r\n// @ts-ignore\r\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import Vue from 'vue'\r\nimport App from './App'\r\nimport directive from './common/directive.js'\r\nimport utils from './common/utils.js'\r\nimport config from './config.js'\r\nimport onfire from './common/onfire.js'\r\nimport {\r\n\tgotopage\r\n} from '@/common/gotopage.js'\r\n\r\n/* Vuex */\r\nimport store from \"./store/index.js\"\r\nVue.prototype.$store = store;\r\n\r\n// 公共组件\r\nimport headerBar from './components/header.vue'\r\nVue.component('header-bar', headerBar)\r\n\r\n\r\n//请求加载组件\r\nimport requestLoading from './components/jjjloading.vue';\r\n\r\n//组件挂载到全局，方便每个页面使用\r\nVue.component('request-loading', requestLoading);\r\n\r\n/*底部数据*/\r\nimport tabBar from \"@/components/tabbar/footTabbar.vue\"\r\nVue.component('tabBar', tabBar)\r\nVue.prototype.footTabberData = {\r\n\tactive: 'home'\r\n};\r\n\r\nVue.prototype.$fire = new onfire()\r\n\r\nVue.config.productionTip = false\r\n\r\nApp.mpType = 'app'\r\n\r\nVue.prototype.config = config\r\n\r\nconst app = new Vue({\r\n\t...App\r\n})\r\napp.$mount()\r\n\r\n\r\n\r\nVue.prototype.websiteUrl = config.app_url;\r\nVue.prototype.app_id = config.app_id;\r\n//h5发布路径\r\nVue.prototype.h5_addr = config.h5_addr;\r\n/*页面跳转*/\r\nVue.prototype.gotoPage = gotopage;\r\nVue.prototype.font_url = config.font_url;\r\n\r\n\r\nVue.prototype.points_name = function(e) {\r\n\tif (!e) {\r\n\t\treturn store.state.points_name;\r\n\t} else {\r\n\t\tlet re = new RegExp(\"积分\", \"g\");\r\n\t\treturn e.replace(re, store.state.points_name);\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//是否是ios\r\nVue.prototype.ios = function() {\r\n\tconst u = navigator.userAgent.toLowerCase();\r\n\tif (u.indexOf(\"like mac os x\") < 0 || u.match(/MicroMessenger/i) != 'micromessenger') {\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n};\r\n\r\n//get请求\r\nVue.prototype._get = function(path, data, success, fail, complete) {\r\n\tdata = data || {};\r\n\tdata.token = uni.getStorageSync('token') || '';\r\n\tdata.app_id = this.getAppId();\r\n\tuni.request({\r\n\t\turl: this.websiteUrl + '/index.php/api/' + path,\r\n\t\tdata: data,\r\n\t\tdataType: 'json',\r\n\t\tmethod: 'GET',\r\n\t\tsuccess: (res) => {\r\n\t\t\tif (res.statusCode !== 200 || typeof res.data !== 'object') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (res.data.code === -2) {\r\n\t\t\t\tthis.showError(res.data.msg, function() {\r\n\t\t\t\t\tuni.removeStorageSync('token');\r\n\t\t\t\t\tthis.gotoPage('/pages/index/index', 'reLaunch');\r\n\t\t\t\t})\r\n\t\t\t} else if (res.data.code === -1) {\r\n\t\t\t\t// 登录态失效, 重新登录\r\n\t\t\t\tconsole.log('登录态失效, 重新登录');\r\n\t\t\t\tthis.doLogin();\r\n\t\t\t} else if (res.data.code === 0) {\r\n\t\t\t\tthis.showError(res.data.msg, function() {\r\n\t\t\t\t\tfail && fail(res);\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tsuccess && success(res.data);\r\n\t\t\t}\r\n\t\t},\r\n\t\tfail: (res) => {\r\n\t\t\tfail && fail(res);\r\n\t\t},\r\n\t\tcomplete: (res) => {\r\n\t\t\tuni.hideLoading();\r\n\t\t\tcomplete && complete(res);\r\n\t\t},\r\n\t});\r\n};\r\n\r\n//get请求\r\nVue.prototype._post = function(path, data, success, fail, complete) {\r\n\tdata = data || {};\r\n\tdata.token = uni.getStorageSync('token') || '';\r\n\tdata.app_id = this.getAppId();\r\n\tuni.request({\r\n\t\turl: this.websiteUrl + '/index.php/api/' + path,\r\n\t\tdata: data,\r\n\t\tdataType: 'json',\r\n\t\tmethod: 'POST',\r\n\t\theader: {\r\n\t\t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t},\r\n\t\tsuccess: (res) => {\r\n\t\t\tif (res.statusCode !== 200 || typeof res.data !== 'object') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (res.data.code === -1) {\r\n\t\t\t\t// 登录态失效, 重新登录\r\n\t\t\t\tconsole.log('登录态失效, 重新登录');\r\n\t\t\t\tthis.doLogin();\r\n\t\t\t} else if (res.data.code === 0) {\r\n\t\t\t\tthis.showError(res.data.msg, function() {\r\n\t\t\t\t\tfail && fail(res);\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tsuccess && success(res.data);\r\n\t\t\t}\r\n\t\t},\r\n\t\tfail: (res) => {\r\n\t\t\tfail && fail(res);\r\n\t\t},\r\n\t\tcomplete: (res) => {\r\n\t\t\tuni.hideLoading();\r\n\t\t\tcomplete && complete(res);\r\n\t\t},\r\n\t});\r\n};\r\n\r\nVue.prototype.doLogin = function() {\r\n\tlet pages = getCurrentPages();\r\n\tif (pages.length) {\r\n\t\tlet currentPage = pages[pages.length - 1];\r\n\t\tif (\"pages/login/login\" != currentPage.route &&\r\n\t\t\t\"pages/login/weblogin\" != currentPage.route &&\r\n\t\t\t\"pages/login/openlogin\" != currentPage.route) {\r\n\t\t\tuni.setStorageSync(\"currentPage\", currentPage.route);\r\n\t\t\tuni.setStorageSync(\"currentPageOptions\", currentPage.options);\r\n\t\t}\r\n\t}\r\n\tconsole.log('app_ID=' + this.getAppId())\r\n\t//公众号\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t// 非公众号,跳转授权页面\r\n\r\n\tthis.gotoPage(\"/pages/login/login\");\r\n\r\n};\r\n\r\n\r\n/**\r\n * 显示失败提示框\r\n */\r\nVue.prototype.showError = function(msg, callback) {\r\n\tuni.showModal({\r\n\t\ttitle: '友情提示',\r\n\t\tcontent: msg,\r\n\t\tshowCancel: false,\r\n\t\tsuccess: function(res) {\r\n\t\t\tcallback && callback();\r\n\t\t}\r\n\t});\r\n};\r\n\r\n/**\r\n * 显示失败提示框\r\n */\r\nVue.prototype.showSuccess = function(msg, callback) {\r\n\tuni.showModal({\r\n\t\ttitle: '友情提示',\r\n\t\tcontent: msg,\r\n\t\tshowCancel: false,\r\n\t\tsuccess: function(res) {\r\n\t\t\tcallback && callback();\r\n\t\t}\r\n\t});\r\n};\r\n\r\n/**\r\n * 获取应用ID\r\n */\r\nVue.prototype.getAppId = function() {\r\n\treturn this.app_id || 10001;\r\n};\r\n\r\nVue.prototype.compareVersion = function(v1, v2) {\r\n\tv1 = v1.split('.')\r\n\tv2 = v2.split('.')\r\n\tconst len = Math.max(v1.length, v2.length)\r\n\r\n\twhile (v1.length < len) {\r\n\t\tv1.push('0')\r\n\t}\r\n\twhile (v2.length < len) {\r\n\t\tv2.push('0')\r\n\t}\r\n\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tconst num1 = parseInt(v1[i])\r\n\t\tconst num2 = parseInt(v2[i])\r\n\r\n\t\tif (num1 > num2) {\r\n\t\t\treturn 1\r\n\t\t} else if (num1 < num2) {\r\n\t\t\treturn -1\r\n\t\t}\r\n\t}\r\n\r\n\treturn 0\r\n};\r\n\r\n\r\n/**\r\n * 生成转发的url参数\r\n */\r\nVue.prototype.getShareUrlParams = function(params) {\r\n\tlet self = this;\r\n\treturn utils.urlEncode(Object.assign({\r\n\t\treferee_id: self.getUserId(),\r\n\t\tapp_id: self.getAppId()\r\n\t}, params));\r\n};\r\n\r\n/**\r\n * 当前用户id\r\n */\r\nVue.prototype.getUserId = function() {\r\n\treturn uni.getStorageSync('user_id');\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * 获取当前平台\r\n */\r\nVue.prototype.getPlatform = function(params) {\r\n\tlet platform = 'wx';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\treturn platform;\r\n};\r\n\r\n/**\r\n * 订阅通知,目前仅小程序\r\n */\r\nVue.prototype.subMessage = function(temlIds, callback) {\r\n\tlet self = this;\r\n\r\n\t//小程序订阅消息\r\n\tconst version = wx.getSystemInfoSync().SDKVersion;\r\n\tif (temlIds && temlIds.length != 0 && self.compareVersion(version, '2.8.2') >= 0) {\r\n\t\twx.requestSubscribeMessage({\r\n\t\t\ttmplIds: temlIds,\r\n\t\t\tsuccess(res) {},\r\n\t\t\tfail(res) {},\r\n\t\t\tcomplete(res) {\r\n\t\t\t\tcallback();\r\n\t\t\t},\r\n\t\t});\r\n\t} else {\r\n\t\tcallback();\r\n\t}\r\n\r\n\r\n\r\n\r\n};\r\n\r\nVue.prototype.isWeixin = function() {\r\n\tvar ua = navigator.userAgent.toLowerCase();\r\n\tif (ua.match(/MicroMessenger/i) == \"micromessenger\") {\r\n\t\treturn true;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\n/**\r\n * 获取访客\r\n */\r\nVue.prototype.getVisitcode = function() {\r\n\tlet visitcode = uni.getStorageSync('visitcode');\r\n\tif (!visitcode) {\r\n\t\tvisitcode = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n\t\t\tvar r = Math.random() * 16 | 0,\r\n\t\t\t\tv = c == 'x' ? r : (r & 0x3 | 0x8);\r\n\t\t\treturn v.toString(16);\r\n\t\t});\r\n\t\tvisitcode = visitcode.replace(/-/g, \"\");\r\n\t\tuni.setStorageSync('visitcode', visitcode);\r\n\t}\r\n\r\n\treturn visitcode;\r\n};\r\n\r\nVue.prototype.topBarTop = function() {\r\n\r\n\treturn uni.getMenuButtonBoundingClientRect().top;\r\n\r\n\r\n\r\n\r\n\r\n};\r\nVue.prototype.topBarHeight = function() {\r\n\r\n\treturn uni.getMenuButtonBoundingClientRect().height;\r\n\r\n\r\n\r\n\r\n};\r\nVue.prototype.yulan = function(e, i) {\r\n\tlet image_path_arr = [];\r\n\tif (!Array.isArray(e)) {\r\n\t\timage_path_arr = [e];\r\n\t} else {\r\n\t\tif (e[0].file_path) {\r\n\t\t\te.forEach((item, index) => {\r\n\t\t\t\timage_path_arr.push(item.file_path)\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\timage_path_arr = e\r\n\t\t}\r\n\t}\r\n\tlet picnum = i * 1;\r\n\tuni.previewImage({\r\n\t\turls: image_path_arr,\r\n\t\tcurrent: picnum,\r\n\t\tindicator: 'default',\r\n\t});\r\n}\r\nVue.prototype.theme = function() {\r\n\treturn 'theme' + this.$store.state.theme || ''\r\n}\r\nVue.prototype.footTab = function() {\r\n\treturn this.$store.state.footTab || ''\r\n}\r\n/* 小数点截取 */\r\nVue.prototype.subPrice = function(str, val) {\r\n\tlet strs = String(str);\r\n\tif (val == 1) {\r\n\t\treturn strs.substring(0, strs.indexOf(\".\"));\r\n\t} else if (val == 2) {\r\n\t\tlet indof = strs.indexOf(\".\");\r\n\t\treturn strs.slice(indof + 1, indof + 3);\r\n\t}\r\n}\r\n/*转两位数*/\r\nVue.prototype.convertTwo = function(n) {\r\n\tlet str = '';\r\n\tif (n < 10) {\r\n\t\tstr = '0' + n;\r\n\t} else {\r\n\t\tstr = n;\r\n\t}\r\n\treturn str;\r\n}\r\nVue.prototype.getTabBarLinks = function() {\r\n\tlet vars = uni.getStorageSync('TabBar');\r\n\tlet theme = uni.getStorageSync('theme');\r\n\tif(vars != null && vars != ''){\r\n\t\tthis.setTabBarLinks(vars, theme);\r\n\t}else{\r\n\t\tuni.request({\r\n\t\t\turl: this.config.app_url + '/index.php/api/index/nav',\r\n\t\t\tdata: {\r\n\t\t\t\tapp_id: this.config.app_id\r\n\t\t\t},\r\n\t\t\tsuccess: (result) => {\r\n\t\t\t\tlet vars = result.data.data.vars.data;\r\n\t\t\t\tlet theme = result.data.data.theme.theme;\r\n\t\t\t\tthis.$store.commit('changeTheme', theme);\r\n\t\t\t\tuni.setStorageSync('TabBar', vars);\r\n\t\t\t\tuni.setStorageSync('theme', theme);\r\n\t\t\t\tthis.setTabBarLinks(vars, theme);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nVue.prototype.setTabBarLinks = function(vars, theme){\r\n\tif (vars.is_auto == '0') {\r\n\t\tuni.showTabBar();\r\n\t\tvars.list = [];\r\n\t\tlet color = ['#ff5704', '#19ad57', '#ffcc00', '#1774ff', '#e4e4e4', '#c8ba97',\r\n\t\t\t'#623ceb'\r\n\t\t]\r\n\t\tuni.setTabBarStyle({\r\n\t\t\tcolor: '#333333',\r\n\t\t\tselectedColor: color[theme],\r\n\t\t})\r\n\t\tuni.setTabBarItem({\r\n\t\t\tindex: 0,\r\n\t\t\ttext: '首页',\r\n\t\t\ticonPath: 'static/tabbar/home.png',\r\n\t\t\tselectedIconPath: 'static/tabbar/home_' + theme + '.png'\r\n\t\t})\r\n\t\tuni.setTabBarItem({\r\n\t\t\tindex: 1,\r\n\t\t\ttext: '分类',\r\n\t\t\ticonPath: 'static/tabbar/category.png',\r\n\t\t\tselectedIconPath: 'static/tabbar/category_' + theme + '.png'\r\n\t\t})\r\n\t\tuni.setTabBarItem({\r\n\t\t\tindex: 2,\r\n\t\t\ttext: '店铺',\r\n\t\t\ticonPath: 'static/tabbar/shop.png',\r\n\t\t\tselectedIconPath: 'static/tabbar/shop_' + theme + '.png'\r\n\t\t})\r\n\t\tuni.setTabBarItem({\r\n\t\t\tindex: 3,\r\n\t\t\ttext: '购物车',\r\n\t\t\ticonPath: 'static/tabbar/cart.png',\r\n\t\t\tselectedIconPath: 'static/tabbar/cart_' + theme + '.png'\r\n\t\t})\r\n\t\tuni.setTabBarItem({\r\n\t\t\tindex: 4,\r\n\t\t\ttext: '我的',\r\n\t\t\ticonPath: 'static/tabbar/user.png',\r\n\t\t\tselectedIconPath: 'static/tabbar/user_' + theme + '.png'\r\n\t\t})\r\n\t} else {\r\n\t\tuni.hideTabBar();\r\n\t}\r\n}\r\nVue.prototype.getThemeColor = function() {\r\n\tlet theme = this.$store.state.theme;\r\n\tlet color = ['#ff5704', '#19ad57', '#ffcc00', '#1774ff', '#e4e4e4', '#c8ba97', '#623ceb'];\r\n\treturn color[theme]\r\n}","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","<script>\r\nimport utils from './common/utils.js';\r\nimport config from './config.js';\r\nexport default {\r\n\tonLaunch: function(e) {\r\n\t\tconsole.log('App Launch');\r\n\t\t// 隐私政策\r\n\t\t// #ifdef APP-PLUS\r\n\t\tthis.isFirstEnter();\r\n\t\t// #endif\r\n\t\t//#ifdef MP-WEIXIN\r\n\t\t//检查更新\r\n\t\tthis.updateManager();\r\n\t\t//#endif\r\n\t\tlet self = this;\r\n\t\t// #ifdef APP-PLUS\r\n\t\tplus.runtime.getProperty(plus.runtime.appid, function(widgetInfo) {\r\n\t\t\tconsole.log('------------------------------');\r\n\t\t\tuni.request({\r\n\t\t\t\turl: config.app_url + '/index.php/api/index/update',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tversion: widgetInfo.version,\r\n\t\t\t\t\tname: widgetInfo.name,\r\n\t\t\t\t\tapp_id: config.app_id,\r\n\t\t\t\t\tplatform: uni.getSystemInfoSync().platform\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: data => {\r\n\t\t\t\t\tif (data.update && data.wgtUrl) {\r\n\t\t\t\t\t\tself.updateWgt(data.wgtUrl);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.update && data.pkgUrl) {\r\n\t\t\t\t\t\tplus.nativeUI.confirm(\r\n\t\t\t\t\t\t\t'有新版本更新，请点击确认更新到最新版本，以免影响使用',\r\n\t\t\t\t\t\t\tfunction(e) {\r\n\t\t\t\t\t\t\t\tif (e.index == 0) {\r\n\t\t\t\t\t\t\t\t\tplus.runtime.openURL(data.pkgUrl);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ title: '更新提示', buttons: ['确定', '取消'], verticalAlign: 'center' }\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: error => {\r\n\t\t\t\t\tconsole.log('----------------error');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\t// #endif\r\n\t\t//应用启动参数\r\n\t\tthis.onStartupScene(e.query);\r\n\t\tthis.getNav();\r\n\t},\r\n\tonShow: function() {\r\n\t\t//console.log('App Show')\r\n\t\t//#ifdef APP-PLUS\r\n\t\tgetApp().globalData.vueObj = this;\r\n\t\t//#endif\r\n\t},\r\n\tonHide: function() {\r\n\t\t//console.log('App Hide')\r\n\t},\r\n\tmethods: {\r\n\t\tisFirstEnter() {\r\n\t\t\tvar firstEnter = uni.getStorageSync('firstEnter'); //同步获取缓存中是否有首次进入字段\r\n\t\t\tlet self = this;\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess(data) {\r\n\t\t\t\t\tconsole.log('firstEnter=' + firstEnter);\r\n\t\t\t\t\t// 如果是ios并且没有firstEnter缓存则弹出模态框\r\n\t\t\t\t\tif (data.platform == 'ios' && !firstEnter) {\r\n\t\t\t\t\t\tconsole.log('---------------');\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pages/privacy/privacy'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdateManager: function() {\r\n\t\t\tconst updateManager = uni.getUpdateManager();\r\n\t\t\tupdateManager.onCheckForUpdate(function(res) {\r\n\t\t\t\t// 请求完新版本信息的回调\r\n\t\t\t\tif (res.hasUpdate) {\r\n\t\t\t\t\tupdateManager.onUpdateReady(function(res2) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '更新提示',\r\n\t\t\t\t\t\t\tcontent: '新版本已经准备好，即将重启应用',\r\n\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\tsuccess(res2) {\r\n\t\t\t\t\t\t\t\tif (res2.confirm) {\r\n\t\t\t\t\t\t\t\t\t// 新的版本已经下载好，调用 applyUpdate 应用新版本并重启\r\n\t\t\t\t\t\t\t\t\tupdateManager.applyUpdate();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tupdateManager.onUpdateFailed(function(res) {\r\n\t\t\t\t// 新的版本下载失败\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '更新提示',\r\n\t\t\t\t\tcontent: '检查到有新版本，但下载失败，请检查网络设置',\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 小程序启动场景\r\n\t\t */\r\n\t\tonStartupScene(query) {\r\n\t\t\t// 获取场景值\r\n\t\t\tlet scene = utils.getSceneData(query);\r\n\t\t\t// 记录推荐人id\r\n\t\t\tlet refereeId = query.referee_id;\r\n\t\t\tif (refereeId > 0) {\r\n\t\t\t\tif (!uni.getStorageSync('referee_id')) {\r\n\t\t\t\t\tuni.setStorageSync('referee_id', refereeId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 记录分销人id\r\n\t\t\tlet uid = scene.uid;\r\n\t\t\tif (uid > 0) {\r\n\t\t\t\tif (!uni.getStorageSync('referee_id')) {\r\n\t\t\t\t\tuni.setStorageSync('referee_id', uid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 如果是h5，设置app_id\r\n\t\t\t// #ifdef  H5\r\n\t\t\tlet appId = query.app_id;\r\n\t\t\tif (appId > 0) {\r\n\t\t\t\tuni.setStorageSync('app_id', appId);\r\n\t\t\t}\r\n\t\t\tif (uni.getStorageSync('app_id')) {\r\n\t\t\t\tthis.config.app_id = uni.getStorageSync('app_id');\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tgetNav() {\r\n\t\t\t// 如果是android不处理图标,不起作用\r\n\t\t\tuni.request({\r\n\t\t\t\turl: this.config.app_url + '/index.php/api/index/nav',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tapp_id: this.config.app_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: result => {\r\n\t\t\t\t\tlet vars = result.data.data.vars.data;\r\n\t\t\t\t\tlet theme = result.data.data.theme.theme;\r\n\t\t\t\t\tthis.$store.commit('changePoints', result.data.data.points_name);\r\n\t\t\t\t\tthis.$store.commit('changeTheme', theme);\r\n\t\t\t\t\tuni.setStorageSync('TabBar', vars);\r\n\t\t\t\t\tuni.setStorageSync('theme', theme);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdateWgt(wgtUrl) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '版本更新',\r\n\t\t\t\tcontent: '检查到有新版本，请点击更新',\r\n\t\t\t\tconfirmText: '更新',\r\n\t\t\t\tshowCancel: false,\r\n\t\t\t\tsuccess: function(e) {\r\n\t\t\t\t\tif (e.confirm) {\r\n\t\t\t\t\t\tvar dtask = plus.downloader.createDownload(wgtUrl, {}, function(d, status) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '下载完成',\r\n\t\t\t\t\t\t\t\tmask: false,\r\n\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// 下载完成\r\n\t\t\t\t\t\t\tif (status == 200) {\r\n\t\t\t\t\t\t\t\tplus.runtime.install(\r\n\t\t\t\t\t\t\t\t\td.filename,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tforce: true\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('install success...');\r\n\t\t\t\t\t\t\t\t\t\tplus.nativeUI.alert(\r\n\t\t\t\t\t\t\t\t\t\t\t'已更新至最新版本，确定后将重启应用',\r\n\t\t\t\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tplus.runtime.restart();\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t'更新提示',\r\n\t\t\t\t\t\t\t\t\t\t\t'确定'\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfunction(e) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(d.filename);\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: '安装失败-01',\r\n\t\t\t\t\t\t\t\t\t\t\tmask: false,\r\n\t\t\t\t\t\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '更新失败-02',\r\n\t\t\t\t\t\t\t\t\tmask: false,\r\n\t\t\t\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tdtask.start(); // 开启下载的任务\r\n\t\t\t\t\t\t\tvar prg = 0;\r\n\t\t\t\t\t\t\tvar showLoading = plus.nativeUI.showWaiting('正在下载'); //创建一个showWaiting对象\r\n\t\t\t\t\t\t\tdtask.addEventListener('statechanged', function(task, status) {\r\n\t\t\t\t\t\t\t\t// 给下载任务设置一个监听 并根据状态  做操作\r\n\t\t\t\t\t\t\t\tswitch (task.state) {\r\n\t\t\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\t\t\tshowLoading.setTitle('正在下载');\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t\t\tshowLoading.setTitle('已连接到服务器');\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t\t\tprg = parseInt((parseFloat(task.downloadedSize) / parseFloat(task.totalSize)) * 100);\r\n\t\t\t\t\t\t\t\t\t\tshowLoading.setTitle('  正在下载' + prg + '%  ');\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t\t\tplus.nativeUI.closeWaiting();\r\n\t\t\t\t\t\t\t\t\t\t//下载完成\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\tplus.nativeUI.closeWaiting();\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '更新失败-03',\r\n\t\t\t\t\t\t\t\tmask: false,\r\n\t\t\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//取消\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import './common/iconfont.css';\r\n@import './common/myIcon.css';\r\n/*每个页面公共css */\r\n@import './common/style.scss';\r\n</style>\n","import mod from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}