{"version":3,"sources":["webpack:///D:/working/舒服康/pages/product/detail/popup/spec.vue?5453","webpack:///D:/working/舒服康/pages/product/detail/popup/spec.vue?f39a","webpack:///D:/working/舒服康/pages/product/detail/popup/spec.vue?cbac","webpack:///D:/working/舒服康/pages/product/detail/popup/spec.vue?e76a","uni-app:///pages/product/detail/popup/spec.vue","webpack:///D:/working/舒服康/pages/product/detail/popup/spec.vue?a961"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","Visible","form","detail","show_sku","sku_image","stock","selectSpec","isOpenSpec","type","clock","props","onLoad","mounted","computed","isadd","issub","watch","isPopup","handler","select","i","str","n","deep","immediate","methods","initShowSku","selectAttr","curItem","self","items","updateSpecProduct","spec_list","skuItem","closePopup","confirmFunc","uni","title","icon","duration","addCart","product_id","total_num","spec_sku_id","createdOrder","room_id","console","url","product_num","add","sub"],"mappings":"gIAAA,oIACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,sCACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,yHAA+oB,eAAG,G,4IC+DlpB,CACAC,gBACA,OAEAC,WAEAC,MACAC,UACAC,UACAC,eAIAC,QAEAC,cAEAC,cACAC,QACAC,WAGAC,2CACAC,oBACAC,qBACAC,UAEAC,iBACA,+FAIAC,iBACA,mCAGAC,OACAC,sBACA,OACA,eACA,kBACA,4BACA,mBACA,oBAEA,wCAGA,iBACAC,sBAAA,WACA,KACAC,KAEA,GADA,cACA,GACA,IADA,eACAC,GACA,gCACA,WACAC,kCAEAC,+CACA,sCACAH,8BAPA,kCAYA,WAGAA,WAFAE,YAKA,gCAEAE,QACAC,eAGAC,SAEAC,uBACA,iEACA,gEACA,gCACA,qEACA,wGAGA,iCACA,0DACA,4DACA,yBACA,0CACA,iCACA,qEACA,iCACA,yJACA,iEACA,gDAEA,iCACA,qEACA,kEACA,yJACA,iEACA,iDAKAC,yBACA,WACA,0CACA,OACA,aACAC,aACAC,kCACA,CACA,2BACAC,gBAEAF,aACAC,mCAEA,+CACA,kCAEA,YADAA,gBAMAA,uBAIAE,6BACA,WACA,kCAEA,4BACA,wBACAC,mBAEA,0BACA,wBACA,4BAEA,oBAGA,MAGA,OAFAH,gBACAA,gBAGAA,WAEA,iCACAI,0BAIA,8BAGA,kBACAJ,qCACA,8BACAA,2CAGAA,8BACA,8BACAA,0CAGAA,8BACAA,wDACAA,kDACA,uBACAA,iDAEAA,2DAEAA,gDACA,mBACAA,8CACA,8BACAA,+CAEAA,uDACAA,8BACAA,yGACAA,qHAMAK,sBACA,6CAIAC,uBACA,4BACA,kDACA,qCAMA,YALAC,aACAC,cACAC,YACAC,eAOA,uBACA,eAEA,qBAKAC,mBACA,WACA,2BACA,sBACA,8BACA,qCAMA,OALAJ,aACAC,cACAC,YACAC,gBAEA,EAGAV,QACA,iBACA,CACAY,aACAC,YACAC,gBAEA,YACAP,aACAC,YACAE,eAEAV,gDAMAe,wBACA,kCACA,yBACA,iCACA,KACA,mCACAC,4BAEAC,eACA,4GACA,8BACA,mCACA,qDACA,sCAEAC,EACA,yCACAN,EACA,gBACAO,EACA,mBACAL,EACA,2BACAV,yBACA,uBACAA,qBACA,sBAEA,mCACA,4DACA,sCAEAc,EACA,iDACAd,qBACA,gBACAe,EACA,mBACAf,yBACA,2BACAA,yBACA,uBAGA,kBAIAgB,eACA,oBAGA,2CACAb,aACAC,gBACAC,YACAC,gBAEA,GAEA,kFACAH,aACAC,kBACAC,YACAC,gBAEA,QAEA,0BAIAW,eACA,oBAGA,iCACAd,aACAC,iBACAC,YACAC,gBAEA,QAEA,4BAGA,c,6DCzZA,yHAAktC,eAAG,G","file":"pages/product/detail/popup/spec.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./spec.vue?vue&type=template&id=0fd54a73&\"\nvar renderjs\nimport script from \"./spec.vue?vue&type=script&lang=js&\"\nexport * from \"./spec.vue?vue&type=script&lang=js&\"\nimport style0 from \"./spec.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/product/detail/popup/spec.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./spec.vue?vue&type=template&id=0fd54a73&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./spec.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./spec.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view :class=\"Visible ? 'product-popup open' : 'product-popup close'\" @touchmove.stop.prevent=\"\" @click=\"closePopup\">\r\n\t\t<view class=\"popup-bg\"></view>\r\n\t\t<view class=\"main\" v-on:click.stop>\r\n\t\t\t<view class=\"header\">\r\n\t\t\t\t<image :src=\"form.show_sku.sku_image\" mode=\"aspectFit\" class=\"avt\"></image>\r\n\t\t\t\t<view class=\"price\">\r\n\t\t\t\t\t¥\r\n\t\t\t\t\t<text class=\"num\">{{ form.show_sku.product_price }}</text>\r\n\t\t\t\t\t<text class=\"old-price\" v-if=\"form.show_sku.line_price\">¥{{ form.show_sku.line_price }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stock\">库存：{{ form.show_sku.stock_num }}</view>\r\n\t\t\t\t<view class=\"select_spec\">{{ selectSpec }}</view>\r\n\t\t\t\t<view class=\"close-btn\" @click=\"closePopup\"><text class=\"icon iconfont icon-guanbi\"></text></view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"body\">\r\n\t\t\t\t<!--规格-->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<scroll-view scroll-y=\"true\" class=\"specs mt20\" style=\"max-height: 600rpx;\" v-if=\"form.specData != null\">\r\n\t\t\t\t\t\t<view class=\"specs mt20\" v-for=\"(item_attr, attr_index) in form.specData.spec_attr\" :key=\"attr_index\">\r\n\t\t\t\t\t\t\t<view class=\"specs-hd p-20-0\">\r\n\t\t\t\t\t\t\t\t<text class=\"f26 gray3\">{{ item_attr.group_name }}</text>\r\n\t\t\t\t\t\t\t\t<!-- \t\t\t\t\t\t\t<text class=\"ml10 red\" v-if=\"form.productSpecArr[attr_index]==null\">\r\n\t\t\t\t\t\t\t\t请选择{{item_attr.group_name}}\r\n\t\t\t\t\t\t\t</text> -->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"specs-list\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t:class=\"item.checked ? 'btn-checked' : 'btn-checke'\"\r\n\t\t\t\t\t\t\t\t\tv-for=\"(item, item_index) in item_attr.spec_items\"\r\n\t\t\t\t\t\t\t\t\t:key=\"item_index\"\r\n\t\t\t\t\t\t\t\t\t@click=\"selectAttr(attr_index, item_index)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{{ item.spec_value }}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!--选择数量-->\r\n\t\t\t\t<view class=\"level-box count_choose\">\r\n\t\t\t\t\t<text class=\"key\">数量</text>\r\n\t\t\t\t\t<view class=\"d-s-c\">\r\n\t\t\t\t\t\t<view class=\"icon-box minus d-c-c\" @click=\"sub()\" :class=\"{ 'num-wrap': !issub }\">\r\n\t\t\t\t\t\t\t<text class=\"icon iconfont icon-jian\" style=\"font-size: 20rpx;color: #333333;\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"text-wrap\"><input type=\"text\" v-model=\"form.show_sku.sum\" value=\"\" /></view>\r\n\t\t\t\t\t\t<view class=\"icon-box plus d-c-c\" :class=\"{ 'num-wrap': !isadd }\" @click=\"add()\">\r\n\t\t\t\t\t\t\t<text class=\"icon iconfont icon-jia\" style=\"font-size: 20rpx;color: #333333;\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"btns\">\r\n\t\t\t\t<button class=\"confirm-btn\" v-if=\"!clock\" @click=\"confirmFunc(form)\">确认</button>\r\n\t\t\t\t<button class=\"confirm-btn\" v-else>暂无库存</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t/*是否可见*/\r\n\t\t\tVisible: false,\r\n\t\t\t/*表单对象*/\r\n\t\t\tform: {\r\n\t\t\t\tdetail: {},\r\n\t\t\t\tshow_sku: {\r\n\t\t\t\t\tsku_image: ''\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*当前商品总库存*/\r\n\t\t\tstock: 0,\r\n\t\t\t/*选择提示*/\r\n\t\t\tselectSpec: '',\r\n\t\t\t/*是否打开过多规格选择框*/\r\n\t\t\tisOpenSpec: false,\r\n\t\t\ttype: '',\r\n\t\t\tclock: false\r\n\t\t};\r\n\t},\r\n\tprops: ['isPopup', 'productModel','room_id'],\r\n\tonLoad() {},\r\n\tmounted() {},\r\n\tcomputed: {\r\n\t\t/*判断增加数量*/\r\n\t\tisadd: function() {\r\n\t\t\treturn this.form.show_sku.sum >= this.stock || this.form.show_sku.sum >= this.form.detail.limit_num;\r\n\t\t},\r\n\r\n\t\t/*判断减少数量*/\r\n\t\tissub: function() {\r\n\t\t\treturn this.form.show_sku.sum <= 1;\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tisPopup: function(n, o) {\r\n\t\t\tif (n != o) {\r\n\t\t\t\tthis.Visible = n;\r\n\t\t\t\tif (!this.isOpenSpec) {\r\n\t\t\t\t\tthis.form = this.productModel;\r\n\t\t\t\t\tthis.isOpenSpec = true;\r\n\t\t\t\t\tthis.initShowSku();\r\n\t\t\t\t}\r\n\t\t\t\tthis.form.type = this.productModel.type;\r\n\t\t\t}\r\n\t\t},\r\n\t\t'form.specData': {\r\n\t\t\thandler(n, o) {\r\n\t\t\t\tlet str = '',\r\n\t\t\t\t\tselect = '';\r\n\t\t\t\tthis.isAll = true;\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tfor (let i = 0; i < n.spec_attr.length; i++) {\r\n\t\t\t\t\t\tif (this.form.productSpecArr[i] == null) {\r\n\t\t\t\t\t\t\tthis.isAll = false;\r\n\t\t\t\t\t\t\tstr += n.spec_attr[i].group_name + ' ';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tn.spec_attr[i].spec_items.forEach(item => {\r\n\t\t\t\t\t\t\t\tif (this.form.productSpecArr[i] == item.item_id) {\r\n\t\t\t\t\t\t\t\t\tselect += '\"' + item.spec_value + '\" ';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!this.isAll) {\r\n\t\t\t\t\t\tstr = '请选择: ' + str;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tselect = '已选: ' + select;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.selectSpec = this.isAll ? select : str;\r\n\t\t\t},\r\n\t\t\tdeep: true,\r\n\t\t\timmediate: true\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t/*初始化*/\r\n\t\tinitShowSku() {\r\n\t\t\tthis.form.show_sku.sku_image = this.form.detail.image[0].file_path;\r\n\t\t\tthis.form.show_sku.product_price = this.form.detail.product_price;\r\n\t\t\tif (this.form.detail.spec_type == 20) {\r\n\t\t\t\tif (this.form.detail.product_price != this.form.detail.product_max_price) {\r\n\t\t\t\t\tthis.form.show_sku.product_price = this.form.detail.product_price + '-' + this.form.detail.product_max_price;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.form.show_sku.spec_sku_id = 0;\r\n\t\t\tthis.form.show_sku.line_price = this.form.detail.line_price;\r\n\t\t\tthis.form.show_sku.stock_num = this.form.detail.product_stock;\r\n\t\t\tthis.form.show_sku.sum = 1;\r\n\t\t\tthis.stock = this.form.detail.product_stock;\r\n\t\t\tif (this.form.plus_name == 'advance') {\r\n\t\t\t\tthis.form.show_sku.product_price = this.form.plus_sku[0].product_price;\r\n\t\t\t\tthis.form.show_sku.line_price = '';\r\n\t\t\t\tthis.form.show_sku.sku_image = this.form.plus_sku[0].productSku.image ? this.form.plus_sku[0].productSku.image.file_path : this.form.detail.image[0].file_path;\r\n\t\t\t\tthis.form.show_sku.stock_num = this.form.plus_sku[0].advance_stock;\r\n\t\t\t\tthis.stock = this.form.plus_sku[0].advance_stock;\r\n\t\t\t}\r\n\t\t\tif (this.form.plus_name == 'seckill') {\r\n\t\t\t\tthis.form.show_sku.product_price = this.form.plus_sku[0].seckill_price;\r\n\t\t\t\tthis.form.show_sku.line_price = this.form.plus_sku[0].product_price;\r\n\t\t\t\tthis.form.show_sku.sku_image = this.form.plus_sku[0].productSku.image ? this.form.plus_sku[0].productSku.image.file_path : this.form.detail.image[0].file_path;\r\n\t\t\t\tthis.form.show_sku.stock_num = this.form.plus_sku[0].seckill_stock;\r\n\t\t\t\tthis.stock = this.form.plus_sku[0].seckill_stock;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/*选择属性*/\r\n\t\tselectAttr(attr_index, item_index) {\r\n\t\t\tlet self = this;\r\n\t\t\tlet items = self.form.specData.spec_attr[attr_index].spec_items;\r\n\t\t\tlet curItem = items[item_index];\r\n\t\t\tif (curItem.checked) {\r\n\t\t\t\tcurItem.checked = false;\r\n\t\t\t\tself.form.productSpecArr[attr_index] = null;\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\t\t\titems[i].checked = false;\r\n\t\t\t\t}\r\n\t\t\t\tcurItem.checked = true;\r\n\t\t\t\tself.form.productSpecArr[attr_index] = curItem.item_id;\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < self.form.productSpecArr.length; i++) {\r\n\t\t\t\tif (self.form.productSpecArr[i] == null) {\r\n\t\t\t\t\tself.initShowSku();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 更新商品规格信息\r\n\t\t\tself.updateSpecProduct();\r\n\t\t},\r\n\r\n\t\t/*更新商品规格信息*/\r\n\t\tupdateSpecProduct() {\r\n\t\t\tlet self = this;\r\n\t\t\tlet specSkuId = self.form.productSpecArr.join('_');\r\n\t\t\t// 查找skuItem\r\n\t\t\tlet spec_list = self.form.specData.spec_list;\r\n\t\t\tif (self.form.plus_sku != null) {\r\n\t\t\t\tspec_list = self.form.plus_sku;\r\n\t\t\t}\r\n\t\t\tlet skuItem = spec_list.find(val => {\r\n\t\t\t\tif (self.form.plus_name) {\r\n\t\t\t\t\treturn val.productSku.spec_sku_id == specSkuId;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn val.spec_sku_id == specSkuId;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (!skuItem) {\r\n\t\t\t\tself.clock = true;\r\n\t\t\t\tself.initShowSku();\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tself.clock = false;\r\n\t\t\t}\r\n\t\t\tif (self.form.plus_name&& !skuItem.spec_form) {\r\n\t\t\t\tskuItem.spec_form = skuItem.productSku;\r\n\t\t\t}\r\n\t\t\t// 记录spec_sku_id\r\n\t\t\t// 更新商品价格、划线价、库存\r\n\t\t\tif (typeof skuItem === 'object') {\r\n\t\t\t\t/*保存当前规格*/\r\n\r\n\t\t\t\tif (self.form.plus_name) {\r\n\t\t\t\t\tself.stock = skuItem[self.form.plus_name + '_stock'];\r\n\t\t\t\t\tif (self.form.show_sku.sum > self.stock) {\r\n\t\t\t\t\t\tself.form.show_sku.sum = self.stock > 0 ? self.stock : 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.stock = skuItem.spec_form.stock_num;\r\n\t\t\t\t\tif (self.form.show_sku.sum > self.stock) {\r\n\t\t\t\t\t\tself.form.show_sku.sum = self.stock > 0 ? self.stock : 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.form.show_sku.spec_sku_id = specSkuId;\r\n\t\t\t\tself.form.show_sku.product_price = skuItem.spec_form.product_price;\r\n\t\t\t\tself.form.show_sku.line_price = skuItem.spec_form.line_price;\r\n\t\t\t\tif (skuItem.spec_form.image_id > 0) {\r\n\t\t\t\t\tself.form.show_sku.sku_image = skuItem.spec_form.image_path;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.form.show_sku.sku_image = self.form.detail.image[0].file_path;\r\n\t\t\t\t}\r\n\t\t\t\tself.form.show_sku.stock_num = skuItem.spec_form.stock_num;\r\n\t\t\t\tif (self.form.plus_name) {\r\n\t\t\t\t\tself.form.show_sku.product_price = skuItem.product_price;\r\n\t\t\t\t\tif (self.form.plus_name == 'seckill') {\r\n\t\t\t\t\t\tself.form.show_sku.product_price = skuItem.seckill_price;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.form.show_sku.stock_num = skuItem[self.form.plus_name + '_stock'];\r\n\t\t\t\t\tself.form.show_sku.line_price = '';\r\n\t\t\t\t\tself.form.show_sku.sku_image = skuItem.spec_form.image?skuItem.spec_form.image.file_path : self.form.detail.image[0].file_path;\r\n\t\t\t\t\tself.form.show_sku.advance_product_id = skuItem.spec_form.image?skuItem.spec_form.image.file_path : self.form.detail.image[0].file_path\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/*关闭弹窗*/\r\n\t\tclosePopup() {\r\n\t\t\tthis.$emit('close', this.form.specData, null);\r\n\t\t},\r\n\r\n\t\t/*确认提交*/\r\n\t\tconfirmFunc() {\r\n\t\t\tif (this.form.specData != null) {\r\n\t\t\t\tfor (let i = 0; i < this.form.productSpecArr.length; i++) {\r\n\t\t\t\t\tif (this.form.productSpecArr[i] == null) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '请选择规格',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.form.type == 'card') {\r\n\t\t\t\tthis.addCart();\r\n\t\t\t} else {\r\n\t\t\t\tthis.createdOrder();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/*加入购物车*/\r\n\t\taddCart() {\r\n\t\t\tlet self = this;\r\n\t\t\tlet product_id = self.form.detail.product_id;\r\n\t\t\tlet total_num = self.form.show_sku.sum;\r\n\t\t\tlet spec_sku_id = self.form.show_sku.spec_sku_id;\r\n\t\t\tif (self.form.detail.spec_type == 20 && spec_sku_id == 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请选择属性',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tself._post(\r\n\t\t\t\t'order.cart/add',\r\n\t\t\t\t{\r\n\t\t\t\t\tproduct_id: product_id,\r\n\t\t\t\t\ttotal_num: total_num,\r\n\t\t\t\t\tspec_sku_id: spec_sku_id\r\n\t\t\t\t},\r\n\t\t\t\tfunction(res) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\tself.$emit('close', null, res.data.cart_total_num);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\t/*创建订单*/\r\n\t\tcreatedOrder() {\r\n\t\t\tlet product_id = this.form.detail.product_id;\r\n\t\t\tlet product_num = this.form.show_sku.sum;\r\n\t\t\tlet spec_sku_id = this.form.show_sku.spec_sku_id;\r\n\t\t\tlet room_id = '';\r\n\t\t\tif ((this.room_id != 0) & (this.room_id != '')) {\r\n\t\t\t\troom_id = '&room_id=' + this.room_id;\r\n\t\t\t}\r\n\t\t\tconsole.log(room_id)\r\n\t\t\tlet url = '/pages/order/confirm-order?product_id=' + product_id + '&product_num=' + product_num + '&product_sku_id=' + spec_sku_id + '&order_type=buy' + room_id;\r\n\t\t\tif (this.form.type == 'deposit') {\r\n\t\t\t\tif (this.form.plus_name == 'advance') {\r\n\t\t\t\t\tlet skuItem = this.form.detail.advance.sku.find(val => {\r\n\t\t\t\t\t\treturn val.productSku.spec_sku_id == spec_sku_id;\r\n\t\t\t\t\t});\r\n\t\t\t\t\turl =\r\n\t\t\t\t\t\t'/pages/order/confirm-order?product_id=' +\r\n\t\t\t\t\t\tproduct_id +\r\n\t\t\t\t\t\t'&product_num=' +\r\n\t\t\t\t\t\tproduct_num +\r\n\t\t\t\t\t\t'&product_sku_id=' +\r\n\t\t\t\t\t\tspec_sku_id +\r\n\t\t\t\t\t\t'&advance_product_sku_id=' +\r\n\t\t\t\t\t\tskuItem.advance_product_sku_id +\r\n\t\t\t\t\t\t'&advance_product_id=' +\r\n\t\t\t\t\t\tskuItem.advance_product_id +\r\n\t\t\t\t\t\t'&order_type=deposit';\r\n\t\t\t\t}\r\n\t\t\t\tif (this.form.plus_name == 'seckill') {\r\n\t\t\t\t\tlet skuItem = this.form.detail.secKill.seckillSku.find(val => {\r\n\t\t\t\t\t\treturn val.productSku.spec_sku_id == spec_sku_id;\r\n\t\t\t\t\t});\r\n\t\t\t\t\turl =\r\n\t\t\t\t\t\t'/pages/order/confirm-order?seckill_product_id=' +\r\n\t\t\t\t\t\tskuItem.seckill_product_id +\r\n\t\t\t\t\t\t'&product_num=' +\r\n\t\t\t\t\t\tproduct_num +\r\n\t\t\t\t\t\t'&product_sku_id=' +\r\n\t\t\t\t\t\tskuItem.productSku.spec_sku_id +\r\n\t\t\t\t\t\t'&seckill_product_sku_id=' +\r\n\t\t\t\t\t\tskuItem.seckill_product_sku_id +\r\n\t\t\t\t\t\t'&order_type=seckill';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.gotoPage(url);\r\n\t\t},\r\n\r\n\t\t/*商品增加*/\r\n\t\tadd() {\r\n\t\t\tif (this.stock <= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.form.show_sku.sum >= this.stock) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '数量超过了库存',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (this.form.detail.limit_num > 0 && this.form.show_sku.sum >= this.form.detail.limit_num) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '数量超过了限购数量',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.form.show_sku.sum++;\r\n\t\t},\r\n\r\n\t\t/*商品减少*/\r\n\t\tsub() {\r\n\t\t\tif (this.stock <= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.form.show_sku.sum < 2) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '商品数量至少为1',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.form.show_sku.sum--;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.product-popup {\r\n}\r\n\r\n.product-popup .popup-bg {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tbackground: rgba(0, 0, 0, 0.6);\r\n\tz-index: 99;\r\n}\r\n\r\n.product-popup .main {\r\n\tposition: fixed;\r\n\twidth: 100%;\r\n\tbottom: 0;\r\n\t// min-height: 200rpx;\r\n\t// max-height: 1050rpx;\r\n\tbackground-color: #fff;\r\n\ttransform: translate3d(0, 980rpx, 0);\r\n\ttransition: transform 0.2s cubic-bezier(0, 0, 0.25, 1);\r\n\tbox-sizing: border-box;\r\n\tpadding-bottom: env(safe-area-inset-bottom);\r\n\tz-index: 99;\r\n\tborder-radius: 12rpx;\r\n}\r\n\r\n.product-popup.open .main {\r\n\ttransform: translate3d(0, 0, 0);\r\n\tz-index: 99;\r\n}\r\n\r\n.product-popup.close .popup-bg {\r\n\tdisplay: none;\r\n}\r\n\r\n.product-popup.close .main {\r\n\tdisplay: none;\r\n\tz-index: -1;\r\n}\r\n\r\n.product-popup .header {\r\n\theight: 200rpx;\r\n\tpadding: 40rpx 0 10rpx 250rpx;\r\n\tposition: relative;\r\n\tborder-bottom: 1px solid #eeeeee;\r\n}\r\n\r\n.product-popup .header .avt {\r\n\tposition: absolute;\r\n\ttop: 40rpx;\r\n\tleft: 30rpx;\r\n\twidth: 180rpx;\r\n\theight: 180rpx;\r\n\tborder: 2px solid #ffffff;\r\n\tbackground: #ffffff;\r\n\tborder-radius: 12rpx;\r\n}\r\n\r\n.product-popup .header .stock {\r\n\tfont-size: 26rpx;\r\n\tcolor: #999999;\r\n}\r\n\r\n.product-popup .close-btn {\r\n\tposition: absolute;\r\n\twidth: 40rpx;\r\n\theight: 40rpx;\r\n\ttop: 40rpx;\r\n\tright: 30rpx;\r\n}\r\n\r\n.product-popup .price {\r\n\t@include font_color('price_color');\r\n\tfont-size: 24rpx;\r\n}\r\n\r\n.product-popup .price .num {\r\n\tpadding: 0 4rpx;\r\n\tfont-size: 40rpx;\r\n}\r\n\r\n.product-popup .old-price {\r\n\tmargin-left: 10rpx;\r\n\tfont-size: 26rpx;\r\n\tcolor: #999999;\r\n\ttext-decoration: line-through;\r\n}\r\n\r\n.product-popup .body {\r\n\tpadding: 20rpx 30rpx 39rpx 30rpx;\r\n\t// max-height: 600rpx;\r\n\toverflow-y: auto;\r\n}\r\n\r\n.product-popup .level-box {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n}\r\n\r\n.product-popup .level-box .key {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999999;\r\n}\r\n\r\n.product-popup .level-box .icon-box {\r\n\twidth: 48rpx;\r\n\theight: 40rpx;\r\n\tbackground: #e0e0e0;\r\n}\r\n\r\n.product-popup .num-wrap .iconfont {\r\n\tcolor: #666;\r\n}\r\n\r\n.product-popup .num-wrap.no-stock .iconfont {\r\n\tcolor: #cccccc;\r\n}\r\n\r\n.product-popup .level-box .text-wrap {\r\n\tmargin: 0 4rpx;\r\n\theight: 60rpx;\r\n\tborder: none;\r\n\tbackground: #ffffff;\r\n}\r\n\r\n.product-popup .level-box .text-wrap input {\r\n\tpadding: 0 10rpx;\r\n\theight: 60rpx;\r\n\tline-height: 60rpx;\r\n\twidth: 80rpx;\r\n\tfont-size: 32rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.specs .specs-list {\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n\talign-items: center;\r\n\tflex-wrap: wrap;\r\n}\r\n\r\n.specs .specs-list button {\r\n\tmargin-right: 10rpx;\r\n\tmargin-bottom: 10rpx;\r\n\tfont-size: 24rpx;\r\n}\r\n\r\n.specs .specs-list button:after,\r\n.product-popup .btns button,\r\n.product-popup .btns button:after {\r\n\theight: 88rpx;\r\n\tline-height: 88rpx;\r\n\tborder: 0;\r\n\tborder-radius: 0;\r\n\tmargin-bottom: 55rpx;\r\n}\r\n\r\n.product-popup .btns .confirm-btn {\r\n\twidth: 710rpx;\r\n\theight: 80rpx;\r\n\t@include background_linearmore('cart_right1', 'cart_right2', 'right_deg', 0%, 100%);\r\n\tborder-radius: 40rpx;\r\n\tmargin: 0 auto;\r\n\tmargin-bottom: 55rpx;\r\n\tcolor: #ffffff;\r\n\tline-height: 80rpx;\r\n\tfont-size: 32rpx;\r\n}\r\n\r\n.btn-checked {\r\n\tborder: 1rpx solid #f6220c;\r\n\t@include border_color('background_color');\r\n\tborder-radius: 6px;\r\n\t@include font_color('font_color');\r\n\tfont-size: 26rpx;\r\n\tbackground-color: #ffffff;\r\n}\r\n\r\n.btn-checke {\r\n\tborder: 1rpx solid #d9d9d9;\r\n\tborder-radius: 6rpx;\r\n\tfont-size: 26rpx;\r\n\tcolor: #333333;\r\n\tbackground-color: #ffffff;\r\n}\r\n</style>\n","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./spec.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./spec.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}