{"version":3,"sources":["uni-app:///main.js","webpack:///D:/working/舒服康/pages/cart/cart.vue?d018","webpack:///D:/working/舒服康/pages/cart/cart.vue?eb03","webpack:///D:/working/舒服康/pages/cart/cart.vue?07f6","webpack:///D:/working/舒服康/pages/cart/cart.vue?2eea","uni-app:///pages/cart/cart.vue","webpack:///D:/working/舒服康/pages/cart/cart.vue?534e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","recommendProduct","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","m0","_self","_c","theme","m1","g0","loadding","tableData","length","g1","g2","_isMounted","e0","$event","isEdit","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","isloadding","scrollviewHigh","arrIds","checkedAll","totalPrice","totalProduct","store_open","is_auto","onLoad","onShow","mounted","methods","init","uni","success","_this","getData","self","item","_initGoodsChecked","productCount","product","checkedData","getCheckedData","checkItem","onUpsupChecked","supplier_flag","onUpdateChecked","checkStprItem","itemp","onCheckedAll","updateTotalPrice","total_price","Submit","title","icon","addFunc","product_id","spec_sku_id","total_num","reduceFunc","onDelete","content","cart_id","getCheckedIds","onDeleteEvent","cartIds","inArray","gotoShop"],"mappings":"yIAAA,MAGA,aACA,WAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,+ECLX,iIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,sBACZ,aAAAF,E,yCCvBf,sQ,gCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,iBAAkB,WAChB,OAAO,6EAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,SAAW,IACpBC,EAAKR,EAAIO,QACTE,EAAMT,EAAIU,SAAkC,KAAvBV,EAAIW,UAAUC,OACnCC,EAAMb,EAAIU,SAAkC,KAAvBV,EAAIW,UAAUC,OACnCE,EAAMd,EAAIU,SAAkC,KAAvBV,EAAIW,UAAUC,OAClCZ,EAAIe,aACPf,EAAIgB,GAAK,SAAUC,GACjBjB,EAAIkB,QAAUlB,EAAIkB,SAGtBlB,EAAImB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLnB,GAAIA,EACJI,GAAIA,EACJC,GAAIA,EACJI,GAAIA,EACJC,GAAIA,MAKRU,GAAmB,EACnBC,EAAkB,GACtB1B,EAAO2B,eAAgB,G,gCCvDvB,wHAAinB,eAAG,G,yPCwGpnB,CACAlC,YACAC,oBAEA2B,gBACA,OACAO,cAEAC,iBAEAlB,YACAQ,UAEAP,aACAkB,UAEAC,cACAC,aACAC,eACAC,aACAC,YAGAC,oBACAC,kBAEA,eACA,uBAEAC,mBACA,aAEAC,SAEAC,gBACA,WACAC,iBACAC,oBACA,wBACA,sBACAC,uBAMAC,mBACA,WACAC,gBACAA,8BAEA,YACA,gFACAA,YACAA,gBACAA,+BAEAA,+BAEAA,mCACAC,gBAEAD,cACAA,0BAMAE,6BAAA,WACA,OACA,qBAEA,IACAF,iCACAC,mCACAE,IACAC,yCACAC,SAGAL,iBACAA,YACAA,sCACAA,mCACA,mCAGAA,sBAMAM,0BACA,sCACA,cAIAC,0BACAzD,qBACA,6CACAG,4BAEA,sCAEA,uBAEA,wBAEAA,0CACA,iEAGAuD,6BAEA,IADA,SACA,kCACA,8BACAC,MAGA,4BACAxD,4BAKAyD,2BACA,WACAL,KACAL,iCACAC,mCACA,cACAI,mCAIApD,eACA2C,mCAGAe,4BACA,WACA1D,eACA2D,qBACAA,qCACAX,uBAEAD,qBAEAA,oBAEA/C,0CACA,iEAGA4D,wBAAA,WACA,OACAb,2BACAA,iCACA,iCACAC,mCACAG,6BAGAJ,qBAEAA,qBAEAc,4BAGA,IAFA,QACA,iBACA,mBACA,0CACA,oCACAC,wDACA,kBAMA,8BAGAC,kBACA,2BACA,eAKA,OAJApB,aACAqB,cACAC,eAEA,EAEA,yEAGAC,oBACA,WACA,eACA,gBACAvB,eACAqB,cAEAjB,QACA,kBACAoB,aACAC,cACAC,cAEA,YACA1B,gBACAI,cACAA,eAEA,WACAA,kBAKAuB,uBACA,WACA,eACA,gBACA,iBAGA3B,eACAqB,cAEAjB,QACA,kBACAoB,aACAC,gBAEA,YACArB,cACAJ,gBACAI,eAEA,WACAA,mBAKAwB,oBACA,WACA,oBACA,aAEA,OADAxB,yBACA,EAEAJ,aACAqB,WACAQ,wBACA5B,oBACA/C,WACAkD,QACA,qBACA0B,YAEA,YAEA1B,YACAA,0BASA2B,yBACA,WACA,KAQA,OAPA3B,iCACAC,mCACA,cACAhB,mCAIA,GAMA2C,0BACA,WAaA,OAZAC,uBACA7B,mCACA,yBACAA,8BAIAA,wBAEAA,wBAGA,GAKA8B,sBACA,eACA,WACA,SAGA,UAIAC,oBACA,2BACA,oBAGA,c,4DC9aA,wHAAorC,eAAG,G","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=0f00adf4&scoped=true&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&id=0f00adf4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f00adf4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=template&id=0f00adf4&scoped=true&\"","var components\ntry {\n  components = {\n    recommendProduct: function () {\n      return import(\n        /* webpackChunkName: \"components/recommendProduct/recommendProduct\" */ \"@/components/recommendProduct/recommendProduct.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.theme() || \"\"\n  var m1 = _vm.theme()\n  var g0 = !_vm.loadding ? _vm.tableData.length : null\n  var g1 = !_vm.loadding ? _vm.tableData.length : null\n  var g2 = !_vm.loadding ? _vm.tableData.length : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.isEdit = !_vm.isEdit\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        g0: g0,\n        g1: g1,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view :data-theme='theme()' :class=\"theme() || ''\">\r\n\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t<header-bar></header-bar>\r\n\t\t<!-- #endif -->\r\n\t\t<view class=\"card\" v-if=\"!loadding\">\r\n\t\t\t<view :class=\"{ pb100: tableData.length > 0 }\" style=\"position: relative;\">\r\n\t\t\t\t<!--产品列表-->\r\n\t\t\t\t<template v-if=\"tableData.length > 0\">\r\n\t\t\t\t\t<view class=\"address-bar d-e-c\">\r\n\t\t\t\t\t\t<view class=\"f30\" @tap=\"isEdit = !isEdit\">\r\n\t\t\t\t\t\t\t<button class=\"f24\" v-if=\"isEdit\">完成</button>\r\n\t\t\t\t\t\t\t<button class=\"f24\" v-else>编辑</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"section\">\r\n\t\t\t\t\t\t<view v-for=\"(supplier_item, supplier_index) in tableData\" :key=\"supplier_index\">\r\n\t\t\t\t\t\t\t<view class=\"supplier_list\">\r\n\t\t\t\t\t\t\t\t<view class=\"supplier_list_tit\">\r\n\t\t\t\t\t\t\t\t\t<label class=\"d-c-c\" @tap=\"checkStprItem(supplier_item, supplier_index)\">\r\n\t\t\t\t\t\t\t\t\t\t<checkbox color=\"red\" value=\"cb\" class=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t:checked=\"supplier_item.checked\" />\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<view class=\"d-a-c\"\r\n\t\t\t\t\t\t\t\t\t\t@tap=\"gotoPage('/pages/shop/shop?shop_supplier_id='+supplier_item.supplier.shop_supplier_id)\">\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"icon iconfont icon-dianpu1\"></i>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"f32 gray3\">{{supplier_item.supplier.name}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"item\" v-for=\"(item, index) in supplier_item.productList\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t<label class=\"d-c-c\" @tap.stop=\"checkItem(item, supplier_index, index)\">\r\n\t\t\t\t\t\t\t\t\t\t<checkbox color=\"red\" value=\"cb\" class=\"checkbox\" :checked=\"item.checked\" />\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<view style=\"overflow: hidden;\">\r\n\t\t\t\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t\t\t\t\t@click=\"gotoPage('/pages/product/detail/detail?product_id='+item.product_id)\"\r\n\t\t\t\t\t\t\t\t\t\t\t:src=\"item.product_image\" class=\"cover\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"title\">{{ item.product_name }}</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"describe\">{{ item.product_sku.product_attr }}</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"level-box count_choose\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"price\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t¥\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"num\">{{ item.product_price }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"num-wrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"\" @tap.stop=\"reduceFunc(item)\" v-if=\"item.total_num > 1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<image class=\"reduce_icon\" src=\"../../static/icon/reduce.png\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode=\"\"></image>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"text-wrap\">{{item.total_num}}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"\" @tap.stop=\"addFunc(item)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.total_num < item.product_sku.stock_num \">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<image class=\"add_icon\" src=\"../../static/icon/add.png\" mode=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<view class=\"none-data-box cart_none\">\r\n\t\t\t\t\t\t<image class=\"cart_none_img\" src=\"/static/cart_none.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t<text class=\"f26 gray9 pt10\">购物车空空如也</text>\r\n\t\t\t\t\t\t<button type=\"default\" class=\"theme-btn mt30 ww100 none_btn\" @tap=\"gotoShop\">去购物</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\r\n\t\t\t\t<!--底部按钮-->\r\n\t\t\t\t<view class=\"bottom-btns f28\" :class=\"is_auto?'is_auto':''\" v-if=\"tableData.length > 0\">\r\n\t\t\t\t\t<label class=\"d-c-c mr20\" @tap=\"onCheckedAll()\">\r\n\t\t\t\t\t\t<checkbox color=\"red\" class=\"checkbox\" :checked=\"checkedAll\" value=\"cb\" />\r\n\t\t\t\t\t\t全选\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<view class=\"d-e-c pr20\" v-if=\"!isEdit\">\r\n\t\t\t\t\t\t<view class=\"total d-s-c flex-1 mr20\">\r\n\t\t\t\t\t\t\t<text class=\"f24 gray9\">合计：</text>\r\n\t\t\t\t\t\t\t<view class=\"price f24\">\r\n\t\t\t\t\t\t\t\t¥\r\n\t\t\t\t\t\t\t\t<text class=\"num f32\">{{ totalPrice }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<button type=\"primary\" class=\"buy-btn theme-btn\" @tap=\"Submit()\">去结算</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"pr20\" v-else><button type=\"primary\" @tap=\"onDelete()\"\r\n\t\t\t\t\t\t\tclass=\"delete-btn theme-btn mr20\">删除</button></view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!--推荐-->\r\n\t\t\t\t<recommendProduct :location=\"10\"></recommendProduct>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<request-loading :loadding='isloadding'></request-loading>\r\n\t\t<tabBar></tabBar>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport recommendProduct from '@/components/recommendProduct/recommendProduct.vue';\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\trecommendProduct\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisloadding: true,\r\n\t\t\t\t/*滚动组件高度*/\r\n\t\t\t\tscrollviewHigh: 0,\r\n\t\t\t\t/*是否加载完成*/\r\n\t\t\t\tloadding: true,\r\n\t\t\t\tisEdit: false,\r\n\t\t\t\t/*购物车各商铺商品*/\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tarrIds: [],\r\n\t\t\t\t// 是否全选\r\n\t\t\t\tcheckedAll: false,\r\n\t\t\t\ttotalPrice: 0,\r\n\t\t\t\ttotalProduct: 0,\r\n\t\t\t\tstore_open: 1,\r\n\t\t\t\tis_auto: 0\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad() {},\r\n\t\tonShow() {\r\n\t\t\t/*获取产品详情*/\r\n\t\t\tthis.getData();\r\n\t\t\tthis.getTabBarLinks(); \r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.init();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/*初始化*/\r\n\t\t\tinit() {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.getSystemInfo({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tlet ratio = res.windowWidth / 750;\r\n\t\t\t\t\t\tlet h = res.windowHeight - ratio * 98;\r\n\t\t\t\t\t\t_this.scrollviewHigh = h;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/*获取数据*/\r\n\t\t\tgetData() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tself.isloadding = true;\r\n\t\t\t\tself._get('order.cart/lists', {\r\n\r\n\t\t\t\t}, function(res) {\r\n\t\t\t\t\tlet auto = uni.getStorageSync('TabBar').is_auto && uni.getStorageSync('TabBar').is_auto != 0;\r\n\t\t\t\t\tself.is_auto = auto;\r\n\t\t\t\t\tself.isloadding = false;\r\n\t\t\t\t\tself.tableData = res.data.productList;\r\n\t\t\t\t\t//#ifdef MP-WEIXIN\r\n\t\t\t\t\tself.store_open = res.data.store_open;\r\n\t\t\t\t\t//#endif\r\n\t\t\t\t\tself.tableData.forEach((item, index) => {\r\n\t\t\t\t\t\titem.checked = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t\tself.loadding = false;\r\n\t\t\t\t\tself._initGoodsChecked();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 初始化商品选中状态\r\n\t\t\t */\r\n\t\t\t_initGoodsChecked() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tlet checkedData = self.getCheckedData();\r\n\t\t\t\t// 将商品设置选中\r\n\t\t\t\tlet productCount = 0;\r\n\t\t\t\tself.tableData.forEach(item => {\r\n\t\t\t\t\titem.productList.forEach(product => {\r\n\t\t\t\t\t\tproductCount++;\r\n\t\t\t\t\t\tproduct.checked = self.inArray(`${product.cart_id}`,\r\n\t\t\t\t\t\t\tcheckedData);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tself.totalProduct = productCount;\r\n\t\t\t\tself.isEdit = false;\r\n\t\t\t\tself.checkedAll = checkedData.length == self.totalProduct;\r\n\t\t\t\tself.tableData.forEach((item, index) => {\r\n\t\t\t\t\tthis.onUpsupChecked(this.tableData, index)\r\n\t\t\t\t})\r\n\t\t\t\t// 更新购物车已选商品总价格\r\n\t\t\t\tself.updateTotalPrice();\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取选中的商品\r\n\t\t\t */\r\n\t\t\tgetCheckedData() {\r\n\t\t\t\tlet checkedData = uni.getStorageSync('CheckedData');\r\n\t\t\t\treturn checkedData ? checkedData : [];\r\n\t\t\t},\r\n\r\n\t\t\t/*单选*/\r\n\t\t\tcheckItem(e, supplier_index, index) {\r\n\t\t\t\te.checked = !e.checked;\r\n\t\t\t\tthis.$set(this.tableData[supplier_index].productList, index, e);\r\n\t\t\t\tconsole.log(this.tableData)\r\n\t\t\t\t// 更新店铺全选状态\r\n\t\t\t\tthis.onUpsupChecked(this.tableData, supplier_index);\r\n\t\t\t\t// 更新选中记录\r\n\t\t\t\tthis.onUpdateChecked();\r\n\t\t\t\t// 更新购物车已选商品总价格\r\n\t\t\t\tthis.updateTotalPrice();\r\n\t\t\t\t// 更新全选状态\r\n\t\t\t\tconsole.log(this.getCheckedData().length);\r\n\t\t\t\tthis.checkedAll = this.getCheckedData().length == this.totalProduct;\r\n\t\t\t},\r\n\t\t\t// 更新店铺全选状态\r\n\t\t\tonUpsupChecked(item, index) {\r\n\t\t\t\tlet supplier_flag = true;\r\n\t\t\t\tfor (var i = 0; i < item[index].productList.length; i++) {\r\n\t\t\t\t\tif (!item[index].productList[i].checked) {\r\n\t\t\t\t\t\tsupplier_flag = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$set(item[index], 'checked', supplier_flag);\r\n\t\t\t\tconsole.log(\"item=====\" + supplier_flag);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 更新商品选中记录\r\n\t\t\t */\r\n\t\t\tonUpdateChecked() {\r\n\t\t\t\tlet self = this,\r\n\t\t\t\t\tcheckedData = [];\r\n\t\t\t\tself.tableData.forEach(item => {\r\n\t\t\t\t\titem.productList.forEach(product => {\r\n\t\t\t\t\t\tif (product.checked == true) {\r\n\t\t\t\t\t\t\tcheckedData.push(`${product.cart_id}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(checkedData)\r\n\t\t\t\tuni.setStorageSync('CheckedData', checkedData);\r\n\t\t\t},\r\n\t\t\t/* 店铺全选 */\r\n\t\t\tcheckStprItem(itemp, index) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tconsole.log(itemp)\r\n\t\t\t\titemp.checked = !itemp.checked;\r\n\t\t\t\titemp.productList.forEach((item, index) => {\r\n\t\t\t\t\titem.checked = itemp.checked;\r\n\t\t\t\t})\r\n\t\t\t\tself.updateTotalPrice();\r\n\t\t\t\t// 更新选中记录\r\n\t\t\t\tself.onUpdateChecked();\r\n\t\t\t\t// 更新全选状态\r\n\t\t\t\tconsole.log(this.getCheckedData().length);\r\n\t\t\t\tthis.checkedAll = this.getCheckedData().length == this.totalProduct;\r\n\t\t\t},\r\n\t\t\t/*全选*/\r\n\t\t\tonCheckedAll() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tself.checkedAll = !self.checkedAll;\r\n\t\t\t\tself.tableData.forEach(item => {\r\n\t\t\t\t\tthis.$set(item, 'checked', self.checkedAll);\r\n\t\t\t\t\titem.productList.forEach(product => {\r\n\t\t\t\t\t\tproduct.checked = self.checkedAll;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tself.updateTotalPrice();\r\n\t\t\t\t// 更新选中记录\r\n\t\t\t\tself.onUpdateChecked();\r\n\t\t\t},\r\n\t\t\tupdateTotalPrice: function() {\r\n\t\t\t\tlet total_price = 0;\r\n\t\t\t\tlet items = this.tableData;\r\n\t\t\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\t\t\tfor (let j = 0; j < items[i].productList.length; j++) {\r\n\t\t\t\t\t\tif (items[i].productList[j]['checked'] == true) {\r\n\t\t\t\t\t\t\ttotal_price += items[i].productList[j]['total_num'] * items[i].productList[j][\r\n\t\t\t\t\t\t\t\t'product_price'\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t/*保留2位小数*/\r\n\t\t\t\tthis.totalPrice = total_price.toFixed(2);\r\n\t\t\t},\r\n\t\t\t/*去结算*/\r\n\t\t\tSubmit() {\r\n\t\t\t\tlet arrIds = this.getCheckedIds();\r\n\t\t\t\tif (arrIds.length == 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择商品',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tthis.gotoPage('/pages/order/confirm-order?order_type=cart&cart_ids=' + arrIds);\r\n\t\t\t},\r\n\t\t\t/*添加*/\r\n\t\t\taddFunc(item) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tlet product_id = item.product_id;\r\n\t\t\t\tlet spec_sku_id = item.spec_sku_id;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tself._post(\r\n\t\t\t\t\t'order.cart/add', {\r\n\t\t\t\t\t\tproduct_id: product_id,\r\n\t\t\t\t\t\tspec_sku_id: spec_sku_id,\r\n\t\t\t\t\t\ttotal_num: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tself.loadding = false;\r\n\t\t\t\t\t\tself.getData();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\tself.loadding = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t/*减少*/\r\n\t\t\treduceFunc(item) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tlet product_id = item.product_id;\r\n\t\t\t\tlet spec_sku_id = item.spec_sku_id;\r\n\t\t\t\tif (item.total_num <= 1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tself._post(\r\n\t\t\t\t\t'order.cart/sub', {\r\n\t\t\t\t\t\tproduct_id: product_id,\r\n\t\t\t\t\t\tspec_sku_id: spec_sku_id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\tself.loadding = false;\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tself.getData();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\tself.loadding = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t/*删除购物车*/\r\n\t\t\tonDelete() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tlet cartIds = self.getCheckedIds();\r\n\t\t\t\tif (!cartIds.length) {\r\n\t\t\t\t\tself.showError('您还没有选择商品');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '您确定要移除选择的商品吗?',\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\te.confirm &&\r\n\t\t\t\t\t\t\tself._post(\r\n\t\t\t\t\t\t\t\t'order.cart/delete', {\r\n\t\t\t\t\t\t\t\t\tcart_id: cartIds\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction(res) {\r\n\t\t\t\t\t\t\t\t\t// 删除选中的商品\r\n\t\t\t\t\t\t\t\t\tself.getData();\r\n\t\t\t\t\t\t\t\t\tself.onDeleteEvent(cartIds);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 获取已选中的商品\r\n\t\t\t */\r\n\t\t\tgetCheckedIds() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tlet arrIds = [];\r\n\t\t\t\tself.tableData.forEach(item => {\r\n\t\t\t\t\titem.productList.forEach(product => {\r\n\t\t\t\t\t\tif (product.checked == true) {\r\n\t\t\t\t\t\t\tarrIds.push(`${product.cart_id}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\treturn arrIds;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 商品删除事件\r\n\t\t\t */\r\n\t\t\tonDeleteEvent(cartIds) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tcartIds.forEach(cartIndex => {\r\n\t\t\t\t\tself.tableData.forEach((item, productIndex) => {\r\n\t\t\t\t\t\tif (cartIndex == `${item.cart_id}`) {\r\n\t\t\t\t\t\t\tself.tableData.splice(productIndex, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tself.$nextTick(()=>{\r\n\t\t\t\t\t// 更新选中记录\r\n\t\t\t\t\tself.onUpdateChecked();\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 是否在数组内\r\n\t\t\t */\r\n\t\t\tinArray(search, array) {\r\n\t\t\t\tfor (var i in array) {\r\n\t\t\t\t\tif (array[i] == search) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\t\t\t/*去购物*/\r\n\t\t\tgotoShop() {\r\n\t\t\t\tlet url = '/pages/index/index';\r\n\t\t\t\tthis.gotoPage(url);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\tpage {\r\n\t\tbackground-color: #f2f2f2;\r\n\t}\r\n\r\n\t.foot_ {\r\n\t\theight: 98rpx;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.card .scroll-Y {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.card .checkbox {\r\n\t\t@include font_color(\"font_color\");\r\n\t\ttransform: scale(0.7);\r\n\t}\r\n\r\n\t.address-bar {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground-color: #f2f2f2;\r\n\t}\r\n\r\n\t.address-bar button {\r\n\t\tborder: none;\r\n\t\tbackground: none;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.section {\r\n\t\tbackground: #f2f2f2;\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.section .item {\r\n\t\tmargin: 0 26rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t// border: 1px solid #f2f2f2;\r\n\t\tpadding-right: 19rpx;\r\n\t\tpadding-bottom: 29rpx;\r\n\t\tpadding-top: 29rpx;\r\n\t}\r\n\r\n\t.section .cover {\r\n\t\twidth: 150rpx;\r\n\t\theight: 150rpx;\r\n\t\tborder-radius: 8px;\r\n\t}\r\n\r\n\t.section .info {\r\n\t\tflex: 1;\r\n\t\tpadding-left: 30rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.section .title {\r\n\t\twidth: 100%;\r\n\t\tfont-size: 26rpx;\r\n\t\tdisplay: -webkit-box;\r\n\t\toverflow: hidden;\r\n\t\t-webkit-line-clamp: 2;\r\n\t\t-webkit-box-orient: vertical;\r\n\t}\r\n\r\n\t.vender .list .describe {\r\n\t\twidth: 100%;\r\n\t\twhite-space: nowrap;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\r\n\t.section .describe {\r\n\t\tmargin-top: 20rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999999;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\t-webkit-line-clamp: 3;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.section .price {\r\n\t\t@include font_color(\"font_color\");\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.section .price .num {\r\n\t\tpadding: 0 4rpx;\r\n\t\tfont-size: 32rpx;\r\n\t}\r\n\r\n\t.section .level-box {\r\n\t\tmargin-top: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.section .level-box .key {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999999;\r\n\t}\r\n\r\n\t.section .level-box .num-wrap {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.section .level-box .icon-box {\r\n\t\twidth: 33rpx;\r\n\t\theight: 33rpx;\r\n\t\tborder: 1px solid #c5c5c5;\r\n\t\tbackground: #f2f2f2;\r\n\t}\r\n\r\n\t.section .level-box .icon-box .gray {\r\n\t\tcolor: #cccccc;\r\n\t}\r\n\r\n\t.section .level-box .icon-box .gray3 {\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.section .level-box .text-wrap {\r\n\t\tmargin: 0 20rpx;\r\n\t\theight: 33rpx;\r\n\t\tborder: none;\r\n\t\tbackground: none;\r\n\t}\r\n\r\n\t.section .level-box .text-wrap input {\r\n\t\tpadding: 0 4rpx;\r\n\t\theight: 33rpx;\r\n\t\tline-height: 1;\r\n\t\twidth: 40rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\ttext-align: center;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmin-height: 33rpx;\r\n\t}\r\n\r\n\t.bottom-btns {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\tpadding: 0 0 0 20rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\theight: 90rpx;\r\n\t\t// /* bottom: calc(var(--window-bottom); */\r\n\t\t// bottom: var(--window-bottom, 0);\r\n\t\tbottom: var(--window-bottom, 0);\r\n\t\t// bottom: 50px;\r\n\t\tleft: 0;\r\n\t\tbox-shadow: 0 -2rpx 8rpx rgba(0, 0, 0, 0.1);\r\n\t\tbackground: #ffffff;\r\n\t\tz-index: 1000;\r\n\t}\r\n\r\n\t.bottom-btns.is_auto {\r\n\t\tbottom: calc(env(safe-area-inset-bottom) + 98rpx);\r\n\t}\r\n\r\n\t.bottom-btns .delete-btn {\r\n\t\tmargin: 0;\r\n\t\tpadding: 0 30rpx;\r\n\t\theight: 60rpx;\r\n\t\tline-height: 60rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.bottom-btns .buy-btn {\r\n\t\tmargin: 0;\r\n\t\tpadding: 0 24rpx;\r\n\t\theight: 60rpx;\r\n\t\tline-height: 60rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.bottom-btns .price {\r\n\t\t@include font_color(\"price_color\");\r\n\t}\r\n\r\n\t.supplier_list {\r\n\t\toverflow: hidden;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tborder-radius: 15rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.supplier_list_tit {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-left: 28rpx;\r\n\t\tmargin-top: 28rpx;\r\n\t}\r\n\r\n\t.icon-dianpu1 {\r\n\t\tfont-size: 34rpx;\r\n\t\tcolor: #333333;\r\n\t\tmargin: 0 17rpx;\r\n\t}\r\n\r\n\t.cart_none .cart_none_img {\r\n\t\twidth: 348rpx;\r\n\t\theight: 222rpx;\r\n\t}\r\n\r\n\t.none_btn {\r\n\t\tfont-size: 32rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t}\r\n\r\n\t.add_icon,\r\n\t.reduce_icon {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&id=0f00adf4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&id=0f00adf4&lang=scss&scoped=true&\""],"sourceRoot":""}