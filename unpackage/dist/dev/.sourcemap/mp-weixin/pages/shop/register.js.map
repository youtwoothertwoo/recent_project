{"version":3,"sources":["webpack:///D:/working/舒服康/pages/shop/register.vue?43c6","webpack:///D:/working/舒服康/pages/shop/register.vue?3726","webpack:///D:/working/舒服康/pages/shop/register.vue?633e","webpack:///D:/working/舒服康/pages/shop/register.vue?df2f","uni-app:///pages/shop/register.vue","webpack:///D:/working/舒服康/pages/shop/register.vue?c49d","webpack:///D:/working/舒服康/components/upload/upload.vue?c9fb","webpack:///D:/working/舒服康/components/upload/upload.vue?b13f","webpack:///D:/working/舒服康/components/upload/upload.vue?50db","webpack:///D:/working/舒服康/components/upload/upload.vue?3e3e","uni-app:///components/upload/upload.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","Upload","data","form","image_frontid","business_id","mobile","password","isupload","type","image_frontid_path","business_id_path","bg_image","classify_data_name","classify_data_id","classify_data_name_active","classify_data_id_active","second","send_btn_txt","is_send","sms_open","created","methods","changeMsg","setTimeout","getData","self","getCode","get_classify","list_name","list_id","select","uni","itemList","success","fail","formSubmit","formdata","console","title","duration","icon","mask","openUpload","getImgsFunc","changeSelect","imageList","props","onLoad","mounted","chooseImageFunc","maxDuration","camera","arr","count","sizeType","sourceType","complete","uploadFile","token","app_id","file_type","tempList","url","filePath","name","formData","i"],"mappings":"qHAAA,uIACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,0BACZ,aAAAF,E,2CCvBf,wQ,kCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,kCCRvB,0HAAqnB,eAAG,G,4HCmExnB,gB,EACA,CACAV,YAEAW,kBAGAC,gBACA,OACAC,MACAC,gBACAC,cACAC,UACAC,aAEAC,YACAC,eACAC,sBACAC,oBACAC,YACAC,sBACAC,oBACAC,6BACAC,2BAEAC,UACAC,qBAEAC,WACAC,aAGAC,mBACA,eACA,qBAEAC,SAEAC,qBACA,eACA,kCACA,cACAC,iCAEA,0BACA,eACA,kBAIAC,mBACA,WACAC,+BAEA,YACAA,6CAIAC,oBACA,WACAD,mCACApB,WACA,YACAoB,aACAA,kBAIAE,wBACA,WACAF,sCAEA,YAIA,IAHA,SACA,KAEA,6BACAG,4BAGA,qCACAC,mCAEAJ,uBACAA,qBACAA,+BAIAK,kBACA,WACAC,mBACAC,8BACAC,oBACAR,6DACAA,0DAEAS,sBAMAC,uBACA,WACA,iBAKA,GAJAC,iCACAC,eACAA,oBACAD,wCACA,gCAMA,OALAL,aACAO,eACAC,aACAC,eAEA,EAEA,oBAMA,OALAT,aACAO,gBACAC,aACAC,eAEA,EAEA,oBAMA,OALAT,aACAO,gBACAC,aACAC,eAEA,EAEA,mBAMA,OALAT,aACAO,gBACAC,aACAC,eAEA,EAGA,gBAMA,OALAT,aACAO,gBACAC,aACAC,eAEA,EAEA,6BAMA,OALAT,aACAO,eACAC,aACAC,eAEA,EAEA,kBAMA,OALAT,aACAO,gBACAC,aACAC,eAEA,EAGA,iDACA,qBAMA,OALAT,aACAO,kBACAC,aACAC,eAEA,EAEAT,eACAO,aACAG,UAEAhB,8CACAA,gCACAA,+CACA,iBACAM,uBAKAW,uBACA,YACA,kBAIAC,wBACAN,eACA,sBACA,sBACAA,0BACA,uCACA,sCACA,uBACAA,0BACA,qCACA,qCAGA,kBAGAO,yBACA,mEACA,0EAGA,c,8DC7RA,0HAAw4B,eAAG,G,wDCA34B,6HACI3D,EADJ,QAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,+BACZ,aAAAF,E,0CCtBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,yHAAmnB,eAAG,G,4ICKtnB,CACAE,gBACA,OAEA4C,eAGAC,wBACAC,oBACAC,mBACA,wBAEA3B,SAEA4B,2BACA,WACA,aACAlB,eAEAmB,eAEAC,cAEAlB,oBAEA,GADAI,eACA,GACA,SACAe,uBACAf,eACAZ,kBAGAS,iBACAG,eACAZ,2BAIAM,eACAsB,eACAC,mCACAC,8BACAtB,oBACAR,+BAEAS,iBACAT,yBAEA+B,0BAMAC,uBACA,WACA,IACA,WACA,GACAC,gCACAC,oBACAC,qCAEA7B,eACAO,cAEAuB,yBACA9B,cACA+B,uDACAC,WACAC,aACAC,WACAhC,oBACA,iEACA,eAIA,OAFAI,gCACAZ,YAGA,YACAA,0BAIA+B,oBACAU,IACA,QACAnC,gBAEAN,yCAOA,c","file":"pages/shop/register.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./register.vue?vue&type=template&id=189dd01a&\"\nvar renderjs\nimport script from \"./register.vue?vue&type=script&lang=js&\"\nexport * from \"./register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./register.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/shop/register.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./register.vue?vue&type=template&id=189dd01a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./register.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"index\">\r\n\t\t<view class=\"bg_image\">\r\n\t\t\t<image :src=\"bg_image\" mode=\"widthFix\"></image>\r\n\t\t</view>\r\n\t\t<view class=\"certification\">\r\n\t\t\t<form @submit=\"formSubmit\" @reset=\"formReset\">\r\n\t\t\t\t<view class=\"certification_head\">\r\n\t\t\t\t\t<view class=\"certification_head_body\">\r\n\t\t\t\t\t\t<view class=\"certification_head_body_item\">\r\n\t\t\t\t\t\t\t<view class=\"icon iconfont icon-qiye\"></view>\r\n\t\t\t\t\t\t\t<input type=\"text\" name=\"store_name\" v-model=\"form.store_name\" placeholder='请输入店铺名称' />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"certification_head_body_item\">\r\n\t\t\t\t\t\t\t<view class=\"icon iconfont icon-ziyuan1\"></view>\r\n\t\t\t\t\t\t\t<input type=\"text\" name=\"user_name\" v-model=\"form.user_name\" placeholder='请输入真实姓名' />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"certification_head_body_item\">\r\n\t\t\t\t\t\t\t<view class=\"icon iconfont icon-phone\"></view>\r\n\t\t\t\t\t\t\t<input type=\"text\" name=\"mobile\" v-model=\"form.mobile\" placeholder='请输入手机号码' />\r\n\t\t\t\t\t\t\t<button type=\"default\"  v-if=\"sms_open == 1\" :disabled=\"is_send\" @click=\"getCode(form.mobile)\">{{send_btn_txt}}</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"certification_head_body_item\">\r\n\t\t\t\t\t\t\t<view class=\"icon iconfont icon-mima\"></view>\r\n\t\t\t\t\t\t\t<input type=\"text\" name=\"password\" v-model=\"form.password\" password=\"true\" placeholder='请输入登录密码' />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"certification_head_body_item\" v-if=\"sms_open == 1\">\r\n\t\t\t\t\t\t\t<view class=\"icon iconfont icon-yanzhengma\"></view>\r\n\t\t\t\t\t\t\t<input type=\"text\" name=\"code\" v-model=\"form.code\" placeholder='请输入验证码' />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<picker class=\"\" value=\"\" @change=\"changeSelect($event)\"\r\n\t\t\t\t\t\t\t:range=\"classify_data_name\">\r\n\t\t\t\t\t\t\t<view class=\"certification_head_body_item d-b-c\">\r\n\t\t\t\t\t\t\t\t<view class=\"make-item input-box flex-1\" v-if=\"classify_data_name_active\">{{classify_data_name_active}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"make-item input-box flex-1\" style=\"color: #777777;\" v-else>请选择您店铺的主营项目</view>\r\n\t\t\t\t\t\t\t\t<view class=\"icon iconfont icon-jiantou\" style=\"font-size: 24rpx;\"></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</picker>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"certification_body\">\r\n\t\t\t\t\t<view class=\"login_index_updata_name\">\r\n\t\t\t\t\t\t<text style=\"color:red;\">*</text>\r\n\t\t\t\t\t\t<text style=\"font-size: 32rpx;font-weight: 500;color: #000000;\">请上传营业执照</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"login_index_updata_updata\">\r\n\t\t\t\t\t\t<view class=\"login_index_updata_updata_item2\" @click=\"openUpload('license')\">\r\n\t\t\t\t\t\t\t<view class=\"login_index_updata_updata_item_body\">\r\n\t\t\t\t\t\t\t\t<view v-if=\"business_id_path!=''\" class=\"img\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"business_id_path\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view v-if=\"business_id_path==''\">点击上传营业执照</view>\r\n\t\t\t\t\t\t\t\t<input style=\"display:none\" name=\"business_id\" v-model=\"form.business_id\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"login_index_btn\">\r\n\t\t\t\t\t<button form-type=\"submit\" type=\"default\">确定</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<Upload v-if=\"isupload\" :isupload=\"isupload\" :type=\"type\" @getImgs=\"getImgsFunc\">上传图片</Upload>\r\n\t\t\t</form>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport Upload from '@/components/upload/upload';\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\t/*编辑组件*/\r\n\t\t\tUpload\r\n\t\t},\r\n\t\t\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tform: {\r\n\t\t\t\t\timage_frontid: 0,\r\n\t\t\t\t\tbusiness_id: 0,\r\n\t\t\t\t\tmobile: '',\r\n\t\t\t\t\tpassword: ''\r\n\t\t\t\t},\r\n\t\t\t\tisupload: false,\r\n\t\t\t\ttype: 'frontid',\r\n\t\t\t\timage_frontid_path: '',\r\n\t\t\t\tbusiness_id_path: '',\r\n\t\t\t\tbg_image: '',\r\n\t\t\t\tclassify_data_name: '', //列表名字\r\n\t\t\t\tclassify_data_id: '', //列表id\r\n\t\t\t\tclassify_data_name_active: '', //当前选中的列表名字\r\n\t\t\t\tclassify_data_id_active: '', //当前选中的列表id\r\n\t\t\t\t/*当前秒数*/\r\n\t\t\t\tsecond: 60,\r\n\t\t\t\tsend_btn_txt: '获取验证码',\r\n\t\t\t\t/*是否已发验证码*/\r\n\t\t\t\tis_send: false,\r\n\t\t\t\tsms_open: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getData();\r\n\t\t\tthis.get_classify();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/*改变发送验证码按钮文本*/\r\n\t\t\tchangeMsg() {\r\n\t\t\t\tif (this.second > 0) {\r\n\t\t\t\t\tthis.send_btn_txt = this.second + '秒';\r\n\t\t\t\t\tthis.second--;\r\n\t\t\t\t\tsetTimeout(this.changeMsg, 1000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.send_btn_txt = '获取验证码';\r\n\t\t\t\t\tthis.second = 60;\r\n\t\t\t\t\tthis.is_send = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*获取数据*/\r\n\t\t\tgetData() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tself._get('user.index/detail', {\r\n\r\n\t\t\t\t}, function(res) {\r\n\t\t\t\t\tself.bg_image = res.data.setting.supplier_image;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//获取验证码\r\n\t\t\tgetCode(mobile) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tself._post('supplier.apply/sendCode', {\r\n\t\t\t\t\tmobile: mobile\r\n\t\t\t\t}, function(res) {\r\n\t\t\t\t\tself.is_send = true;\r\n\t\t\t\t\tself.changeMsg();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//获取分类\r\n\t\t\tget_classify() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tself._post('supplier.apply/category', {\r\n\r\n\t\t\t\t}, function(res) {\r\n\t\t\t\t\tlet list_name = [];\r\n\t\t\t\t\tlet list_id = [];\r\n\t\t\t\t\t//合成select列表\r\n\t\t\t\t\tfor (var i = 0; i < res.data.list.length; i++) {\r\n\t\t\t\t\t\tlist_name.push(res.data.list[i].name);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//合成上传所需id数组\r\n\t\t\t\t\tfor (var i2 = 0; i2 < res.data.list.length; i2++) {\r\n\t\t\t\t\t\tlist_id.push(res.data.list[i2].category_id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.classify_data_name = list_name;\r\n\t\t\t\t\tself.classify_data_id = list_id;\r\n\t\t\t\t\tself.sms_open = res.data.sms_open;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//选择分类\r\n\t\t\tselect() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\titemList: self.classify_data_name,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tself.classify_data_name_active = self.classify_data_name[res.tapIndex];\r\n\t\t\t\t\t\tself.classify_data_id_active = self.classify_data_id[res.tapIndex];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/*提交*/\r\n\t\t\tformSubmit: function(e) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tvar formdata = e.detail.value;\r\n\t\t\t\tformdata.business_id = self.form.business_id;\r\n\t\t\t\tconsole.log(formdata)\r\n\t\t\t\tconsole.log(self.form)\r\n\t\t\t\tformdata.category_id = self.classify_data_id_active;\r\n\t\t\t\tif (self.classify_data_name_active == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请填主营类别',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (formdata.store_name == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入店铺名称',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (formdata.business_id == 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请上传营业执照',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (formdata.user_name == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入真实姓名',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (formdata.mobile == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入手机号码',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (formdata.code == '' && self.sms_open == 1) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请填写验证码',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (formdata.password == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请填写登录密码',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet reg = /^((0\\d{2,3}-\\d{7,8})|(1[3456789]\\d{9}))$/;\r\n\t\t\t\tif (!reg.test(formdata.mobile)) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '手机号码格式不正确',\r\n\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在提交',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tself._post('supplier.apply/index', formdata, function(res) {\r\n\t\t\t\t\tself.showSuccess(res.msg, function() {\r\n\t\t\t\t\t\tself.gotoPage('/pages/shop/application_status')\r\n\t\t\t\t\t}, null, function(){\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/*上传*/\r\n\t\t\topenUpload(e) {\r\n\t\t\t\tthis.type = e;\r\n\t\t\t\tthis.isupload = true;\r\n\t\t\t},\r\n\r\n\t\t\t/*获取图片*/\r\n\t\t\tgetImgsFunc(e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\tif (e != null && e.length > 0) {\r\n\t\t\t\t\tif (this.type == 'frontid') {\r\n\t\t\t\t\t\tconsole.log(e[0].file_id);\r\n\t\t\t\t\t\tthis.image_frontid_path = e[0].file_path;\r\n\t\t\t\t\t\tthis.form.image_frontid = e[0].file_id;\r\n\t\t\t\t\t} else if (this.type == 'license') {\r\n\t\t\t\t\t\tconsole.log(e[0].file_id);\r\n\t\t\t\t\t\tthis.business_id_path = e[0].file_path;\r\n\t\t\t\t\t\tthis.form.business_id = e[0].file_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.isupload = false;\r\n\t\t\t},\r\n\t\t\t/* 下拉框 */\r\n\t\t\tchangeSelect(e) {\r\n\t\t\t\tthis.classify_data_id_active = this.classify_data_id[e.detail.value];\r\n\t\t\t\tthis.classify_data_name_active = this.classify_data_name[e.detail.value];\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\tpage {\r\n\t\tbackground: #FF3D19;\r\n\t}\r\n\r\n\t.bg_image image{\r\n\t\twidth: 100%;\r\n\t}\r\n\t.iconfont {\r\n\t\tfont-size: 48rpx;\r\n\t}\r\n\r\n\t.index {\r\n\t\twidth: 750rpx;\r\n\t}\r\n\r\n\t.certification {\r\n\t\twidth: 675rpx;\r\n\t\tmargin: 0 auto;\r\n\t\tborder-radius: 30rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color: white;\r\n\t\tposition: absolute;\r\n\t\ttop: 260rpx;\r\n\t\tleft: 37.5rpx;\r\n\t\tmargin-bottom: 50rpx;\r\n\t}\r\n\r\n\t.certification_head {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.certification_head_body {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.certification_head_body_item {\r\n\t\twidth: 100%;\r\n\t\theight: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 32rpx !important;\r\n\t}\r\n\r\n\t.certification_head_body_item view {\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\r\n\t.certification_head_body_item button {\r\n\t\twidth: 172rpx;\r\n\t\theight: 56rpx;\r\n\t\tline-height: 56rpx;\r\n\t\tborder: 1rpx #E2231A solid;\r\n\t\tborder-radius: 40rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #E2231A;\r\n\t\tpadding: 0 20rpx;\r\n\t}\r\n\r\n\t.certification_body {}\r\n\r\n\t.login_index_updata_name {\r\n\t\tmargin-top: 28rpx;\r\n\t\tmargin-left: 48rpx;\r\n\t}\r\n\r\n\t.login_index_updata_updata {\r\n\t\twidth: 90%;\r\n\t\theight: 360rpx;\r\n\t\tmargin: 0 auto;\r\n\t\tmargin-top: 35rpx;\r\n\t}\r\n\r\n\t.login_index_updata_updata_item2 {\r\n\t\twidth: 100%;\r\n\t\theight: 360rpx;\r\n\t\tborder: 1rpx #9a9a9a dotted;\r\n\t\tborder-radius: 15rpx;\r\n\t\ttext-align: center;\r\n\t\t\r\n\t}\r\n\r\n\t.login_index_updata_updata_item_body {\r\n\t\twidth: 150rpx;\r\n\t\theight: 360rpx;\r\n\t\ttext-align: center;\r\n\t\tmargin: 0 auto;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.img image {\r\n\t\twidth: 554rpx;\r\n\t\theight: 360rpx;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.login_index_btn {\r\n\t\tposition: relative;\r\n\t\ttop: 30rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.login_index_btn button {\r\n\t\twidth: 90%;\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: #F36A24;\r\n\t\tborder-radius: 50rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tmargin: 0 auto;\r\n\t\tcolor: white;\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n\r\n\t.certification_rule {\r\n\t\tposition: relative;\r\n\t\tleft: 500rpx;\r\n\t\ttop: -10rpx;\r\n\t}\r\n\r\n\t.certification_rule text {\r\n\t\tcolor: #8a8a8a;\r\n\t}\r\n\r\n\t.certification_rule image {\r\n\t\twidth: 24rpx;\r\n\t\theight: 24rpx;\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t.classify_text {\r\n\t\tcolor: #808080;\r\n\t\tmargin-left: 40rpx;\r\n\t}\r\n\r\n\t.select input {\r\n\t\tpadding-left: 60rpx;\r\n\t\tcolor: #808080;\r\n\t}\r\n\t.make-item{\r\n\t\tpadding-left: 60rpx;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./register.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./register.vue?vue&type=style&index=0&lang=css&\"","import { render, staticRenderFns, recyclableRender, components } from \"./upload.vue?vue&type=template&id=33ebcd24&\"\nvar renderjs\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/upload/upload.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=template&id=33ebcd24&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view></view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t/*需要返回的图片*/\r\n\t\t\timageList: []\r\n\t\t};\r\n\t},\r\n\tprops: ['num', 'isVideo'],\r\n\tonLoad() {},\r\n\tmounted() {\r\n\t\tthis.chooseImageFunc();\r\n\t},\r\n\tmethods: {\r\n\t\t/*打开相机或者相册，选择图片*/\r\n\t\tchooseImageFunc() {\r\n\t\t\tlet self = this;\r\n\t\t\tif (this.isVideo) {\r\n\t\t\t\tuni.chooseVideo({\r\n\t\t\t\t\t// 来源相册或者拍摄\r\n\t\t\t\t\tmaxDuration: 60,\r\n\t\t\t\t\t// 设置最长时间60s\r\n\t\t\t\t\tcamera: 'back',\r\n\t\t\t\t\t// 后置摄像头\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\t\t\tarr.push(res.tempFilePath);\r\n\t\t\t\t\t\t\tconsole.log(arr);\r\n\t\t\t\t\t\t\tself.uploadFile(arr);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tself.$emit('getImgs', null);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: self.num || 9, //默认9\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album', 'camera'], //从相册选择\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tself.uploadFile(res.tempFilePaths);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tself.$emit('getImgs', null);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function(res) {}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/*上传图片*/\r\n\t\tuploadFile: function(tempList) {\r\n\t\t\tlet self = this;\r\n\t\t\tlet i = 0;\r\n\t\t\tlet img_length = tempList.length;\r\n\t\t\tlet params = {\r\n\t\t\t\ttoken: uni.getStorageSync('token'),\r\n\t\t\t\tapp_id: self.getAppId(),\r\n\t\t\t\tfile_type: self.isVideo ? 'video' : 'image'\r\n\t\t\t};\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '上传中'\r\n\t\t\t});\r\n\t\t\ttempList.forEach(function(filePath, fileKey) {\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: self.websiteUrl + '/index.php?s=/api/file.upload/image',\r\n\t\t\t\t\tfilePath: filePath,\r\n\t\t\t\t\tname: 'iFile',\r\n\t\t\t\t\tformData: params,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tlet result = typeof res.data === 'object' ? res.data : JSON.parse(res.data);\r\n\t\t\t\t\t\tif (result.code === -1) {\r\n\t\t\t\t\t\t\t// 登录态失效, 重新登录\r\n\t\t\t\t\t\t\tconsole.log('登录态失效, 重新登录');\r\n\t\t\t\t\t\t\tself.doLogin();\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.code === 1) {\r\n\t\t\t\t\t\t\tself.imageList.push(result.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t\tif (img_length === i) {\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t// 所有文件上传完成\r\n\t\t\t\t\t\t\tself.$emit('getImgs', self.imageList);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style></style>\n"],"sourceRoot":""}