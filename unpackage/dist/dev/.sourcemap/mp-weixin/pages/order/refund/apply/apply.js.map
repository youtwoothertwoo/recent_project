{"version":3,"sources":["webpack:///D:/working/舒服康/components/upload/upload.vue?c9fb","webpack:///D:/working/舒服康/components/upload/upload.vue?b13f","webpack:///D:/working/舒服康/components/upload/upload.vue?50db","webpack:///D:/working/舒服康/components/upload/upload.vue?3e3e","uni-app:///components/upload/upload.vue","uni-app:///main.js","webpack:///D:/working/舒服康/pages/order/refund/apply/apply.vue?5d07","webpack:///D:/working/舒服康/pages/order/refund/apply/apply.vue?71c6","webpack:///D:/working/舒服康/pages/order/refund/apply/apply.vue?daa2","webpack:///D:/working/舒服康/pages/order/refund/apply/apply.vue?1078","uni-app:///pages/order/refund/apply/apply.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","imageList","props","onLoad","mounted","methods","chooseImageFunc","uni","maxDuration","camera","success","console","arr","self","fail","count","sizeType","sourceType","complete","uploadFile","token","app_id","file_type","title","tempList","url","filePath","name","formData","i","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","g0","loadding","images","length","$mp","Object","assign","$root","Upload","indicatorDots","autoplay","interval","duration","type","isUpload","order_product_id","product","image","file_path","temlIds","getData","platform","tabType","formSubmit","formdata","mask","openUpload","getImgsFunc","upload_length","deleteFunc"],"mappings":"+HAAA,6HACIA,EADJ,QAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,+BACZ,aAAAF,E,0CCtBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,yHAAmnB,eAAG,G,4ICKtnB,CACAC,gBACA,OAEAC,eAGAC,wBACAC,oBACAC,mBACA,wBAEAC,SAEAC,2BACA,WACA,aACAC,eAEAC,eAEAC,cAEAC,oBAEA,GADAC,eACA,GACA,SACAC,uBACAD,eACAE,kBAGAC,iBACAH,eACAE,2BAIAN,eACAQ,eACAC,mCACAC,8BACAP,oBACAG,+BAEAC,iBACAD,yBAEAK,0BAMAC,uBACA,WACA,IACA,WACA,GACAC,gCACAC,oBACAC,qCAEAf,eACAgB,cAEAC,yBACAjB,cACAkB,uDACAC,WACAC,aACAC,WACAlB,oBACA,iEACA,eAIA,OAFAC,gCACAE,YAGA,YACAA,0BAIAK,oBACAW,IACA,QACAtB,gBAEAM,yCAOA,c,uFCtGA,MAGA,aACA,YAFAiB,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,6HACIjD,EADJ,QAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,qCACZ,aAAAF,E,0CCtBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETyC,GADK5C,EAAII,MAAMC,GACTL,EAAI6C,SAA+B,KAApB7C,EAAI8C,OAAOC,QACpC/C,EAAIgD,IAAIvC,KAAOwC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLP,GAAIA,MAKRtC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCjBvB,yHAAgpB,eAAG,G,2HC6FnpB,gB,EACA,CACAV,YACAsD,kBAEA3C,gBACA,OAEAoC,YACAQ,iBACAC,YACAC,aACAC,aACAC,QAEAC,YAEAC,mBAEAC,SACAC,OACAC,eAGAhB,UAEAiB,aAGAnD,mBACA,0CAEAC,mBAEA,gBAEAC,SAEAkD,mBACA,WACAhD,eACAgB,cAEAV,cACA,yBACAA,4BACAqC,mBACAM,2BACA,YACA3C,cACAA,wBACAA,8BACA,2CACAA,WAEAN,oBAIAkD,oBACA,aAIAC,uBACA,WACA,iBACAC,cACAA,sCACAA,kCACA,iBACApD,eACAgB,aACAqC,UAEA/C,2CACAN,gBACAA,aACAgB,YACAwB,aACA7B,oBACAL,qDAKAA,2BAIAgD,sBACA,kBAIAC,wBACA,WAEA,GADAjD,cACA,0BACA,sBACAkD,WACA,SACAlD,iCAGA,IADA,UACA,YACAA,sBAMAmD,uBACA,2BAGA,c","file":"pages/order/refund/apply/apply.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./upload.vue?vue&type=template&id=33ebcd24&\"\nvar renderjs\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/upload/upload.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=template&id=33ebcd24&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view></view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t/*需要返回的图片*/\r\n\t\t\timageList: []\r\n\t\t};\r\n\t},\r\n\tprops: ['num', 'isVideo'],\r\n\tonLoad() {},\r\n\tmounted() {\r\n\t\tthis.chooseImageFunc();\r\n\t},\r\n\tmethods: {\r\n\t\t/*打开相机或者相册，选择图片*/\r\n\t\tchooseImageFunc() {\r\n\t\t\tlet self = this;\r\n\t\t\tif (this.isVideo) {\r\n\t\t\t\tuni.chooseVideo({\r\n\t\t\t\t\t// 来源相册或者拍摄\r\n\t\t\t\t\tmaxDuration: 60,\r\n\t\t\t\t\t// 设置最长时间60s\r\n\t\t\t\t\tcamera: 'back',\r\n\t\t\t\t\t// 后置摄像头\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\t\t\tarr.push(res.tempFilePath);\r\n\t\t\t\t\t\t\tconsole.log(arr);\r\n\t\t\t\t\t\t\tself.uploadFile(arr);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tself.$emit('getImgs', null);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: self.num || 9, //默认9\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album', 'camera'], //从相册选择\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tself.uploadFile(res.tempFilePaths);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tself.$emit('getImgs', null);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function(res) {}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/*上传图片*/\r\n\t\tuploadFile: function(tempList) {\r\n\t\t\tlet self = this;\r\n\t\t\tlet i = 0;\r\n\t\t\tlet img_length = tempList.length;\r\n\t\t\tlet params = {\r\n\t\t\t\ttoken: uni.getStorageSync('token'),\r\n\t\t\t\tapp_id: self.getAppId(),\r\n\t\t\t\tfile_type: self.isVideo ? 'video' : 'image'\r\n\t\t\t};\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '上传中'\r\n\t\t\t});\r\n\t\t\ttempList.forEach(function(filePath, fileKey) {\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: self.websiteUrl + '/index.php?s=/api/file.upload/image',\r\n\t\t\t\t\tfilePath: filePath,\r\n\t\t\t\t\tname: 'iFile',\r\n\t\t\t\t\tformData: params,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tlet result = typeof res.data === 'object' ? res.data : JSON.parse(res.data);\r\n\t\t\t\t\t\tif (result.code === -1) {\r\n\t\t\t\t\t\t\t// 登录态失效, 重新登录\r\n\t\t\t\t\t\t\tconsole.log('登录态失效, 重新登录');\r\n\t\t\t\t\t\t\tself.doLogin();\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (result.code === 1) {\r\n\t\t\t\t\t\t\tself.imageList.push(result.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t\tif (img_length === i) {\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t// 所有文件上传完成\r\n\t\t\t\t\t\t\tself.$emit('getImgs', self.imageList);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style></style>\n","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/order/refund/apply/apply.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./apply.vue?vue&type=template&id=cd162460&\"\nvar renderjs\nimport script from \"./apply.vue?vue&type=script&lang=js&\"\nexport * from \"./apply.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order/refund/apply/apply.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./apply.vue?vue&type=template&id=cd162460&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !_vm.loadding ? _vm.images.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./apply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./apply.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"refund-apply pb100\" v-if=\"!loadding\">\r\n\t\t<form @submit=\"formSubmit\" @reset=\"formReset\">\r\n\t\t\t<view class=\"one-product d-s-c p30 bg-white \">\r\n\t\t\t\t<view class=\"cover\">\r\n\t\t\t\t\t<image :src=\"product.image.file_path || ''\" mode=\"aspectFit\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex-1\">\r\n\t\t\t\t\t<view class=\"pro-info\">{{product.product_name}}</view>\r\n\t\t\t\t\t<view class=\"pt10 p-0-30 f24 gray9\">\r\n\t\t\t\t\t\t<text class=\"\">\r\n\t\t\t\t\t\t\t单价：¥{{product.line_price}}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text class=\"ml20\">\r\n\t\t\t\t\t\t\t数量：{{product.total_num}}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 服务类型 -->\r\n\t\t\t<view class=\"group bg-white\">\r\n\t\t\t\t<view class=\"group-hd border-b-e\">\r\n\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t<text class=\"min-name\">服务类型</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"d-s-c p-20-0\">\r\n\t\t\t\t\t<button v-if=\"product.orderM.delivery_type.value!=30\" type=\"default\"\r\n\t\t\t\t\t\t:class=\"type==10?'btn-red-border':''\" @click=\"tabType(10)\">退货/退款</button>\r\n\t\t\t\t\t<button v-if=\"product.orderM.delivery_type.value!=30\" type=\"default\"\r\n\t\t\t\t\t\t:class=\"type==20?'ml20 btn-red-border':'ml20'\" @click=\"tabType(20)\">换货</button>\r\n\t\t\t\t\t<button v-if=\"product.orderM.delivery_type.value!=30\" type=\"default\"\r\n\t\t\t\t\t\t:class=\"type==30?'ml20 btn-red-border':'ml20'\" @click=\"tabType(30)\">仅退款</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!--申请原因-->\r\n\t\t\t<view class=\"group bg-white\">\r\n\t\t\t\t<view class=\"group-hd\">\r\n\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t<text class=\"min-name\">申请原因</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"d-s-c\">\r\n\t\t\t\t\t<textarea class=\"p10 box-s-b border flex-1 f28 lh150\" value=\"\" name=\"content\"\r\n\t\t\t\t\t\tplaceholder=\"请详细填写申请原因，注意保持商品的完好，建议您先与卖家沟通\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!--退款金额-->\r\n\t\t\t<view class=\"group bg-white\" v-if=\"type==10 || type==30\">\r\n\t\t\t\t<view class=\"group-hd\">\r\n\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t<text class=\"min-name\">退款金额：</text>\r\n\t\t\t\t\t\t<text class=\"red f30\" >¥{{product.total_pay_price}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!--上传图片-->\r\n\t\t\t<view class=\"group bg-white\">\r\n\t\t\t\t<view class=\"group-hd\">\r\n\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t<text class=\"min-name\">上传凭证</text>\r\n\t\t\t\t\t\t<text class=\"gray9\">(最多6张)</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"upload-list d-s-c\">\r\n\t\t\t\t\t<view class=\"item\" v-for=\"(imgs,img_num) in images\" :key=\"img_num\" @click=\"deleteFunc(imgs)\">\r\n\t\t\t\t\t\t<image :src=\"imgs.file_path\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item d-c-c d-stretch\" v-if=\"images.length<6\">\r\n\t\t\t\t\t\t<view class=\"upload-btn d-c-c d-c flex-1\" @click=\"openUpload()\">\r\n\t\t\t\t\t\t\t<text class=\"icon iconfont icon-xiangji f34\"></text>\r\n\t\t\t\t\t\t\t<text class=\"gray9\">上传图片</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"foot-btns\">\r\n\t\t\t\t<button form-type=\"submit\" class=\"btn-red\">确认提交</button>\r\n\t\t\t</view>\r\n\t\t</form>\r\n\t\t<!--上传图片-->\r\n\t\t<Upload v-if=\"isUpload\" @getImgs=\"getImgsFunc\"></Upload>\r\n\t</view>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n\timport Upload from '@/components/upload/upload.vue';\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tUpload\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t/*是否加载完成*/\r\n\t\t\t\tloadding: true,\r\n\t\t\t\tindicatorDots: true,\r\n\t\t\t\tautoplay: true,\r\n\t\t\t\tinterval: 2000,\r\n\t\t\t\tduration: 500,\r\n\t\t\t\ttype: 10,\r\n\t\t\t\t/*是否打开上传图片*/\r\n\t\t\t\tisUpload: false,\r\n\t\t\t\t/*订单商品id*/\r\n\t\t\t\torder_product_id: 0,\r\n\t\t\t\t/*订单商品*/\r\n\t\t\t\tproduct: {\r\n\t\t\t\t\timage: {\r\n\t\t\t\t\t\tfile_path: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\timages: [],\r\n\t\t\t\t/*小程序订阅消息*/\r\n\t\t\t\ttemlIds: [],\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.order_product_id = e.order_product_id;\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t/*获取订单详情*/\r\n\t\t\tthis.getData();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/*获取数据*/\r\n\t\t\tgetData() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tself.loadding = true;\r\n\t\t\t\tlet order_product_id = self.order_product_id;\r\n\t\t\t\tself._get('user.refund/apply', {\r\n\t\t\t\t\torder_product_id: order_product_id,\r\n\t\t\t\t\tplatform: self.getPlatform()\r\n\t\t\t\t}, function(res) {\r\n\t\t\t\t\tself.loadding = false;\r\n\t\t\t\t\tself.product = res.data.detail;\r\n\t\t\t\t\tself.temlIds = res.data.template_arr;\r\n\t\t\t\t\tif (self.product.orderM.delivery_type.value == 30) {\r\n\t\t\t\t\t\tself.type = 30;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/*切换服务类型*/\r\n\t\t\ttabType(e) {\r\n\t\t\t\tthis.type = e;\r\n\t\t\t},\r\n\r\n\t\t\t/*提交表单*/\r\n\t\t\tformSubmit: function(e) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tvar formdata = e.detail.value;\r\n\t\t\t\tformdata.type = self.type;\r\n\t\t\t\tformdata.order_product_id = self.order_product_id;\r\n\t\t\t\tformdata.images = JSON.stringify(self.images);\r\n\t\t\t\tlet callback = function() {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在提交',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tself._post('user.refund/apply', formdata, function(res) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\t\t\tself.gotoPage('/pages/order/refund/index/index');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tself.subMessage(self.temlIds, callback);\r\n\t\t\t},\r\n\r\n\t\t\t/*打开上传图片*/\r\n\t\t\topenUpload() {\r\n\t\t\t\tthis.isUpload = true;\r\n\t\t\t},\r\n\r\n\t\t\t/*获取上传的图片*/\r\n\t\t\tgetImgsFunc(e) {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tself.isUpload = false;\r\n\t\t\t\tif (e && typeof(e) != 'undefined') {\r\n\t\t\t\t\tlet this_length = self.images.length,\r\n\t\t\t\t\t\tupload_length = e.length;\r\n\t\t\t\t\tif (this_length + upload_length < 7) {\r\n\t\t\t\t\t\tself.images = self.images.concat(e);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet leng = 6 - this_length;\r\n\t\t\t\t\t\tfor (let i = 0; i < leng; i++) {\r\n\t\t\t\t\t\t\tself.images.push(e[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*删除图片*/\r\n\t\t\tdeleteFunc(e) {\r\n\t\t\t\tthis.images.splice(e, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n"],"sourceRoot":""}