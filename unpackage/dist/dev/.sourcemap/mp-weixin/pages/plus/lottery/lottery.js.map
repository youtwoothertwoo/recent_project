{"version":3,"sources":["uni-app:///main.js","webpack:///D:/working/舒服康/pages/plus/lottery/lottery.vue?2581","webpack:///D:/working/舒服康/pages/plus/lottery/lottery.vue?6a18","webpack:///D:/working/舒服康/pages/plus/lottery/lottery.vue?aa58","webpack:///D:/working/舒服康/pages/plus/lottery/lottery.vue?8e42","uni-app:///pages/plus/lottery/lottery.vue","webpack:///D:/working/舒服康/pages/plus/lottery/lottery.vue?2cad","webpack:///D:/working/舒服康/pages/plus/lottery/lottery.vue?a2ff"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","AlmostLottery","popup","uniLoadMore","data","loading","finish","times","points","user_points","bg_image","content","prizeList","onStock","prizeIndex","result","listData","styleValue","index_num","lineHeight","maxSize","timer","isPopup","isRecord","recordList","list_rows","last_page","page","no_more","isRule","computed","loadingType","onShow","methods","init","uni","success","self","animation","getPrizeList","title","res","requestApiGetPrizeList","item","resolve","ok","GetDateDiff","text","console","handleInitCanvas","handleDrawStart","hidePopup","hideRecordPopup","handleDrawEnd","handleDrawFinish","restoreData","getList","getRecord","scrolltolowerFunc"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACc;;;AAGpE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oWAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzDA;AAAA;AAAA;AAAA;AAAmnB,CAAgB,inBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC6EvoB;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA,SACAC;MACA;QACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;EACAC;IACA,OACAC;MACA;MACA;QACAC;UACAC;YACAC;YACAA;YACAA;cACAA;YACA;UACA;QACA;MACA;IACA;IACA,MACAC;MACA;MACAD;MACA;QACAA;MACA;MACA;IACA;IACAE;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAJ;kBACAK;gBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA;kBACArC;kBACA;oBACA;kBACA;gBACA;kBACA+B;kBACAA;oBACAK;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAE;MACA;MACA;QACAL;UACAA;UACAA;UACAA;UACAA;UACAA;UACAA;YACA;YACA;YACAM;UACA;UACAN;UACAA;UACAA;UACAA;UACAO;YACAC;YACAzC;UACA;QACA;MACA;IACA;IACA0C;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;;MAEA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;QACAC;MACA;QACAA;MACA;QACAA;MACA;QACAA;MACA;MACAC;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACAF;MACA;MACA;QACA;MACA;MACA;QACAX;QACA;MACA;MACAA;MACAA,WACA,6BACA,IACA;QACAA;QACAA;QACAA;QACA;QACA;QACA;UACA;UACA;YACA;YACAA;YACA;UACA;QACA;QACAW;MACA,GACA;QACAX;MACA,EACA;IACA;IACAc;MACA;IACA;IACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA,SACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACAnB;MACAA,WACA,+BACA;QACAZ;QACAE;MACA,GACA;QACAU;QACAA;QACAA;QACA;UACAA;QACA;MACA,EACA;IACA;IACAoB;MACA;MACA;MACA;IACA;IACA,eACAC;MACA;MACArB;MACAA;MACA;QACAA;QACAA;QACA;MACA;MACAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzVA;AAAA;AAAA;AAAA;AAA0qC,CAAgB,gmCAAG,EAAC,C;;;;;;;;;;;ACA9rC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/plus/lottery/lottery.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/plus/lottery/lottery.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./lottery.vue?vue&type=template&id=2cabd507&\"\nvar renderjs\nimport script from \"./lottery.vue?vue&type=script&lang=js&\"\nexport * from \"./lottery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./lottery.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/plus/lottery/lottery.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./lottery.vue?vue&type=template&id=2cabd507&\"","var components\ntry {\n  components = {\n    almostLottery: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/almost-lottery/components/almost-lottery/almost-lottery\" */ \"@/uni_modules/almost-lottery/components/almost-lottery/almost-lottery.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.points_name()\n  var m1 = _vm.points_name()\n  var g0 = _vm.prizeList.length\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.isRule = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.prizeIndex = -1\n    }\n    _vm.e2 = function ($event) {\n      _vm.isRule = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./lottery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./lottery.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"bg-lottery pr\" :style=\"'background-image: url(' + bg_image + ');'\">\r\n\t\t<view class=\"d-b-c top-box ww100\">\r\n\t\t\t<view class=\"d-s-c\">\r\n\t\t\t\t<image class=\"lottery-points\" src=\"/static/icon/lottery-points.png\" mode=\"\"></image>\r\n\t\t\t\t<text class=\"yellow f28\">账户{{ points_name() }}</text>\r\n\t\t\t\t<text class=\"white f36 ml10\">{{ user_points }}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"points-rule\" @click=\"isRule = true\">活动规则</view>\r\n\t\t</view>\r\n\t\t<view class=\"rule-title\">\r\n\t\t\t<view class=\"tc mt20 f28\">每次抽奖消耗 {{ points }} {{ points_name() }},今日剩余{{ times }}次</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"lottery-title\">\r\n\t\t\t<almost-lottery\r\n\t\t\t\t:prizeList=\"prizeList\"\r\n\t\t\t\t:prizeIndex=\"prizeIndex\"\r\n\t\t\t\t:lotteryBg=\"'/uni_modules/almost-lottery/static/almost-lottery/almost-lottery__bg.png'\"\r\n\t\t\t\t:actionBg=\"'/uni_modules/almost-lottery/static/almost-lottery/almost-lottery__action.png'\"\r\n\t\t\t\t@reset-index=\"prizeIndex = -1\"\r\n\t\t\t\t@draw-start=\"handleDrawStart\"\r\n\t\t\t\t@draw-end=\"handleDrawEnd\"\r\n\t\t\t\t@finish=\"handleDrawFinish\"\r\n\t\t\t\tv-if=\"prizeList.length\"\r\n\t\t\t/>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"ww100 mb23 mt40\">\r\n\t\t\t<button type=\"default\" class=\"record\" @click=\"gotoPage('/pages/plus/lottery/WinningRecord')\">\r\n\t\t\t\t中奖记录\r\n\t\t\t\t<text class=\"icon iconfont icon-bofang\"></text>\r\n\t\t\t</button>\r\n\t\t</view>\r\n\t\t<view class=\"content\">\r\n\t\t\t<swiper class=\"swiper\" vertical circular autoplay interval=\"2000\" display-multiple-items=\"5\">\r\n\t\t\t\t<swiper-item v-for=\"(item, index) in listData\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"box\">\r\n\t\t\t\t\t\t<view class=\"text-ellipsis\">{{ item.showText }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t</view>\r\n\t\t<popup :show=\"isPopup\" type=\"middle\" backgroundColor=\"#ea564c\" :padding=\"40\" :width=\"638\" @hidePopup=\"hidePopup\">\r\n\t\t\t<view class=\"pr ww100 tc mb38\">\r\n\t\t\t\t<view class=\"pop-tit-line\"></view>\r\n\t\t\t\t<view class=\"pop-tit-text\">恭喜，中奖啦</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"d-c-c d-c ww100 product-box pr\">\r\n\t\t\t\t<view class=\"circular-left\"></view>\r\n\t\t\t\t<view class=\"circular-right\"></view>\r\n\t\t\t\t<view></view>\r\n\t\t\t\t<view class=\"pop_img\"><image :src=\"result.image\" mode=\"\"></image></view>\r\n\t\t\t\t<view class=\"targetLink\" v-if=\"result.type == 3\" @click=\"gotoPage('/pages/plus/lottery/WinningRecord')\">\r\n\t\t\t\t\t<view class=\"f26 text-ellipsis fb\">{{ result.name }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"\" v-else>\r\n\t\t\t\t\t<view class=\"f26 text-ellipsis fb\">{{ result.name }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</popup>\r\n\t\t<popup :show=\"isRule\" :width=\"575\" :heigth=\"550\" :padding=\"0\" @hidePopup=\"isRule = false\" backgroundColor=\"none\">\r\n\t\t\t<view class=\"pop-center\">\r\n\t\t\t\t<image class=\"bg-rule\" src=\"/static/invite/bg-rule.png\" mode=\"\"></image>\r\n\t\t\t\t<view class=\"pop-title\">活动规则</view>\r\n\t\t\t\t<scroll-view scroll-y=\"true\" style=\"height: 473rpx;\">\r\n\t\t\t\t\t<view class=\"pop-title-box\">{{ content }}</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t</popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport popup from '@/components/uni-popup.vue';\r\nimport AlmostLottery from '@/uni_modules/almost-lottery/components/almost-lottery/almost-lottery.vue';\r\nimport uniLoadMore from '@/components/uni-load-more.vue';\r\nexport default {\r\n\tcomponents: {\r\n\t\tAlmostLottery,\r\n\t\tpopup,\r\n\t\tuniLoadMore\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tloading: true,\r\n\t\t\tfinish: false,\r\n\t\t\ttimes: 0,\r\n\t\t\tpoints: '',\r\n\t\t\tuser_points: '',\r\n\t\t\tbg_image: '',\r\n\t\t\tcontent: '',\r\n\t\t\t// 以下是奖品配置数据\r\n\t\t\t// 奖品数据\r\n\t\t\tprizeList: [],\r\n\t\t\t// 奖品是否设有库存\r\n\t\t\tonStock: true,\r\n\t\t\t// 中奖下标\r\n\t\t\tprizeIndex: -1,\r\n\t\t\tresult: {},\r\n\t\t\tlistData: [],\r\n\t\t\t/*样式*/\r\n\t\t\tstyleValue: '',\r\n\t\t\t/*当前角标*/\r\n\t\t\tindex_num: 0,\r\n\t\t\t/*高度*/\r\n\t\t\tlineHeight: 0,\r\n\t\t\t/*最大数*/\r\n\t\t\tmaxSize: 0,\r\n\t\t\t/*时间*/\r\n\t\t\ttimer: null,\r\n\t\t\tisPopup: false,\r\n\t\t\tisRecord: false,\r\n\t\t\trecordList: [],\r\n\t\t\tlist_rows: 10,\r\n\t\t\tlast_page: 0,\r\n\t\t\t/*当前页面*/\r\n\t\t\tpage: 1,\r\n\t\t\t/*没有更多*/\r\n\t\t\tno_more: false,\r\n\t\t\tisRule: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t/*加载中状态*/\r\n\t\tloadingType() {\r\n\t\t\tif (this.loading) {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else {\r\n\t\t\t\tif (this.recordList.length != 0 && this.no_more) {\r\n\t\t\t\t\treturn 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonShow() {\r\n\t\tthis.isRecord = false;\r\n\t\tthis.restoreData();\r\n\t\tthis.handleInitCanvas();\r\n\t},\r\n\tmethods: {\r\n\t\t/*初始化*/\r\n\t\tinit() {\r\n\t\t\tlet self = this;\r\n\t\t\tif (this.listData.length > 1) {\r\n\t\t\t\tuni.getSystemInfo({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tself.lineHeight = (res.windowWidth / 750) * 60;\r\n\t\t\t\t\t\tself.maxSize = self.listData.length;\r\n\t\t\t\t\t\tself.timer = setInterval(function() {\r\n\t\t\t\t\t\t\tself.animation();\r\n\t\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/*动画*/\r\n\t\tanimation() {\r\n\t\t\tlet self = this;\r\n\t\t\tself.index_num++;\r\n\t\t\tif (self.index_num >= self.maxSize) {\r\n\t\t\t\tself.index_num = 0;\r\n\t\t\t}\r\n\t\t\tthis.styleValue = -self.lineHeight * self.index_num;\r\n\t\t},\r\n\t\tasync getPrizeList() {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '奖品准备中...'\r\n\t\t\t});\r\n\t\t\tthis.loading = true;\r\n\t\t\t// 等待接口返回的数据进一步处理\r\n\t\t\tlet res = await this.requestApiGetPrizeList();\r\n\t\t\tif (res.ok) {\r\n\t\t\t\tlet data = res.data;\r\n\t\t\t\tif (data.length) {\r\n\t\t\t\t\tthis.prizeList = data;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '获取奖品失败'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\trequestApiGetPrizeList() {\r\n\t\t\tlet self = this;\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tself._post('plus.lottery.Lottery/getLottery', {}, function(res) {\r\n\t\t\t\t\tself.loading = false;\r\n\t\t\t\t\tself.bg_image = res.data.data.file_path;\r\n\t\t\t\t\tself.content = res.data.data.content;\r\n\t\t\t\t\tself.prizeList = res.data.data.prize;\r\n\t\t\t\t\tself.listData = res.data.recordList;\r\n\t\t\t\t\tself.listData.forEach((item, index) => {\r\n\t\t\t\t\t\tlet num = self.GetDateDiff(item.create_time);\r\n\t\t\t\t\t\tlet user = item.user ? item.user.nickName : '匿名用户';\r\n\t\t\t\t\t\titem.showText = num + user + '抽中了' + item.record_name;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tself.times = res.data.nums;\r\n\t\t\t\t\tself.points = res.data.data.points;\r\n\t\t\t\t\tself.user_points = res.data.data.user_points;\r\n\t\t\t\t\tself.init();\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tok: true,\r\n\t\t\t\t\t\tdata: self.prizeList\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tGetDateDiff(startTime) {\r\n\t\t\tvar t2 = startTime; //格式不正确需要转换\r\n\t\t\tvar aftert2 = new Date(t2.replace(/-/g, '/'));\r\n\t\t\tvar data = new Date();\r\n\t\t\tlet times = data.getTime() - aftert2.getTime();\r\n\t\t\tvar days = parseInt(times / (24 * 1000 * 3600)); //计算相差的天数\r\n\t\t\tvar leave = times % (24 * 3600 * 1000); //计算天数后剩余的毫秒数\r\n\t\t\r\n\t\t\tvar h = parseInt(leave / (3600 * 1000)); //计算小时数\r\n\t\t\r\n\t\t\t//计算分钟数\r\n\t\t\tvar h_leave = leave % (3600 * 1000);\r\n\t\t\tvar min = parseInt(h_leave / (60 * 1000));\r\n\t\t\r\n\t\t\t//计算秒数\r\n\t\t\tvar min_leave = h_leave % (60 * 1000);\r\n\t\t\tvar sec = parseInt(min_leave / 1000);\r\n\t\t\tlet text = '';\r\n\t\t\tif (days > 0) {\r\n\t\t\t\ttext = `${days}天前`;\r\n\t\t\t}else if (h > 0) {\r\n\t\t\t\ttext = `${h}小时前`;\r\n\t\t\t}else if (min > 0) {\r\n\t\t\t\ttext = `${min}分钟前`;\r\n\t\t\t}else{\r\n\t\t\t\ttext = `${sec}秒前`;\r\n\t\t\t}\r\n\t\t\tconsole.log(days);\r\n\t\t\treturn text;\r\n\t\t},\r\n\t\t// 重新生成\r\n\t\thandleInitCanvas() {\r\n\t\t\tthis.prizeList = [];\r\n\t\t\tthis.getPrizeList();\r\n\t\t},\r\n\t\t// 本次抽奖开始\r\n\t\thandleDrawStart() {\r\n\t\t\tconsole.log('start');\r\n\t\t\tlet self = this;\r\n\t\t\tif (self.loading || !self.finish) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (self.times <= 0) {\r\n\t\t\t\tself.showError('次数不足');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tself.loading = true;\r\n\t\t\tself._post(\r\n\t\t\t\t'plus.lottery.Lottery/draw',\r\n\t\t\t\t{},\r\n\t\t\t\tfunction(res) {\r\n\t\t\t\t\tself.times--;\r\n\t\t\t\t\tself.loading = false;\r\n\t\t\t\t\tself.result = res.data.result;\r\n\t\t\t\t\tlet list = [...self.prizeList];\r\n\t\t\t\t\tlet prizeId = res.data.result.prize_id;\r\n\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\tlet item = list[i];\r\n\t\t\t\t\t\tif (item.prize_id === prizeId) {\r\n\t\t\t\t\t\t\t// 中奖下标\r\n\t\t\t\t\t\t\tself.prizeIndex = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log('本次抽中奖品 =>', self.prizeList[self.prizeIndex].name);\r\n\t\t\t\t},\r\n\t\t\t\tfunction(err) {\r\n\t\t\t\t\tself.loading = false;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\t\thidePopup() {\r\n\t\t\tthis.isPopup = false;\r\n\t\t},\r\n\t\thideRecordPopup() {\r\n\t\t\tthis.isRecord = false;\r\n\t\t},\r\n\r\n\t\t// 本次抽奖结束\r\n\t\thandleDrawEnd() {\r\n\t\t\tthis.isPopup = true;\r\n\t\t\tthis.handleInitCanvas();\r\n\t\t\t// 完成抽奖后，这里处理你拿到结果后的逻辑\r\n\t\t},\r\n\t\t// 抽奖转盘绘制完成\r\n\t\thandleDrawFinish(res) {\r\n\t\t\tthis.finish = true;\r\n\t\t\t// 抽奖转盘准备就绪后，这里处理你的逻辑\r\n\t\t\t// console.log('抽奖转盘绘制完成', res)\r\n\t\t},\r\n\t\t/*还原初始化*/\r\n\t\trestoreData() {\r\n\t\t\tthis.recordList = [];\r\n\t\t\tthis.page = 1;\r\n\t\t\tthis.no_more = false;\r\n\t\t\tthis.last_page = 1;\r\n\t\t},\r\n\t\tgetList() {\r\n\t\t\tlet self = this;\r\n\t\t\tself.loading = true;\r\n\t\t\tself._post(\r\n\t\t\t\t'plus.lottery.Lottery/record',\r\n\t\t\t\t{\r\n\t\t\t\t\tlist_rows: self.list_rows,\r\n\t\t\t\t\tpage: self.page || 1\r\n\t\t\t\t},\r\n\t\t\t\tfunction(res) {\r\n\t\t\t\t\tself.loading = false;\r\n\t\t\t\t\tself.recordList = self.recordList.concat(res.data.list.data);\r\n\t\t\t\t\tself.last_page = res.data.list.last_page;\r\n\t\t\t\t\tif (res.data.list.last_page <= 1) {\r\n\t\t\t\t\t\tself.no_more = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\t\tgetRecord() {\r\n\t\t\tthis.restoreData();\r\n\t\t\tthis.getList();\r\n\t\t\tthis.isRecord = true;\r\n\t\t},\r\n\t\t/*可滚动视图区域到底触发*/\r\n\t\tscrolltolowerFunc() {\r\n\t\t\tlet self = this;\r\n\t\t\tself.page++;\r\n\t\t\tself.loading = true;\r\n\t\t\tif (self.page > self.last_page) {\r\n\t\t\t\tself.loading = false;\r\n\t\t\t\tself.no_more = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tself.getList();\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.bg-lottery {\r\n\twidth: 750rpx;\r\n\tmin-height: 1843rpx;\r\n\tbackground-size: 750rpx 1843rpx;\r\n\tbackground-position: 0 0;\r\n\toverflow: hidden;\r\n}\r\n\r\n.rule-title {\r\n\tfont-size: 26rpx;\r\n\tmargin: 0 auto;\r\n\twidth: 640rpx;\r\n\tmargin-top: 287rpx;\r\n\tcolor: #ffffff;\r\n}\r\n\r\n.rule-title-t {\r\n\tbackground-color: #ee1413;\r\n\tborder-radius: 12rpx;\r\n\theight: 80rpx;\r\n\tline-height: 80rpx;\r\n\twidth: 400rpx;\r\n\tpadding: 25rpx 35rpx;\r\n\tbox-sizing: border-box;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tmargin: 0 auto;\r\n}\r\n\r\n.lottery-title {\r\n\tpadding-top: 30rpx;\r\n\tposition: relative;\r\n\tz-index: 1;\r\n}\r\n\r\n.lottery-base {\r\n\tposition: relative;\r\n\tz-index: 0;\r\n\tmargin-top: -6rpx;\r\n\tmargin-bottom: 80rpx;\r\n}\r\n\r\n.base-image {\r\n\twidth: 424rpx;\r\n\theight: 186rpx;\r\n\tmargin: 0 auto;\r\n}\r\n\r\n.btn-image {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tmargin: 0 auto;\r\n\tbottom: -48rpx;\r\n\twidth: 262rpx;\r\n\theight: 130rpx;\r\n}\r\n\r\nbutton.record {\r\n\twidth: 252rpx;\r\n\theight: 64rpx;\r\n\tbackground: #ffc519;\r\n\tborder: 1px solid #ff840a;\r\n\tbox-shadow: 0rpx 6rpx 5rpx 0rpx rgba(0, 0, 0, 0.12);\r\n\tborder-radius: 32rpx;\r\n\tpadding: 0;\r\n\tcolor: #956746;\r\n\tfont-size: 26rpx;\r\n\tmargin: 0 auto;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n}\r\n.record .icon.icon-bofang {\r\n\tfont-size: 22rpx;\r\n\tcolor: #956746;\r\n\tmargin-left: 10rpx;\r\n}\r\n.ruler-box {\r\n\tbox-sizing: border-box;\r\n\twidth: 678rpx;\r\n\tmargin: 0 auto;\r\n\tbackground: #ffffff;\r\n\tborder-radius: 12rpx;\r\n\tpadding: 20rpx 45rpx;\r\n}\r\n\r\n.special-box {\r\n\twidth: 678rpx;\r\n\theight: 60rpx;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tborder-radius: 22rpx;\r\n\tpadding: 0 64rpx;\r\n\tbox-sizing: border-box;\r\n\tmargin: 60rpx auto;\r\n}\r\n\r\n.special-content {\r\n\twidth: 551rpx;\r\n\tfont-size: 30rpx;\r\n\tfont-family: Source Han Sans CN;\r\n\tfont-weight: 500;\r\n\tcolor: #e8573c;\r\n\tflex: 1;\r\n\tmargin: 0 auto;\r\n\toverflow: hidden;\r\n}\r\n\r\n.special-content-list {\r\n\ttransition: transform 0.4s;\r\n}\r\n\r\n.content-item {\r\n\theight: 60rpx;\r\n\tline-height: 60rpx;\r\n}\r\n\r\n.special-content.display_1 {\r\n\theight: 60rpx;\r\n}\r\n\r\n.pop_img {\r\n\twidth: 130rpx;\r\n\theight: 130rpx;\r\n\tmargin-bottom: 20rpx;\r\n\r\n\timage {\r\n\t\twidth: 130rpx;\r\n\t\theight: 130rpx;\r\n\t}\r\n}\r\n\r\n.pop-record-line {\r\n\tbackground-color: #333333;\r\n\twidth: 245rpx;\r\n\theight: 1rpx;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tmargin: auto;\r\n\tz-index: -1;\r\n}\r\n\r\n.pop-record-text {\r\n\tcolor: #333333;\r\n\tfont-size: 28rpx;\r\n\tbackground-color: #ffffff;\r\n\tdisplay: inline;\r\n\tpadding: 0 12rpx;\r\n}\r\n\r\n.pop-tit-line {\r\n\tbackground-color: #f5ddc1;\r\n\twidth: 472rpx;\r\n\theight: 2rpx;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tmargin: auto;\r\n\tz-index: -1;\r\n}\r\n\r\n.pop-tit-text {\r\n\tcolor: #f5ddc1;\r\n\tfont-size: 52rpx;\r\n\tbackground-color: #ea564c;\r\n\tdisplay: inline;\r\n\tpadding: 0 16rpx;\r\n}\r\n\r\n.product-box {\r\n\tborder-radius: 24rpx;\r\n\tbackground-color: #ffffff;\r\n\tpadding: 45rpx 0;\r\n}\r\n\r\n.circular-right {\r\n\twidth: 44rpx;\r\n\theight: 44rpx;\r\n\tborder-radius: 50%;\r\n\tbackground-color: #ea564c;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tbottom: 0;\r\n\tmargin: auto 0;\r\n\tright: -22rpx;\r\n}\r\n\r\n.circular-left {\r\n\twidth: 44rpx;\r\n\theight: 44rpx;\r\n\tborder-radius: 50%;\r\n\tbackground-color: #ea564c;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tbottom: 0;\r\n\tmargin: auto 0;\r\n\tleft: -22rpx;\r\n}\r\n\r\n.record-box {\r\n\tpadding-bottom: 70rpx;\r\n}\r\n\r\n.record-list-btn {\r\n\twidth: 96rpx;\r\n\theight: 40rpx;\r\n\tline-height: 40rpx;\r\n\tfont-size: 22rpx;\r\n\tcolor: #ffffff;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tpadding: 0;\r\n\tmargin-left: 16rpx;\r\n}\r\n.targetLink {\r\n\ttext-decoration: underline;\r\n\tcolor: #ea564c;\r\n}\r\n.top-box {\r\n\tposition: absolute;\r\n\ttop: 30rpx;\r\n\tz-index: 2;\r\n}\r\n.lottery-points {\r\n\twidth: 56rpx;\r\n\theight: 56rpx;\r\n\tmargin-right: 14rpx;\r\n\tflex-shrink: 0;\r\n\tmargin-left: 20rpx;\r\n}\r\n.points-rule {\r\n\twidth: 175rpx;\r\n\theight: 64rpx;\r\n\tbackground: #ffc519;\r\n\tborder-radius: 31rpx 0 0 31rpx;\r\n\tcolor: #956746;\r\n\tfont-size: 28rpx;\r\n\tline-height: 64rpx;\r\n\ttext-align: center;\r\n}\r\n.yellow {\r\n\tcolor: #ffc519;\r\n}\r\n.pop-center {\r\n\tposition: relative;\r\n\twidth: 575rpx;\r\n\theight: 550rpx;\r\n}\r\n\r\n.pop-title {\r\n\tposition: relative;\r\n\theight: 77rpx;\r\n\tline-height: 77rpx;\r\n\tcolor: #ffffff;\r\n\tfont-size: 28rpx;\r\n\ttext-align: center;\r\n\tz-index: 1;\r\n}\r\n.pop-title-box {\r\n\tpadding: 78rpx 52rpx 20rpx 42rpx;\r\n\twhite-space: pre-line;\r\n\tcolor: #7f685a;\r\n\tfont-size: 26rpx;\r\n\tline-height: 46rpx;\r\n}\r\n.bg-rule {\r\n\twidth: 575rpx;\r\n\theight: 550rpx;\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tz-index: 0;\r\n}\r\n.swiper {\r\n\twidth: 660rpx;\r\n\t/* 高度跟自己需要的子元素更改，我这里是显示3个，每个50rpx 所以是150rpx */\r\n\theight: 300rpx;\r\n\tmargin: 50rpx auto;\r\n}\r\n.box {\r\n\tcolor: #ffffff;\r\n\tfont-size: 24rpx;\r\n\tline-height: 1.2;\r\n\theight: 60rpx;\r\n\tbox-sizing: border-box;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 0 10rpx;\r\n}\r\n</style>\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./lottery.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./lottery.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1757908591405\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}