(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/set/set"],{"04a3":function(n,e,t){"use strict";(function(n,e){var i=t("47a9");t("112d");i(t("3240"));var o=i(t("14a8"));n.__webpack_require_UNI_MP_PLUGIN__=t,e(o.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},"14a8":function(n,e,t){"use strict";t.r(e);var i=t("5c80"),o=t("f9b5");for(var s in o)["default"].indexOf(s)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(s);t("6cf2");var a=t("828b"),u=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=u.exports},"5c80":function(n,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return o})),t.d(e,"a",(function(){}));var i=function(){var n=this.$createElement,e=(this._self._c,this.theme()||""),t=this.theme();this.$mp.data=Object.assign({},{$root:{m0:e,m1:t}})},o=[]},"6cf2":function(n,e,t){"use strict";var i=t("7757"),o=t.n(i);o.a},7757:function(n,e,t){},e9d0:function(n,e,t){"use strict";(function(n){var i=t("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(t("3b2d")),s={components:{Upload:function(){t.e("components/upload/uploadOne").then(function(){return resolve(t("a6d4"))}.bind(null,t)).catch(t.oe)},Popup:function(){t.e("components/uni-popup").then(function(){return resolve(t("a21a"))}.bind(null,t)).catch(t.oe)}},data:function(){return{userInfo:{},isUpload:!1,isPopup:!1,isOpen:!1,isShow:!1,newName:"",newPsd:"",oldPsd:"",hdPsd:"",type:"",version_no:"",imageList:[]}},onShow:function(){this.getData()},methods:{onChooseAvatar:function(n){console.log(n),this.uploadFile([n.detail.avatarUrl])},getData:function(){var e=this;n.showLoading({title:"加载中"}),e._get("user.index/setting",{},(function(t){e.userInfo=t.data.userInfo,n.hideLoading()}))},gotoBind:function(){this.gotoPage("/pages/user/modify-phone/modify-phone")},logout:function(){n.removeStorageSync("token"),n.removeStorageSync("user_id"),this.gotoPage("/pages/index/index")},changeName:function(n){"mobile"==n&&(this.oldmobile=this.userInfo.mobile),this.type=n,this.newName=this.userInfo[n],this.isPopup=!0},hidePopupFunc:function(){this.newName="",this.isShow=!1},changeinput:function(n){this.newName=n.target.value},clearName:function(){this.newName=""},clearPsd:function(){this.newPsd=""},clearHdPsd:function(){this.hdPsd=""},subName:function(n){this.loading||(this.newName=n.detail.value.newName,this.userInfo[this.type]=this.newName,this.update())},changeAvatarUrl:function(){this.isUpload=!0},uploadFile:function(e){var t=this,i=0,s=e.length,a={token:n.getStorageSync("token"),app_id:t.getAppId()};n.showLoading({title:"图片上传中"}),e.forEach((function(e,u){n.uploadFile({url:t.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:e,name:"iFile",formData:a,success:function(n){var e="object"===(0,o.default)(n.data)?n.data:JSON.parse(n.data);1===e.code?t.imageList.push(e.data):t.showError(e.msg)},complete:function(){i++,s===i&&(n.hideLoading(),t.getImgsFunc(t.imageList))}})}))},getImgsFunc:function(n){if(n&&"undefined"!=typeof n){this.userInfo.avatarUrl=n[0].file_path,this.update(),this.isUpload=!1}},update:function(){var e=this;if(!e.loading){n.showLoading({title:"加载中"});var t=e.userInfo;e.loading=!0,e._post("user.user/updateInfo",t,(function(t){e.showSuccess("修改成功",(function(){e.loading=!1,e.isPopup=!1,n.hideLoading(),e.getData()}),(function(t){n.hideLoading(),e.loading=!1,e.isPopup=!1}))}))}},deleteAccount:function(){var e=this;n.showModal({title:"提示",content:"是否确认删除账号？删除后您将无法用此账号登录，此账户下的数据也将删除",success:function(t){t.confirm&&e._post("user.user/deleteAccount",{},(function(t){e.showSuccess("删除成功",(function(){n.removeStorageSync("token"),n.removeStorageSync("user_id"),e.gotoPage("/pages/index/index")}))}),!1,(function(){n.hideLoading()}))}})},setpass:function(){this.isOpen=!0},hedui:function(){this.isShow=!0},handleClose:function(){this.newPsd="",this.oldPsd="",this.isOpen=!1},heduiClose:function(){this.hdPsd="",this.isShow=!1},changePsd:function(n){this.newPsd=n.detail.value},changeOldPsd:function(n){this.oldPsd=n.detail.value},heduiPsd:function(n){this.hdPsd=n.detail.value},subPsd:function(){var e=this;if(n.showLoading({title:"加载中"}),0===this.userInfo.pay_password_status){var t={pay_password:this.newPsd};e._post("user.user/setPayPassword",t,(function(t){e.showSuccess("设置成功",(function(){e.loading=!1,e.isOpen=!1,n.hideLoading(),e.getData()}),(function(t){n.hideLoading(),e.loading=!1,e.isPopup=!1}))}))}else{var i={pay_password_new:this.newPsd,pay_password_old:this.oldPsd};e._post("user.user/updatePayPassword",i,(function(t){e.showSuccess("修改成功",(function(){e.loading=!1,e.isOpen=!1,n.hideLoading(),e.getData()}),(function(t){n.hideLoading(),e.loading=!1,e.isOpen=!1}))}))}},subhd:function(){var e=this;n.showLoading({title:"加载中"});var t={pay_password:this.hdPsd};e._post("user.user/checkPayPassword",t,(function(t){e.showSuccess("核对成功",(function(){e.loading=!1,e.isShow=!1,n.hideLoading(),e.getData()}),(function(t){n.hideLoading(),e.loading=!1,e.isShow=!1}))}))}}};e.default=s}).call(this,t("df3c")["default"])},f9b5:function(n,e,t){"use strict";t.r(e);var i=t("e9d0"),o=t.n(i);for(var s in i)["default"].indexOf(s)<0&&function(n){t.d(e,n,(function(){return i[n]}))}(s);e["default"]=o.a}},[["04a3","common/runtime","common/vendor"]]]);