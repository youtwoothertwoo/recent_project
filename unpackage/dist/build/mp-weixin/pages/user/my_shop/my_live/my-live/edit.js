(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/my_shop/my_live/my-live/edit"],{3685:function(t,e,i){"use strict";i.r(e);var o=i("bdf8"),n=i("ff92");for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("fd9e");var u=i("828b"),c=Object(u["a"])(n["default"],o["b"],o["c"],!1,null,"27378a95",null,!1,o["a"],void 0);e["default"]=c.exports},"37e0":function(t,e,i){"use strict";i.r(e);var o=i("eebe"),n=i("579b");for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);var u=i("828b"),c=Object(u["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=c.exports},"579b":function(t,e,i){"use strict";i.r(e);var o=i("afda"),n=i.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},"62be":function(t,e,i){"use strict";(function(t,e){var o=i("47a9");i("c163");o(i("3240"));var n=o(i("3685"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(n.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},afda:function(t,e,i){"use strict";(function(t){var o=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("3b2d")),a={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var e=this;this.isVideo?t.chooseVideo({maxDuration:60,camera:"back",success:function(t){if(console.log(t),t){var i=[];i.push(t.tempFilePath),console.log(i),e.uploadFile(i)}},fail:function(t){console.log(t),e.$emit("getImgs",null)}}):t.chooseImage({count:e.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.uploadFile(t.tempFilePaths)},fail:function(t){e.$emit("getImgs",null)},complete:function(t){}})},uploadFile:function(e){var i=this,o=0,a=e.length,u={token:t.getStorageSync("token"),app_id:i.getAppId(),file_type:i.isVideo?"video":"image"};t.showLoading({title:"上传中"}),e.forEach((function(e,c){t.uploadFile({url:i.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:e,name:"iFile",formData:u,success:function(t){var e="object"===(0,n.default)(t.data)?t.data:JSON.parse(t.data);if(-1===e.code)return console.log("登录态失效, 重新登录"),void i.doLogin();1===e.code&&i.imageList.push(e.data)},complete:function(){o++,a===o&&(t.hideLoading(),i.$emit("getImgs",i.imageList))}})}))}}};e.default=a}).call(this,i("df3c")["default"])},bdf8:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var o=function(){var t=this.$createElement;this._self._c},n=[]},e7e4:function(t,e,i){"use strict";(function(t){var o=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("37e0")),a={components:{Upload:n.default,pickerViewDatetime:function(){i.e("components/picker-view-datetime/pickerViewDatetime").then(function(){return resolve(i("b76d"))}.bind(null,i)).catch(i.oe)},Products:function(){i.e("pages/user/my_shop/my_live/my-live/dialog/Products").then(function(){return resolve(i("dbdb"))}.bind(null,i)).catch(i.oe)},Countdown:function(){i.e("components/countdown/countdown").then(function(){return resolve(i("d11f"))}.bind(null,i)).catch(i.oe)}},data:function(){return{phoneHeight:0,scrollviewHigh:0,loading:!0,form:{name:"",share_img_id:null,share_img_path:"",start_time:"",end_time:"",productIds:[],data:[]},isUpload:!1,file_type:null,cur_image:null,open_products:!1,relationList:[],countdownConfig:{startstamp:0,endstamp:0,title:"距开播还剩",type:"text"},tapTime:"",is_user:!1,shop_supplier_id:""}},onLoad:function(t){this.form.room_id=t.room_id,this.shop_supplier_id=t.shop_supplier_id,this.getDetail()},mounted:function(){this.init()},methods:{getDetail:function(){var e=this;t.showLoading({title:"加载中"});e.data_type;e._get("live.RoomApply/liveproduct",{shop_supplier_id:e.shop_supplier_id},(function(i){t.hideLoading(),e.form=i.data.list,e.form.data.forEach((function(t){e.relationList.push(t.product_id)}))}))},getProduct:function(){t.showLoading({title:"加载中"}),this._get("live.RoomApply/liveproduct",{},(function(e){t.hideLoading()}))},init:function(){var e=this;t.getSystemInfo({success:function(t){e.scrollviewHigh=t.windowHeight}})},showProducts:function(){this.open_products=!0},closeProducts:function(e){var i=this;i.open_products=!1;if(null!=e){for(var o=0;o<e.length;o++)-1!=i.relationList.indexOf(e[o])&&(e.splice(o,1),o--);e.length>0&&i._post("live.RoomApply/addProduct",{productIds:e},(function(e){t.showToast({title:"绑定商品成功了",duration:2e3,icon:"success"}),i.getDetail()}))}},gotoProduct:function(t){var e="pages/product/detail/detail?product_id="+t.product_id;this.gotoPage(e)},deleteFunc:function(e){var i=this;t.showModal({title:"提示",content:"您确定要移除吗?",success:function(o){o.confirm?(t.showLoading({title:"正在处理"}),i._post("live.RoomApply/delProduct",{room_id:e.room_id,product_id:e.product.product_id},(function(e){t.hideLoading(),t.showToast({title:e.msg,duration:2e3,icon:"success"}),i.getDetail()}))):t.showToast({title:"取消移除",duration:1e3,icon:"none"})}})},nowLive:function(){var e=new Date;if(!(e-this.tapTime<1e3))if(this.form.name||(this.form.name="新建直播间"),/[<>*{}()^%$#@!~&= ]/.test(this.form.name))t.showModal({title:"提示",content:"名称不能为空或包含特殊字符",showCancel:!1});else{var i="/pages/pagesLive/live/live?roomName="+this.form.name+"&room_id="+this.form.room_id;this.is_user&&(i="/pages/pagesLive/live/live?type=create&roomName="+this.form.name+"&room_id="+this.form.room_id),this.gotoPage(i),this.tapTime=e}}}};e.default=a}).call(this,i("df3c")["default"])},eebe:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var o=function(){var t=this.$createElement;this._self._c},n=[]},f90f:function(t,e,i){},fd9e:function(t,e,i){"use strict";var o=i("f90f"),n=i.n(o);n.a},ff92:function(t,e,i){"use strict";i.r(e);var o=i("e7e4"),n=i.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a}},[["62be","common/runtime","common/vendor"]]]);