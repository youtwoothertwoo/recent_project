(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/my_shop/my_live/live/live"],{1727:function(t,e,i){"use strict";i.r(e);var n=i("db94"),o=i("1fb8");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);var u=i("828b"),c=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=c.exports},"1fb8":function(t,e,i){"use strict";i.r(e);var n=i("6745"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},4404:function(t,e,i){"use strict";var n=i("d3a1"),o=i.n(n);o.a},"58a5":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},o=[]},"5f4d":function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("112d");n(i("3240"));var o=n(i("ef61"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},6745:function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("3b2d")),a={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var e=this;this.isVideo?t.chooseVideo({maxDuration:60,camera:"back",success:function(t){if(console.log(t),t){var i=[];i.push(t.tempFilePath),console.log(i),e.uploadFile(i)}},fail:function(t){console.log(t),e.$emit("getImgs",null)}}):t.chooseImage({count:e.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.uploadFile(t.tempFilePaths)},fail:function(t){e.$emit("getImgs",null)},complete:function(t){}})},uploadFile:function(e){var i=this,n=0,a=e.length,u={token:t.getStorageSync("token"),app_id:i.getAppId(),file_type:i.isVideo?"video":"image"};t.showLoading({title:"上传中"}),e.forEach((function(e,c){t.uploadFile({url:i.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:e,name:"iFile",formData:u,success:function(t){var e="object"===(0,o.default)(t.data)?t.data:JSON.parse(t.data);if(-1===e.code)return console.log("登录态失效, 重新登录"),void i.doLogin();1===e.code&&i.imageList.push(e.data)},complete:function(){n++,a===n&&(t.hideLoading(),i.$emit("getImgs",i.imageList))}})}))}}};e.default=a}).call(this,i("df3c")["default"])},"6aa9":function(t,e,i){"use strict";(function(t,n){var o=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("1727")),u={components:{Upload:a.default},data:function(){return{form:{name:"",share_img_id:null,share_img_path:""},isUpload:!1,file_type:null,cur_image:null,categorylist:[],category:"",categorytype:[],index:0}},mounted:function(){},methods:{getCategory:function(){var t=this;t._post("plus.live.RoomApply/category",{},(function(e){e.data.list.forEach((function(e,i){t.categorylist.push(e.name)})),t.categorytype=e.data.list}))},bindTextAreaBlur:function(t){this.form.name=t},formSubmit:function(e){var i=this;""!=i.form.name?/[<>*{}()^%$#@!~&= ]/.test(i.form.name)?t.showModal({title:"提示",content:"名称不能为空或包含特殊字符",showCancel:!1}):null!=i.form.share_img_id?i._post("plus.live.RoomApply/addlive",i.form,(function(t){n.showToast({title:"创建成功"});var e="/pagesLive/live/live?type=create&room_id="+t.data.room_id;i.gotoPage(e)})):t.showModal({title:"提示",content:"请上传直播间分享图",showCancel:!1}):t.showModal({title:"提示",content:"请输入直播间名称",showCancel:!1})},openUpload:function(t){this.cur_imagetype=t,this.file_type="image",this.isUpload=!0},getImgsFunc:function(t){t&&"undefined"!=typeof t&&null!=this.cur_imagetype&&(this.form[this.cur_imagetype+"id"]=t[0]["file_id"],this.form[this.cur_imagetype+"path"]=t[0]["file_path"],this.cur_imagetype=null),this.isUpload=!1},bindPickerChange:function(t){this.index=t.target.value,this.category=this.categorylist[this.index],this.form.category_id=this.categorytype[this.index].category_id}}};e.default=u}).call(this,i("3223")["default"],i("df3c")["default"])},"905a":function(t,e,i){"use strict";i.r(e);var n=i("6aa9"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},d3a1:function(t,e,i){},db94:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},o=[]},ef61:function(t,e,i){"use strict";i.r(e);var n=i("58a5"),o=i("905a");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("4404");var u=i("828b"),c=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,"917c2b52",null,!1,n["a"],void 0);e["default"]=c.exports}},[["5f4d","common/runtime","common/vendor"]]]);