(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/shop"],{4234:function(t,i,e){},"4dd7":function(t,i,e){"use strict";e.r(i);var o=e("f74a"),a=e("b825");for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);e("a605");var n=e("828b"),r=Object(n["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);i["default"]=r.exports},a605:function(t,i,e){"use strict";var o=e("4234"),a=e.n(o);a.a},b825:function(t,i,e){"use strict";e.r(i);var o=e("e2cf"),a=e.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=a.a},db5f:function(t,i,e){"use strict";(function(t,i){var o=e("47a9");e("112d");o(e("3240"));var a=o(e("4dd7"));t.__webpack_require_UNI_MP_PLUGIN__=e,i(a.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},e2cf:function(t,i,e){"use strict";(function(t){var o=e("47a9");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=o(e("af34")),s=o(e("7ca3")),n={components:{uniLoadMore:function(){e.e("components/uni-load-more").then(function(){return resolve(e("948a"))}.bind(null,e)).catch(e.oe)}},data:function(){return{isLieBiao:!0,shop_info:"",product_list:"",adList:"",dataList:"",shop_supplier_id:"",isfollow:"",indicatorDots:!1,autoplay:!0,interval:5e3,duration:1e3,listData:[],topRefresh:!1,loading:!0,no_more:!1,type_active:"all",price_top:!1,shopData:[],page:1,search:"",last_page:0,scrollviewHigh:0,nav_type:0,is_open:0,is_record:0,liveList:[],dataModel:{qq:"",wechat:"",phone:""},service_type:0,service_open:0,statusBarHeight:0,titleBarHeight:0}},computed:{loadingType:function(){return this.loading?1:0!=this.product_list.length&&this.no_more?2:0}},onLoad:function(t){this.GetStatusBarHeight(),this.shop_supplier_id=t.shop_supplier_id},onShow:function(){},mounted:function(){this.getData(),this.getProduct(this.type_active)},onPullDownRefresh:function(){this.restoreData(),this.getData(),this.getProduct(this.type_active)},methods:{GetStatusBarHeight:function(){var i=t.getSystemInfoSync();i.statusBarHeight;this.statusBarHeight=t.getMenuButtonBoundingClientRect().top,this.titleBarHeight=t.getMenuButtonBoundingClientRect().height},init:function(){var i=this;t.getSystemInfo({success:function(e){i.phoneHeight=e.windowHeight;var o=t.createSelectorQuery().in(i).select(".shop_head");o.boundingClientRect((function(e){var o=2*i.phoneHeight-2*e.height-100;i.scrollviewHigh=o,t.hideLoading()})).exec()}})},scrolltolowerFunc:function(){if(this.bottomRefresh=!0,this.page++,this.loading=!0,this.page>this.last_page)return this.loading=!1,void(this.no_more=!0);this.getProduct(this.type_active)},getProduct:function(t){var i,e=this,o=e.page;e.loading=!0,e._get("product.product/lists",(i={page:o||1,sortType:"price",sortPrice:1},(0,s.default)(i,"sortType",t),(0,s.default)(i,"shop_supplier_id",e.shop_supplier_id),i),(function(t){e.loading=!1,e.product_list=[].concat((0,a.default)(e.product_list),(0,a.default)(t.data.list.data)),e.last_page=t.data.list.last_page,t.data.list.last_page<=1&&(e.no_more=!0)}))},restoreData:function(){this.shopData=[],this.product_list=[],this.page=1,this.category_id=0,this.search="",this.sortType="",this.sortPrice=0},getservice:function(){var t=this;t.isloding=!0,t._get("index/mpService",{shop_supplier_id:t.shop_supplier_id},(function(i){t.dataModel=i.data.mp_service,t.isloding=!1}))},tabTypeFunc:function(t){t!=this.type_active&&(this.product_list=[],this.page=1,this.no_more=!1,this.loading=!0,this.type_active=t,this.getProduct(t))},getData:function(){var i=this;i.loading=!0,t.showLoading({title:"加载中...."}),i._post("supplier.index/index",{shop_supplier_id:i.shop_supplier_id,visitcode:i.getVisitcode()},(function(e){i.loading=!1,i.shop_info=e.data.detail,i.adList=e.data.adList,i.isfollow=e.data.detail.isfollow,i.listData=e.data.couponList,i.is_record=e.data.liv_status.is_record,i.is_open=e.data.liv_status.is_open,i.liveList=e.data.liveList.data,i.service_open=e.data.service_open,e.data.mp_service?i.service_type=e.data.mp_service.service_type:i.service_type=10,0==i.scrollviewHigh?setTimeout((function(){i.init()}),2001):t.hideLoading(),i.getservice()}))},select_type:function(){this.isLieBiao=!this.isLieBiao},goto_product:function(t){this.gotoPage("/pages/product/detail/detail?product_id="+t)},guanzhu:function(){var t=this;t._post("user.Favorite/add",{pid:t.shop_supplier_id,type:10},(function(i){0==t.isfollow?t.isfollow=1:1==t.isfollow&&(t.isfollow=0)}))},receiveCoupon:function(i){var e=this.listData[i];if(0==e.state.value)return t.showToast({title:"已抢光",icon:"none"}),!1;this._post("user.coupon/receive",{coupon_id:e.coupon_id},(function(i){t.showToast({title:"领取成功",icon:"success",mask:!0,duration:2e3}),e.state.value=0,e.state.text="已领取"})),this.getData(this.type_active)},copyQQ:function(i){t.setClipboardData({data:i,success:function(i){t.showToast({title:"复制成功",icon:"success",mask:!0,duration:2e3})}})},callPhone:function(i){t.makePhoneCall({phoneNumber:i})},toRoom:function(t){if(""==t.record_url)return!1;this.gotoPage("/pagesLive/live/playback?room_id="+t.room_id)},toSevice:function(){10==this.service_type||this.shop_info.user_id==t.getStorageInfoSync("user_id")?this.nav_type=3:20==this.service_type&&this.gotoPage("/pages/plus/chat/chat?user_id="+this.shop_info.supplier_user_id+"&shop_supplier_id="+this.shop_info.shop_supplier_id+"&nickName="+this.shop_info.store_name)},goback:function(){t.navigateBack({})}}};i.default=n}).call(this,e("df3c")["default"])},f74a:function(t,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){}));var o=function(){var t=this,i=t.$createElement,e=(t._self._c,t.topBarTop()),o=t.topBarHeight(),a=0!=o?t.topBarHeight():null,s=t.listData.length>=1&&2==t.nav_type,n=2!=t.nav_type&&""!=t.shop_info&&1==t.isLieBiao&&0==t.nav_type?t.__map(t.product_list,(function(i,e){var o=t.__get_orig(i),a=t.listData.length;return{$orig:o,g1:a}})):null,r=2!=t.nav_type&&""!=t.shop_info&&1==t.nav_type?t.liveList.length:null,c=2!=t.nav_type&&0==t.nav_type?0==t.product_list.length&&!t.loading:null,u=t.listData.length;t._isMounted||(t.e0=function(i){t.nav_type=0},t.e1=function(i){t.nav_type=1},t.e2=function(i){t.nav_type=2}),t.$mp.data=Object.assign({},{$root:{m0:e,m1:o,m2:a,g0:s,l0:n,g2:r,g3:c,g4:u}})},a=[]}},[["db5f","common/runtime","common/vendor"]]]);