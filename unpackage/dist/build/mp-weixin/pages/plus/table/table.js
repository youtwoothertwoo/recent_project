(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plus/table/table"],{"0e2c":function(e,a,t){"use strict";var n=t("cd4e"),i=t.n(n);i.a},1727:function(e,a,t){"use strict";t.r(a);var n=t("db94"),i=t("1fb8");for(var l in i)["default"].indexOf(l)<0&&function(e){t.d(a,e,(function(){return i[e]}))}(l);var u=t("828b"),o=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);a["default"]=o.exports},"1fb8":function(e,a,t){"use strict";t.r(a);var n=t("6745"),i=t.n(n);for(var l in n)["default"].indexOf(l)<0&&function(e){t.d(a,e,(function(){return n[e]}))}(l);a["default"]=i.a},"3cce":function(e,a,t){"use strict";t.r(a);var n=t("e298"),i=t("d7b1");for(var l in i)["default"].indexOf(l)<0&&function(e){t.d(a,e,(function(){return i[e]}))}(l);t("0e2c");var u=t("828b"),o=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);a["default"]=o.exports},6365:function(e,a,t){"use strict";(function(e){var n=t("47a9");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(t("af34")),l=n(t("1727")),u=n(t("dcf5")),o={components:{mpvueCityPicker:function(){t.e("components/mpvue-citypicker/mpvueCityPicker").then(function(){return resolve(t("e328"))}.bind(null,t)).catch(t.oe)},Upload:l.default},data:function(){return{loading:!0,table_id:0,name:"",tableData:[],province:[],city:[],area:[],is_load:!1,cityPickerValueDefault:[0,0,0],areaIndex:0,isupload:!1,uploadIndex:0}},onShow:function(){this.loading&&this.getData()},onLoad:function(e){this.table_id=e.table_id},methods:{getData:function(){var a=this;a.loading=!0,a._get("plus.table.table/add",{table_id:a.table_id},(function(t){a.loading=!1,a.tableData=t.data.model.tableData,a.tableData.forEach((function(e,t){a.$set(a.tableData[t],"value","")})),a.province=t.data.regionData[0],a.city=t.data.regionData[1],a.area=t.data.regionData[2],a.is_load=!0,a.name=t.data.model.name,e.setNavigationBarTitle({title:a.name})}))},getName:function(e){return e.split(",")},getRadioGroup:function(e,a){var t=this.tableData[e].value.split(",");return t.indexOf(a)},changeRadio:function(e,a){this.tableData[a].value=e.detail.value},changeRadioGroup:function(e,a){var t=[];""!=this.tableData[a].value&&(t=this.tableData[a].value.split(","));var n=t.indexOf(e);-1!=n?(t.splice(n,1),this.$set(this.tableData[a],"value",t.join(","))):(t.push(e),this.$set(this.tableData[a],"value",t.join(",")))},changeSelect:function(e,a){this.tableData[a].value=this.getName(this.tableData[a].select_value)[e.detail.value]},changeDate:function(e,a){this.tableData[a].value=e.detail.value},changeArea:function(e){this.areaIndex=e,this.$refs.mpvueCityPicker.show()},onConfirm:function(e){this.tableData[this.areaIndex].value=e.label,this.cityPickerValueDefault=[0,0,0],this.areaIndex=0},openUpload:function(e){this.uploadIndex=e,this.isupload=!0},getImgsFunc:function(e){null!=e&&e.length>0&&(this.tableData[this.uploadIndex].value=e[0].file_path),this.uploadIndex=0,this.isupload=!1},submit:function(){var a=this,t=!0,n="";if(this.tableData.forEach((function(e,a){if("false"!=e.is_required)switch(e.rule){case"mobile":u.default.isPoneAvailable(e.value)||(n="请输入正确的手机号",t=!1);break;case"idcard":u.default.isVail(e.value)||(n="请输入正确的身份证号码",t=!1);break;case"phone":u.default.isTelAvailable(e.value)||(n="请输入正确的座机或手机号",t=!1);break;case"email":u.default.isMail(e.value)||(n="请输入正确的电子邮箱",t=!1);break;case"number":u.default.isNum(e.value)||(n="请输入正确的数字",t=!1);break;case"no":""==e.value&&(n="必填项不能为空",t=!1);break}})),!t)return a.showError(n),!1;var l=(0,i.default)(a.tableData);l.forEach((function(e,a){"area"==e.type&&(e.value=e.value+e.address)})),l=JSON.stringify(l),a._post("plus.table.table/add",{tableData:l,table_id:a.table_id},(function(t){a.showSuccess("提交成功",(function(){e.navigateBack({delta:parseInt(1)})}))}))}}};a.default=o}).call(this,t("df3c")["default"])},6745:function(e,a,t){"use strict";(function(e){var n=t("47a9");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(t("3b2d")),l={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var a=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var t=[];t.push(e.tempFilePath),console.log(t),a.uploadFile(t)}},fail:function(e){console.log(e),a.$emit("getImgs",null)}}):e.chooseImage({count:a.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){a.uploadFile(e.tempFilePaths)},fail:function(e){a.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(a){var t=this,n=0,l=a.length,u={token:e.getStorageSync("token"),app_id:t.getAppId(),file_type:t.isVideo?"video":"image"};e.showLoading({title:"上传中"}),a.forEach((function(a,o){e.uploadFile({url:t.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:a,name:"iFile",formData:u,success:function(e){var a="object"===(0,i.default)(e.data)?e.data:JSON.parse(e.data);if(-1===a.code)return console.log("登录态失效, 重新登录"),void t.doLogin();1===a.code&&t.imageList.push(a.data)},complete:function(){n++,l===n&&(e.hideLoading(),t.$emit("getImgs",t.imageList))}})}))}}};a.default=l}).call(this,t("df3c")["default"])},cd4e:function(e,a,t){},d7b1:function(e,a,t){"use strict";t.r(a);var n=t("6365"),i=t.n(n);for(var l in n)["default"].indexOf(l)<0&&function(e){t.d(a,e,(function(){return n[e]}))}(l);a["default"]=i.a},db94:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return i})),t.d(a,"a",(function(){}));var n=function(){var e=this.$createElement;this._self._c},i=[]},e298:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return i})),t.d(a,"a",(function(){}));var n=function(){var e=this,a=e.$createElement,t=(e._self._c,e.loading?null:e.theme()||""),n=e.loading?null:e.theme(),i=e.loading?null:e.__map(e.tableData,(function(a,t){var n=e.__get_orig(a),i="radio"==a.type?e.getName(a.select_value):null,l="radio-group"==a.type?e.__map(e.getName(a.select_value),(function(a,n){var i=e.__get_orig(a),l=e.getRadioGroup(t,a);return{$orig:i,m2:l}})):null,u="select"==a.type?e.getName(a.select_value):null;return{$orig:n,l0:i,l1:l,m3:u}}));e._isMounted||(e.e0=function(a,t,n){var i=arguments[arguments.length-1].currentTarget.dataset,l=i.eventParams||i["event-params"];t=l.ritem,n=l.index;return e.changeRadioGroup(t,n)}),e.$mp.data=Object.assign({},{$root:{m0:t,m1:n,l2:i}})},i=[]},f9eb:function(e,a,t){"use strict";(function(e,a){var n=t("47a9");t("112d");n(t("3240"));var i=n(t("3cce"));e.__webpack_require_UNI_MP_PLUGIN__=t,a(i.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])}},[["f9eb","common/runtime","common/vendor"]]]);