(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plus/bargain/detail/detail"],{"0b96":function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("c163");n(i("3240"));var a=n(i("68f2"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(a.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},"4e78":function(t,e,i){},"54fe":function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2bb2")),o={components:{Spec:function(){Promise.all([i.e("common/vendor"),i.e("pages/plus/bargain/detail/popup/Spec")]).then(function(){return resolve(i("8927"))}.bind(null,i)).catch(i.oe)},Rule:function(){i.e("pages/plus/bargain/detail/popup/Rule").then(function(){return resolve(i("7288"))}.bind(null,i)).catch(i.oe)},countdown:function(){i.e("components/countdown/countdown").then(function(){return resolve(i("d11f"))}.bind(null,i)).catch(i.oe)},Mpservice:function(){i.e("components/mpservice/Mpservice").then(function(){return resolve(i("0315"))}.bind(null,i)).catch(i.oe)},guarantee:function(){i.e("components/guarantee").then(function(){return resolve(i("3e5d"))}.bind(null,i)).catch(i.oe)}},data:function(){return{phoneHeight:0,scrollviewHigh:0,loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,countdownConfig:{title:"",startstamp:0,endstamp:0},detail:{product_sku:{},show_sku:{product_price:"",product_sku_id:0,line_price:"",stock_num:0,sku_image:""},show_point_sku:{}},alreadyChioce:"",setting:{},isPopup:!1,specData:null,productModel:{},productSpecArr:[],isRule:!1,productSku:[],isMpservice:!1,serverList:"",isguarantee:!1,shop_info:{},store_open:1}},onLoad:function(e){t.showLoading({title:"加载中"}),this.type_active=0,this.bargain_product_id=e.bargain_product_id},mounted:function(){this.init(),this.getData()},methods:{init:function(){var e=this;t.getSystemInfo({success:function(i){e.phoneHeight=i.windowHeight;var n=t.createSelectorQuery().select(".btns-wrap");n.boundingClientRect((function(t){var i=e.phoneHeight-t.height;e.scrollviewHigh=i})).exec()}})},getData:function(){var e=this,i=e.bargain_product_id;e._get("plus.bargain.product/detail",{bargain_product_id:i,url:""},(function(i){e.countdownConfig.startstamp=i.data.active.start_time,e.countdownConfig.endstamp=i.data.active.end_time,i.data.detail.product.content=a.default.format_content(i.data.detail.product.content),20==i.data.detail.product.spec_type&&e.initSpecData(i.data.detail.bargainSku,i.data.specData),e.store_open=i.data.store_open,e.setting=i.data.setting,e.detail=i.data.detail,e.shop_info=i.data.detail.supplier,e.getServer(),e.loadding=!1,t.hideLoading()}))},confirm:function(){this.$refs.countdown.clear()},getServer:function(){var t=[];this.detail.server&&(this.detail.server.forEach((function(e,i){t.push(e.name)})),this.serverList=t.join("·"))},closeGuarantee:function(){this.isguarantee=!1},showGuarantee:function(){this.isguarantee=!0},initSpecData:function(t,e){for(var i=this,n=0;n<t.length;n++){var a=t[n];if(a.productSku){var o=a.productSku.spec_sku_id.split("_").map(Number);this.productSku.push(o)}}for(var c in e.spec_attr)for(var r=0;r<e.spec_attr[c].spec_items.length;r++){var s=e.spec_attr[c].spec_items[r];this.hasSpec(s.item_id,c)?(s.checked=!1,s.disabled=!1):(e.spec_attr[c].spec_items.splice(r,1),r--)}this.specData=e,this.specData.spec_attr&&(this.specData.spec_attr.forEach((function(t){i.alreadyChioce+=t.group_name,i.alreadyChioce+=" / "})),this.alreadyChioce=this.alreadyChioce.replace(/(\s\/\s)$/gi,""))},hasSpec:function(t,e){for(var i=!1,n=0;n<this.productSku.length;n++){var a=this.productSku[n];if(a[e]==t){i=!0;break}}return i},openPopup:function(t){var e={specData:this.specData,detail:this.detail,productSpecArr:null!=this.specData?new Array(this.specData.spec_attr.length):[],show_sku:{sku_image:"",bargain_price:0,product_sku_id:0,line_price:0,bargain_stock:0,bargain_product_sku_id:0,sum:1},productSku:this.productSku,type:t};this.productModel=e,this.isPopup=!0},closePopup:function(t,e){if(this.isPopup=!1,t&&t.spec_attr){this.alreadyChioce="";var i="已选：",n="";t.spec_attr.forEach((function(t){if(t.spec_items){for(var e="",a=0;a<t.spec_items.length;a++){var o=t.spec_items[a];if(o.checked){e=o.spec_value+" / ";break}}""!=e?i+=e:n+=t.group_name}})),""!=n?this.alreadyChioce=n:(i=i.replace(/(\s\/\s)$/gi,""),this.alreadyChioce=i)}e&&(this.cart_total_num=e)},openMaservice:function(){this.isMpservice=!0},closeMpservice:function(){this.isMpservice=!1},gotoProducntDetail:function(){this.gotoPage("/pages/product/detail/detail?product_id="+this.detail.product_id)},openRule:function(){this.isRule=!0},closeRule:function(){this.isRule=!1},returnValFunc:function(){},goto_shop:function(){this.gotoPage("/pages/shop/shop?shop_supplier_id="+this.detail.supplier.shop_supplier_id)}}};e.default=o}).call(this,i("df3c")["default"])},"659e":function(t,e,i){"use strict";i.r(e);var n=i("54fe"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"68f2":function(t,e,i){"use strict";i.r(e);var n=i("95e9"),a=i("659e");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("acb5");var c=i("828b"),r=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=r.exports},"95e9":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={countdown:function(){return i.e("components/countdown/countdown").then(i.bind(null,"d11f"))}},a=function(){var t=this.$createElement;this._self._c},o=[]},acb5:function(t,e,i){"use strict";var n=i("4e78"),a=i.n(n);a.a}},[["0b96","common/runtime","common/vendor"]]]);