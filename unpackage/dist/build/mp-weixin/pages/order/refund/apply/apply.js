(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/refund/apply/apply"],{1727:function(t,e,i){"use strict";i.r(e);var n=i("db94"),o=i("1fb8");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);var u=i("828b"),d=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=d.exports},"1e16":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=(this._self._c,this.loadding?null:this.images.length);this.$mp.data=Object.assign({},{$root:{g0:e}})},o=[]},"1fb8":function(t,e,i){"use strict";i.r(e);var n=i("6745"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},6745:function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("3b2d")),a={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var e=this;this.isVideo?t.chooseVideo({maxDuration:60,camera:"back",success:function(t){if(console.log(t),t){var i=[];i.push(t.tempFilePath),console.log(i),e.uploadFile(i)}},fail:function(t){console.log(t),e.$emit("getImgs",null)}}):t.chooseImage({count:e.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.uploadFile(t.tempFilePaths)},fail:function(t){e.$emit("getImgs",null)},complete:function(t){}})},uploadFile:function(e){var i=this,n=0,a=e.length,u={token:t.getStorageSync("token"),app_id:i.getAppId(),file_type:i.isVideo?"video":"image"};t.showLoading({title:"上传中"}),e.forEach((function(e,d){t.uploadFile({url:i.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:e,name:"iFile",formData:u,success:function(t){var e="object"===(0,o.default)(t.data)?t.data:JSON.parse(t.data);if(-1===e.code)return console.log("登录态失效, 重新登录"),void i.doLogin();1===e.code&&i.imageList.push(e.data)},complete:function(){n++,a===n&&(t.hideLoading(),i.$emit("getImgs",i.imageList))}})}))}}};e.default=a}).call(this,i("df3c")["default"])},"918f":function(t,e,i){"use strict";i.r(e);var n=i("1e16"),o=i("f56a");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);var u=i("828b"),d=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=d.exports},"92a4":function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("112d");n(i("3240"));var o=n(i("918f"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},"9da1":function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("1727")),a={components:{Upload:o.default},data:function(){return{loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,type:10,isUpload:!1,order_product_id:0,product:{image:{file_path:""}},images:[],temlIds:[]}},onLoad:function(t){this.order_product_id=t.order_product_id},mounted:function(){this.getData()},methods:{getData:function(){var e=this;t.showLoading({title:"加载中"}),e.loadding=!0;var i=e.order_product_id;e._get("user.refund/apply",{order_product_id:i,platform:e.getPlatform()},(function(i){e.loadding=!1,e.product=i.data.detail,e.temlIds=i.data.template_arr,30==e.product.orderM.delivery_type.value&&(e.type=30),t.hideLoading()}))},tabType:function(t){this.type=t},formSubmit:function(e){var i=this,n=e.detail.value;n.type=i.type,n.order_product_id=i.order_product_id,n.images=JSON.stringify(i.images);i.subMessage(i.temlIds,(function(){t.showLoading({title:"正在提交",mask:!0}),i._post("user.refund/apply",n,(function(e){t.hideLoading(),t.showToast({title:e.msg,duration:3e3,complete:function(){i.gotoPage("/pages/order/refund/index/index")}})}))}))},openUpload:function(){this.isUpload=!0},getImgsFunc:function(t){if(this.isUpload=!1,t&&"undefined"!=typeof t){var e=this.images.length,i=t.length;if(e+i<7)this.images=this.images.concat(t);else for(var n=6-e,o=0;o<n;o++)this.images.push(t[o])}},deleteFunc:function(t){this.images.splice(t,1)}}};e.default=a}).call(this,i("df3c")["default"])},db94:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},o=[]},f56a:function(t,e,i){"use strict";i.r(e);var n=i("9da1"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a}},[["92a4","common/runtime","common/vendor"]]]);