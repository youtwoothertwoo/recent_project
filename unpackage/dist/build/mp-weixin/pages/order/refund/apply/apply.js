(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/refund/apply/apply"],{"0b81":function(e,t,i){"use strict";(function(e){var n=i("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(i("37e0")),a={components:{Upload:o.default},data:function(){return{loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,type:10,isUpload:!1,order_product_id:0,product:{image:{file_path:""}},images:[],temlIds:[]}},onLoad:function(e){this.order_product_id=e.order_product_id},mounted:function(){this.getData()},methods:{getData:function(){var t=this;e.showLoading({title:"加载中"}),t.loadding=!0;var i=t.order_product_id;t._get("user.refund/apply",{order_product_id:i,platform:t.getPlatform()},(function(i){t.loadding=!1,t.product=i.data.detail,t.temlIds=i.data.template_arr,30==t.product.orderM.delivery_type.value&&(t.type=30),e.hideLoading()}))},tabType:function(e){this.type=e},formSubmit:function(t){var i=this,n=t.detail.value;n.type=i.type,n.order_product_id=i.order_product_id,n.images=JSON.stringify(i.images);i.subMessage(i.temlIds,(function(){e.showLoading({title:"正在提交",mask:!0}),i._post("user.refund/apply",n,(function(t){e.hideLoading(),e.showToast({title:t.msg,duration:3e3,complete:function(){i.gotoPage("/pages/order/refund/index/index")}})}))}))},openUpload:function(){this.isUpload=!0},getImgsFunc:function(e){if(this.isUpload=!1,e&&"undefined"!=typeof e){var t=this.images.length,i=e.length;if(t+i<7)this.images=this.images.concat(e);else for(var n=6-t,o=0;o<n;o++)this.images.push(e[o])}},deleteFunc:function(e){this.images.splice(e,1)}}};t.default=a}).call(this,i("df3c")["default"])},"37e0":function(e,t,i){"use strict";i.r(t);var n=i("eebe"),o=i("579b");for(var a in o)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return o[e]}))}(a);var u=i("828b"),d=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=d.exports},"579b":function(e,t,i){"use strict";i.r(t);var n=i("afda"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},"8d03":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){}));var n=function(){var e=this.$createElement,t=(this._self._c,this.loadding?null:this.images.length);this.$mp.data=Object.assign({},{$root:{g0:t}})},o=[]},afda:function(e,t,i){"use strict";(function(e){var n=i("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(i("3b2d")),a={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var i=[];i.push(e.tempFilePath),console.log(i),t.uploadFile(i)}},fail:function(e){console.log(e),t.$emit("getImgs",null)}}):e.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){var i=this,n=0,a=t.length,u={token:e.getStorageSync("token"),app_id:i.getAppId(),file_type:i.isVideo?"video":"image"};e.showLoading({title:"上传中"}),t.forEach((function(t,d){e.uploadFile({url:i.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:u,success:function(e){var t="object"===(0,o.default)(e.data)?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void i.doLogin();1===t.code&&i.imageList.push(t.data)},complete:function(){n++,a===n&&(e.hideLoading(),i.$emit("getImgs",i.imageList))}})}))}}};t.default=a}).call(this,i("df3c")["default"])},b5de:function(e,t,i){"use strict";i.r(t);var n=i("8d03"),o=i("e1d3");for(var a in o)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return o[e]}))}(a);var u=i("828b"),d=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=d.exports},bd04:function(e,t,i){"use strict";(function(e,t){var n=i("47a9");i("c163");n(i("3240"));var o=n(i("b5de"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(o.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},e1d3:function(e,t,i){"use strict";i.r(t);var n=i("0b81"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},eebe:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){}));var n=function(){var e=this.$createElement;this._self._c},o=[]}},[["bd04","common/runtime","common/vendor"]]]);