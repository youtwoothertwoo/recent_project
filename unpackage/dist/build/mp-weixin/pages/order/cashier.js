(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/cashier"],{"22c2":function(e,a,t){"use strict";t.r(a);var r=t("b7cd"),o=t("d53a");for(var c in o)["default"].indexOf(c)<0&&function(e){t.d(a,e,(function(){return o[e]}))}(c);t("8c83");var n=t("828b"),i=Object(n["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);a["default"]=i.exports},"292d":function(e,a,t){},"8c83":function(e,a,t){"use strict";var r=t("292d"),o=t.n(r);o.a},b7cd:function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"c",(function(){return o})),t.d(a,"a",(function(){}));var r=function(){var e=this.$createElement,a=(this._self._c,this.theme()||""),t=this.theme(),r=this.hasBanlance?this.getTheme():null;this.$mp.data=Object.assign({},{$root:{m0:a,m1:t,m2:r}})},o=[]},d53a:function(e,a,t){"use strict";t.r(a);var r=t("d596"),o=t.n(r);for(var c in r)["default"].indexOf(c)<0&&function(e){t.d(a,e,(function(){return r[e]}))}(c);a["default"]=o.a},d596:function(e,a,t){"use strict";(function(e,r){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=t("b68c"),c={data:function(){return{balance:"",balanceType:!1,type:0,loading:!0,order_id:0,order_type:0,pay_type:20,checkedPay:[],payPrice:"",isHedui:!0}},computed:{hasBanlance:function(){if(40==this.order_type||this.balance<=0)return!1;var e=this.checkedPay.indexOf(10);return-1!=e}},onLoad:function(a){e.enableAlertBeforeUnload({message:"您的订单如在规定时间内未支付将被取消，请尽快完成支付",success:function(e){console.log("方法注册成功：",e)},fail:function(e){console.log("方法注册失败：",e)}}),this.order_id=decodeURIComponent(a.order_id),a.order_type&&(this.order_type=a.order_type),this.getData()},onBackPress:function(e){if(20!=this.order_type&&30!=this.order_type&&40!=this.order_type)return"navigateBack"===e.from?(console.log(),!0):(this.back(),!0)},methods:{back:function(){var e=this;r.showModal({title:"提示",content:"您的订单如在规定时间内未支付将被取消，请尽快完成支付",cancelText:"继续支付",confirmText:"确认离开",success:function(a){a.confirm?r.reLaunch({ulr:"/pages/order/order-detail?order_id="+e.order_id}):a.cancel&&console.log("用户点击取消")}})},getTheme:function(){var e=this.theme(),a="#ff5704";switch(e){case"theme0":a="#ff5704";break;case"theme1":a="#19ad57";break;case"theme2":a="#ffcc00";break;case"theme3":a="#33a7ff";break;case"theme4":a="#e4e4e4";break;case"theme5":a="#c8ba97";break;case"theme6":a="#623ceb";break}return a},getData:function(){var e=this;e.loading=!0,r.showLoading({title:"加载中"});var a="user.order/pay";20==e.order_type&&(a="supplier.index/pay"),30==e.order_type&&(a="plus.live.plan/pay"),40==e.order_type&&(a="balance.plan/pay"),50==e.order_type&&(a="plus.advance.Order/pay");var t={order_id:e.order_id,pay_source:e.getPlatform()};e._get(a,t,(function(a){e.loading=!1;var t=[];a.data.payTypes.forEach((function(e){t.push(1*e)})),e.checkedPay=t,e.payPrice=a.data.payPrice,e.balance=a.data.balance||"",10!=e.checkedPay[0]?e.pay_type=e.checkedPay[0]||e.checkedPay[1]||20:e.pay_type=e.checkedPay[1]||e.checkedPay[0],r.hideLoading()}))},switch2Change:function(e){this.balanceType=e.detail.value},submit:function(){var e=this;if(this.balanceType&&this.isHedui)r.showModal({title:"请输入支付密码",confirmText:"确定",editable:!0,success:function(a){if(a.confirm){var t={pay_password:a.content};e._post("user.user/checkPayPassword",t,(function(a){e.showSuccess("核对成功"),e.isHedui=!1}))}}});else{e.loading=!0,r.showLoading({title:"加载中"});var a="user.order/pay";20==e.order_type&&(a="supplier.index/pay"),40==e.order_type&&(a="balance.plan/pay"),30==e.order_type&&(a="plus.live.plan/pay"),50==e.order_type&&(a="plus.advance.Order/pay");var t=1==e.balanceType?1:0;0==e.payPrice&&(t=1);var c={order_id:e.order_id,pay_source:e.getPlatform(),payType:e.pay_type,use_balance:t};e._post(a,c,(function(a){e.loading=!1,r.hideLoading(),(0,o.pay)(a,e,e.paySuccess,e.payError)}))}},paySuccess:function(e){var a=this;return console.log(a.order_type),30==a.order_type||40==a.order_type?void a.showSuccess("支付成功",(function(){console.log("back"),r.navigateBack({delta:1})})):20==a.order_type?void a.showSuccess("支付成功",(function(){a.gotoPage("/pages/user/my_shop/my_shop","reLaunch")})):50==a.order_type?void a.showSuccess("支付成功",(function(){a.gotoPage("/pages/order/myorder","reLaunch")})):void a.gotoPage("/pages/order/pay-success/pay-success?order_id="+e.data.order_id,"reLaunch")},payError:function(e){30==this.order_type||40==this.order_type?r.navigateBack({delta:parseInt(1)}):20==this.order_type?this.gotoPage("/pages/user/my_shop/my_shop","redirect"):(this.order_type,this.gotoPage("/pages/order/myorder","redirect"))},payTypeFunc:function(e){this.pay_type=e}}};a.default=c}).call(this,t("3223")["default"],t("df3c")["default"])},d60b:function(e,a,t){"use strict";(function(e,a){var r=t("47a9");t("112d");r(t("3240"));var o=r(t("22c2"));e.__webpack_require_UNI_MP_PLUGIN__=t,a(o.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])}},[["d60b","common/runtime","common/vendor"]]]);