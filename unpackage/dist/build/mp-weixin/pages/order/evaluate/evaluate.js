(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/evaluate/evaluate"],{1727:function(e,t,i){"use strict";i.r(t);var o=i("db94"),a=i("1fb8");for(var n in a)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(n);var c=i("828b"),s=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"1fb8":function(e,t,i){"use strict";i.r(t);var o=i("6745"),a=i.n(o);for(var n in o)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return o[e]}))}(n);t["default"]=a.a},"28de":function(e,t,i){"use strict";i.r(t);var o=i("8b7c"),a=i.n(o);for(var n in o)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return o[e]}))}(n);t["default"]=a.a},6745:function(e,t,i){"use strict";(function(e){var o=i("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(i("3b2d")),n={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var i=[];i.push(e.tempFilePath),console.log(i),t.uploadFile(i)}},fail:function(e){console.log(e),t.$emit("getImgs",null)}}):e.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){var i=this,o=0,n=t.length,c={token:e.getStorageSync("token"),app_id:i.getAppId(),file_type:i.isVideo?"video":"image"};e.showLoading({title:"上传中"}),t.forEach((function(t,s){e.uploadFile({url:i.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:c,success:function(e){var t="object"===(0,a.default)(e.data)?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void i.doLogin();1===t.code&&i.imageList.push(t.data)},complete:function(){o++,n===o&&(e.hideLoading(),i.$emit("getImgs",i.imageList))}})}))}}};t.default=n}).call(this,i("df3c")["default"])},"79a4":function(e,t,i){},"8b7c":function(e,t,i){"use strict";(function(e){var o=i("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(i("1727")),n={components:{Upload:a.default},data:function(){return{loadding:!0,order_id:"",tableData:[],score:10,isUpload:!1,image_id:[],img:"/static/temp/photo.jpg",index:"",service:[],logistics:[],describe:[]}},onLoad:function(e){this.order_id=e.order_id},mounted:function(){e.showLoading({title:"加载中"}),this.getData()},methods:{getData:function(){var t=this,i=t.order_id;t._get("user.comment/order",{order_id:i},(function(i){t.tableData=i.data.productList;t.tableData.forEach((function(e,i){t.tableData[i].score=10,t.tableData[i].image_list=[],t.service.push([!1,!1,!1,!1,!1]),t.logistics.push([!1,!1,!1,!1,!1]),t.describe.push([!1,!1,!1,!1,!1])}));t.loadding=!1,e.hideLoading()}))},gradeFunc:function(e,t,i){e.score=t,this.$set(this.tableData,i,e),console.log(this.tableData)},chooseLog:function(e,t){var i=this,o=this;o.tableData[t].express_score=0,this.logistics[t].forEach((function(a,n){n<=e?(i.logistics[t].splice(n,1,!0),o.tableData[t].express_score++):i.logistics[t].splice(n,1,!1)}))},chooseServ:function(e,t){var i=this,o=this;o.tableData[t].server_score=0,this.service[t].forEach((function(a,n){n<=e?(i.service[t].splice(n,1,!0),o.tableData[t].server_score++):i.service[t].splice(n,1,!1)})),console.log(o.tableData)},choosees:function(e,t){var i=this,o=this;o.tableData[t].describe_score=0,this.describe[t].forEach((function(a,n){n<=e?(i.describe[t].splice(n,1,!0),o.tableData[t].describe_score++):i.describe[t].splice(n,1,!1)})),console.log(o.tableData)},formSubmit:function(e){var t=this,i=t.order_id,o=[];this.tableData.forEach((function(e,t){o[t]={order_product_id:e.order_product_id,product_id:e.product_id,score:e.score,image_list:e.image_list,express_score:e.express_score,server_score:e.server_score,describe_score:e.describe_score,content:""},e.content&&(o[t].content=e.content)})),console.log(o),t._post("user.comment/order",{order_id:i,formData:JSON.stringify(o)},(function(e){t.showSuccess("评价成功！",(function(){t.gotoPage("/pages/order/myorder","redirect")}))}))},openUpload:function(e){this.isUpload=!1,this.index=e,this.isUpload=!0},getImgsFunc:function(e){if(e&&"undefined"!=typeof e){var t=this.index;this.tableData[t].image_list=this.tableData[t].image_list.concat(e)}this.isUpload=!1},deleteImg:function(e,t){var i=this.tableData[e];i.image_list.splice(t,1),this.$set(this.tableData,e,i)}}};t.default=n}).call(this,i("df3c")["default"])},a717:function(e,t,i){"use strict";i.r(t);var o=i("c9bd"),a=i("28de");for(var n in a)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("ac5c");var c=i("828b"),s=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},ac5c:function(e,t,i){"use strict";var o=i("79a4"),a=i.n(o);a.a},c90e:function(e,t,i){"use strict";(function(e,t){var o=i("47a9");i("112d");o(i("3240"));var a=o(i("a717"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(a.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},c9bd:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,i=(e._self._c,e.loadding?null:e.__map(e.tableData,(function(t,i){var o=e.__get_orig(t),a=t.image_list.length;return{$orig:o,g0:a}})));e.$mp.data=Object.assign({},{$root:{l0:i}})},a=[]},db94:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},a=[]}},[["c90e","common/runtime","common/vendor"]]]);