(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/evaluate/evaluate"],{"25ef":function(e,t,i){"use strict";(function(e){var a=i("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(i("37e0")),n={components:{Upload:o.default},data:function(){return{loadding:!0,order_id:"",tableData:[],score:10,isUpload:!1,image_id:[],img:"/static/temp/photo.jpg",index:"",service:[],logistics:[],describe:[]}},onLoad:function(e){this.order_id=e.order_id},mounted:function(){e.showLoading({title:"加载中"}),this.getData()},methods:{getData:function(){var t=this,i=t.order_id;t._get("user.comment/order",{order_id:i},(function(i){t.tableData=i.data.productList;t.tableData.forEach((function(e,i){t.tableData[i].score=10,t.tableData[i].image_list=[],t.service.push([!1,!1,!1,!1,!1]),t.logistics.push([!1,!1,!1,!1,!1]),t.describe.push([!1,!1,!1,!1,!1])}));t.loadding=!1,e.hideLoading()}))},gradeFunc:function(e,t,i){e.score=t,this.$set(this.tableData,i,e),console.log(this.tableData)},chooseLog:function(e,t){var i=this,a=this;a.tableData[t].express_score=0,this.logistics[t].forEach((function(o,n){n<=e?(i.logistics[t].splice(n,1,!0),a.tableData[t].express_score++):i.logistics[t].splice(n,1,!1)}))},chooseServ:function(e,t){var i=this,a=this;a.tableData[t].server_score=0,this.service[t].forEach((function(o,n){n<=e?(i.service[t].splice(n,1,!0),a.tableData[t].server_score++):i.service[t].splice(n,1,!1)})),console.log(a.tableData)},choosees:function(e,t){var i=this,a=this;a.tableData[t].describe_score=0,this.describe[t].forEach((function(o,n){n<=e?(i.describe[t].splice(n,1,!0),a.tableData[t].describe_score++):i.describe[t].splice(n,1,!1)})),console.log(a.tableData)},formSubmit:function(e){var t=this,i=t.order_id,a=[];this.tableData.forEach((function(e,t){a[t]={order_product_id:e.order_product_id,product_id:e.product_id,score:e.score,image_list:e.image_list,express_score:e.express_score,server_score:e.server_score,describe_score:e.describe_score,content:""},e.content&&(a[t].content=e.content)})),console.log(a),t._post("user.comment/order",{order_id:i,formData:JSON.stringify(a)},(function(e){t.showSuccess("评价成功！",(function(){t.gotoPage("/pages/order/myorder","redirect")}))}))},openUpload:function(e){this.isUpload=!1,this.index=e,this.isUpload=!0},getImgsFunc:function(e){if(e&&"undefined"!=typeof e){var t=this.index;this.tableData[t].image_list=this.tableData[t].image_list.concat(e)}this.isUpload=!1},deleteImg:function(e,t){var i=this.tableData[e];i.image_list.splice(t,1),this.$set(this.tableData,e,i)}}};t.default=n}).call(this,i("df3c")["default"])},"37e0":function(e,t,i){"use strict";i.r(t);var a=i("eebe"),o=i("579b");for(var n in o)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return o[e]}))}(n);var s=i("828b"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=c.exports},"579b":function(e,t,i){"use strict";i.r(t);var a=i("afda"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=o.a},6411:function(e,t,i){"use strict";var a=i("75ff"),o=i.n(a);o.a},"75ff":function(e,t,i){},"9a19":function(e,t,i){"use strict";(function(e,t){var a=i("47a9");i("c163");a(i("3240"));var o=a(i("a37e"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(o.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},a37e:function(e,t,i){"use strict";i.r(t);var a=i("ab76"),o=i("b971");for(var n in o)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return o[e]}))}(n);i("6411");var s=i("828b"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=c.exports},ab76:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,i=(e._self._c,e.loadding?null:e.__map(e.tableData,(function(t,i){var a=e.__get_orig(t),o=t.image_list.length;return{$orig:a,g0:o}})));e.$mp.data=Object.assign({},{$root:{l0:i}})},o=[]},afda:function(e,t,i){"use strict";(function(e){var a=i("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(i("3b2d")),n={data:function(){return{imageList:[]}},props:["num","isVideo"],onLoad:function(){},mounted:function(){this.chooseImageFunc()},methods:{chooseImageFunc:function(){var t=this;this.isVideo?e.chooseVideo({maxDuration:60,camera:"back",success:function(e){if(console.log(e),e){var i=[];i.push(e.tempFilePath),console.log(i),t.uploadFile(i)}},fail:function(e){console.log(e),t.$emit("getImgs",null)}}):e.chooseImage({count:t.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.uploadFile(e.tempFilePaths)},fail:function(e){t.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(t){var i=this,a=0,n=t.length,s={token:e.getStorageSync("token"),app_id:i.getAppId(),file_type:i.isVideo?"video":"image"};e.showLoading({title:"上传中"}),t.forEach((function(t,c){e.uploadFile({url:i.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:t,name:"iFile",formData:s,success:function(e){var t="object"===(0,o.default)(e.data)?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void i.doLogin();1===t.code&&i.imageList.push(t.data)},complete:function(){a++,n===a&&(e.hideLoading(),i.$emit("getImgs",i.imageList))}})}))}}};t.default=n}).call(this,i("df3c")["default"])},b971:function(e,t,i){"use strict";i.r(t);var a=i("25ef"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=o.a},eebe:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},o=[]}},[["9a19","common/runtime","common/vendor"]]]);