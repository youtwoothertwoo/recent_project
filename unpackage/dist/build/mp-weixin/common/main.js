(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"262c":function(t,e,a){"use strict";(function(t,e,n){var o=a("47a9"),r=o(a("3b2d")),i=o(a("7ca3"));a("112d");var c=o(a("3240")),s=o(a("3229")),u=(o(a("19df")),o(a("dcf5"))),d=o(a("5c42")),f=o(a("7189")),p=a("f16e"),l=o(a("64c3"));function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}t.__webpack_require_UNI_MP_PLUGIN__=a,c.default.prototype.$store=l.default;c.default.component("header-bar",(function(){a.e("components/header").then(function(){return resolve(a("cd9a"))}.bind(null,a)).catch(a.oe)}));c.default.component("request-loading",(function(){a.e("components/jjjloading").then(function(){return resolve(a("3e23"))}.bind(null,a)).catch(a.oe)}));c.default.component("tabBar",(function(){a.e("components/tabbar/footTabbar").then(function(){return resolve(a("3e0d"))}.bind(null,a)).catch(a.oe)})),c.default.prototype.footTabberData={active:"home"},c.default.prototype.$fire=new f.default,c.default.config.productionTip=!1,s.default.mpType="app",c.default.prototype.config=d.default;var h=new c.default(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){(0,i.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},s.default));e(h).$mount(),c.default.prototype.websiteUrl=d.default.app_url,c.default.prototype.app_id=d.default.app_id,c.default.prototype.h5_addr=d.default.h5_addr,c.default.prototype.gotoPage=p.gotopage,c.default.prototype.font_url=d.default.font_url,c.default.prototype.points_name=function(t){if(t){var e=new RegExp("积分","g");return t.replace(e,l.default.state.points_name)}return l.default.state.points_name},c.default.prototype.ios=function(){var t=navigator.userAgent.toLowerCase();return!(t.indexOf("like mac os x")<0||"micromessenger"!=t.match(/MicroMessenger/i))},c.default.prototype._get=function(t,e,a,o,i){var c=this;e=e||{},e.token=n.getStorageSync("token")||"",e.app_id=this.getAppId(),n.request({url:this.websiteUrl+"/index.php/api/"+t,data:e,dataType:"json",method:"GET",success:function(t){if(200!==t.statusCode||"object"!==(0,r.default)(t.data))return!1;if(-2===t.data.code)c.showError(t.data.msg,(function(){n.removeStorageSync("token"),this.gotoPage("/pages/index/index","reLaunch")}));else if(-1===t.data.code)console.log("登录态失效, 重新登录"),c.doLogin();else{if(0===t.data.code)return c.showError(t.data.msg,(function(){o&&o(t)})),!1;a&&a(t.data)}},fail:function(t){o&&o(t)},complete:function(t){n.hideLoading(),i&&i(t)}})},c.default.prototype._post=function(t,e,a,o,i){var c=this;e=e||{},e.token=n.getStorageSync("token")||"",e.app_id=this.getAppId(),n.request({url:this.websiteUrl+"/index.php/api/"+t,data:e,dataType:"json",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){if(200!==t.statusCode||"object"!==(0,r.default)(t.data))return!1;if(-1===t.data.code)console.log("登录态失效, 重新登录"),c.doLogin();else{if(0===t.data.code)return c.showError(t.data.msg,(function(){o&&o(t)})),!1;a&&a(t.data)}},fail:function(t){o&&o(t)},complete:function(t){n.hideLoading(),i&&i(t)}})},c.default.prototype.doLogin=function(){var t=getCurrentPages();if(t.length){var e=t[t.length-1];"pages/login/login"!=e.route&&"pages/login/weblogin"!=e.route&&"pages/login/openlogin"!=e.route&&(n.setStorageSync("currentPage",e.route),n.setStorageSync("currentPageOptions",e.options))}console.log("app_ID="+this.getAppId()),this.gotoPage("/pages/login/login")},c.default.prototype.showError=function(t,e){n.showModal({title:"友情提示",content:t,showCancel:!1,success:function(t){e&&e()}})},c.default.prototype.showSuccess=function(t,e){n.showModal({title:"友情提示",content:t,showCancel:!1,success:function(t){e&&e()}})},c.default.prototype.getAppId=function(){return this.app_id||10001},c.default.prototype.compareVersion=function(t,e){t=t.split("."),e=e.split(".");var a=Math.max(t.length,e.length);while(t.length<a)t.push("0");while(e.length<a)e.push("0");for(var n=0;n<a;n++){var o=parseInt(t[n]),r=parseInt(e[n]);if(o>r)return 1;if(o<r)return-1}return 0},c.default.prototype.getShareUrlParams=function(t){return u.default.urlEncode(Object.assign({referee_id:this.getUserId(),app_id:this.getAppId()},t))},c.default.prototype.getUserId=function(){return n.getStorageSync("user_id")},c.default.prototype.getPlatform=function(t){return"wx"},c.default.prototype.subMessage=function(e,a){var n=t.getSystemInfoSync().SDKVersion;e&&0!=e.length&&this.compareVersion(n,"2.8.2")>=0?t.requestSubscribeMessage({tmplIds:e,success:function(t){},fail:function(t){},complete:function(t){a()}}):a()},c.default.prototype.isWeixin=function(){var t=navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)},c.default.prototype.getVisitcode=function(){var t=n.getStorageSync("visitcode");return t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,a="x"==t?e:3&e|8;return a.toString(16)})),t=t.replace(/-/g,""),n.setStorageSync("visitcode",t)),t},c.default.prototype.topBarTop=function(){return n.getMenuButtonBoundingClientRect().top},c.default.prototype.topBarHeight=function(){return n.getMenuButtonBoundingClientRect().height},c.default.prototype.yulan=function(t,e){var a=[];Array.isArray(t)?t[0].file_path?t.forEach((function(t,e){a.push(t.file_path)})):a=t:a=[t];var o=1*e;n.previewImage({urls:a,current:o,indicator:"default"})},c.default.prototype.theme=function(){return"theme"+this.$store.state.theme||!1},c.default.prototype.footTab=function(){return this.$store.state.footTab||""},c.default.prototype.subPrice=function(t,e){var a=String(t);if(1==e)return a.substring(0,a.indexOf("."));if(2==e){var n=a.indexOf(".");return a.slice(n+1,n+3)}},c.default.prototype.convertTwo=function(t){var e="";return e=t<10?"0"+t:t,e},c.default.prototype.getTabBarLinks=function(){var t=this,e=n.getStorageSync("TabBar"),a=n.getStorageSync("theme");null!=e&&""!=e?this.setTabBarLinks(e,a):n.request({url:this.config.app_url+"/index.php/api/index/nav",data:{app_id:this.config.app_id},success:function(e){var a=e.data.data.vars.data,o=e.data.data.theme.theme;t.$store.commit("changeTheme",o),n.setStorageSync("TabBar",a),n.setStorageSync("theme",o),t.setTabBarLinks(a,o)}})},c.default.prototype.setTabBarLinks=function(t,e){if("0"==t.is_auto){n.showTabBar(),t.list=[];n.setTabBarStyle({color:"#333333",selectedColor:["#ff5704","#19ad57","#ffcc00","#1774ff","#e4e4e4","#c8ba97","#623ceb"][e]}),n.setTabBarItem({index:0,text:"首页",iconPath:"static/tabbar/home.png",selectedIconPath:"static/tabbar/home_"+e+".png"}),n.setTabBarItem({index:1,text:"分类",iconPath:"static/tabbar/category.png",selectedIconPath:"static/tabbar/category_"+e+".png"}),n.setTabBarItem({index:2,text:"店铺",iconPath:"static/tabbar/shop.png",selectedIconPath:"static/tabbar/shop_"+e+".png"}),n.setTabBarItem({index:3,text:"购物车",iconPath:"static/tabbar/cart.png",selectedIconPath:"static/tabbar/cart_"+e+".png"}),n.setTabBarItem({index:4,text:"我的",iconPath:"static/tabbar/user.png",selectedIconPath:"static/tabbar/user_"+e+".png"})}else n.hideTabBar()},c.default.prototype.getThemeColor=function(){var t=this.$store.state.theme;return["#ff5704","#19ad57","#ffcc00","#1774ff","#e4e4e4","#c8ba97","#623ceb"][t]}}).call(this,a("3223")["default"],a("df3c")["createApp"],a("df3c")["default"])},3229:function(t,e,a){"use strict";a.r(e);var n=a("bd87");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("3bb2");var r=a("828b"),i=Object(r["a"])(n["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);e["default"]=i.exports},"3bb2":function(t,e,a){"use strict";var n=a("49e6"),o=a.n(n);o.a},"49e6":function(t,e,a){},a82e:function(t,e,a){"use strict";(function(t){var n=a("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a("dcf5")),r=(n(a("5c42")),{onLaunch:function(t){console.log("App Launch"),this.updateManager();this.onStartupScene(t.query),this.getNav()},onShow:function(){},onHide:function(){},methods:{isFirstEnter:function(){var e=t.getStorageSync("firstEnter");t.getSystemInfo({success:function(a){console.log("firstEnter="+e),"ios"!=a.platform||e||(console.log("---------------"),t.navigateTo({url:"/pages/privacy/privacy"}))}})},updateManager:function(){var e=t.getUpdateManager();e.onCheckForUpdate((function(a){a.hasUpdate&&e.onUpdateReady((function(a){t.showModal({title:"更新提示",content:"新版本已经准备好，即将重启应用",showCancel:!1,success:function(t){t.confirm&&e.applyUpdate()}})}))})),e.onUpdateFailed((function(e){t.showModal({title:"更新提示",content:"检查到有新版本，但下载失败，请检查网络设置",showCancel:!1})}))},onStartupScene:function(e){var a=o.default.getSceneData(e),n=e.referee_id;n>0&&(t.getStorageSync("referee_id")||t.setStorageSync("referee_id",n));var r=a.uid;r>0&&(t.getStorageSync("referee_id")||t.setStorageSync("referee_id",r))},getNav:function(){var e=this;t.request({url:this.config.app_url+"/index.php/api/index/nav",data:{app_id:this.config.app_id},success:function(a){var n=a.data.data.vars.data,o=a.data.data.theme.theme;e.$store.commit("changePoints",a.data.data.points_name),e.$store.commit("changeTheme",o),t.setStorageSync("TabBar",n),t.setStorageSync("theme",o)}})},updateWgt:function(e){t.showModal({title:"版本更新",content:"检查到有新版本，请点击更新",confirmText:"更新",showCancel:!1,success:function(a){if(a.confirm){var n=plus.downloader.createDownload(e,{},(function(e,a){t.showToast({title:"下载完成",mask:!1,duration:1e3}),200==a?plus.runtime.install(e.filename,{force:!0},(function(){console.log("install success..."),plus.nativeUI.alert("已更新至最新版本，确定后将重启应用",(function(){plus.runtime.restart()}),"更新提示","确定")}),(function(a){console.log(a),console.log(e.filename),t.showToast({title:"安装失败-01",mask:!1,duration:1500})})):t.showToast({title:"更新失败-02",mask:!1,duration:1500})}));try{n.start();var o=0,r=plus.nativeUI.showWaiting("正在下载");n.addEventListener("statechanged",(function(t,e){switch(t.state){case 1:r.setTitle("正在下载");break;case 2:r.setTitle("已连接到服务器");break;case 3:o=parseInt(parseFloat(t.downloadedSize)/parseFloat(t.totalSize)*100),r.setTitle("  正在下载"+o+"%  ");break;case 4:plus.nativeUI.closeWaiting();break}}))}catch(i){plus.nativeUI.closeWaiting(),t.showToast({title:"更新失败-03",mask:!1,duration:1500})}}}})}}});e.default=r}).call(this,a("df3c")["default"])},bd87:function(t,e,a){"use strict";a.r(e);var n=a("a82e"),o=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a}},[["262c","common/runtime","common/vendor"]]]);